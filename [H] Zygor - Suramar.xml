<HBProfile xsi:noNamespaceSchemaLocation="../Schemas/EchoSchema.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <Name>[H] Zygor Suramar By Zakrn</Name>
    <MinDurability>0.3</MinDurability>
    <MinFreeBagSlots>3</MinFreeBagSlots>
    <SellGrey>true</SellGrey>
    <SellWhite>false</SellWhite>
    <SellGreen>false</SellGreen>
    <SellBlue>false</SellBlue>
    <SellPurple>false</SellPurple>
    <MailGrey>false</MailGrey>
    <MailWhite>true</MailWhite>
    <MailGreen>true</MailGreen>
    <MailBlue>true</MailBlue>
    <MailPurple>true</MailPurple>
    <TargetElites>false</TargetElites>
    <!--These aren't used often, only if there are navigation issues with the profile or areas you want the character to avoid-->
    <Blackspots>
        <Blackspot X="879.0854" Y="5259.045" Z="48.92279" Radius="2.93233" />
        <Blackspot X="5677.544" Y="4255.224" Z="695.3536" Radius="12.15873" />
        <Blackspot X="1175.61" Y="5278.585" Z="75.51192" Radius="30.0" />
    </Blackspots>
    <!--These are the vendors you want the bot to go to when doing a repair or vendor run-->
    <Vendors>
    </Vendors>
    <!--These are the locations of the available mailboxes that you want your character to use-->
    <Mailboxes>
    </Mailboxes>
    <!--Setting these would make sure the character stays away from and does not attack these mobs-->
    <AvoidMobs>
        <Mob Name="Koralune Ettin" Entry="99791" />
        <Mob Name="Elfbane" Entry="99792" />
        <Mob Name="Tideclaw" Entry="110824" />
        <Mob Name="Leytusk" Entry="100846" />
    </AvoidMobs>
    <!--Here is where the meat of the profile will take place-->
    <QuestOrder>
        <CustomBehavior File="UserSettings" HarvestHerbs="false" HarvestMinerals="false" />
        <!-- No distractions! -->
        <!-- settings setup, original credit to the Nuok and the world quests team-->
        <CustomBehavior File="RunCode" Type="Definition">
            <![CDATA[
                public class Settings : Styx.Helpers.Settings
                {
                    public static readonly string _settingsPath = Path.Combine(CharacterSettingsDirectory, "Profiles", "ZakrnSuramarSettings.xml");
                    private static Settings _instance;
                    public static Settings Instance => _instance ?? (_instance = new Settings());
                    public Settings() : base(_settingsPath) {}

                    [Setting]
                    [Styx.Helpers.DefaultValue(100)]
                    public int ManaTarget { get; set; }

                    [Setting]
                    [Styx.Helpers.DefaultValue(null)]
                    public string ReturnProfile { get; set; }

                    [Setting]
                    [Styx.Helpers.DefaultValue(false)]
                    public bool UseArtifactPowerItems { get; set; }

                    [Setting]
                    [Styx.Helpers.DefaultValue(0)]
                    public int Status43313 { get; set; }
                }

                void SetManaTarget( int manaTarget){
                    var s = Settings.Instance;
                    s.ManaTarget = manaTarget;
                    s.Save();
                }

                void PrepManaFarm( string returnProfile, int manaGoal )
                {
                    SetManaTarget( manaGoal );
                    var s = Settings.Instance;
                    s.ReturnProfile = "MAIN";
                    s.Save();
                }
                int GetManaTarget()
                {
                    return Settings.Instance.ManaTarget;
                }

                string GetReturnProfile()
                {
                    return Settings.Instance.ReturnProfile;
                }
        ]]>
        </CustomBehavior>
        <!-- Got this dialog / settings code from EchoTiger's Legion profiles! -->
        <CustomBehavior File="RunCode" Type="Definition">
            <![CDATA[
                private static System.Windows.Window _uiWindow {
                    get;
                    set;
                }
                public static void Initialize() {
                    //Settings.Instance.Load();
                    System.Windows.Application.Current.Dispatcher.BeginInvoke((Action)(() => {
                        var grid = (System.Windows.Controls.Grid)((Honorbuddy.MainWindow) System.Windows.Application.Current.MainWindow).Content;
                        var profileConfigButton = grid.Children.OfType < System.Windows.Controls.Button > ().FirstOrDefault(btn => btn.Name == "btnProfileSettings");
                        if (profileConfigButton != null) return; profileConfigButton = new System.Windows.Controls.Button {
                            Name = "btnProfileSettings", HorizontalAlignment = System.Windows.HorizontalAlignment.Right, VerticalAlignment = System.Windows.VerticalAlignment.Bottom, Margin = new System.Windows.Thickness(0, 0, 8, 86), Content = "Suramar Config", Height = 20, Width = 120
                        }; grid.Children.Add(profileConfigButton); profileConfigButton.Click += (sender, args) => {
                            System.Windows.Application.Current.Dispatcher.BeginInvoke((Action)(() => {
                                if (_uiWindow != null) {
                                    _uiWindow.Close();
                                    _uiWindow = null;
                                }
                                //Settings.Instance.Load();
                                _uiWindow = UiWindow.GetWindow(); _uiWindow.Show(); _uiWindow.Closing += (o, eventArgs) => {
                                    Settings.Instance.Save();
                                };
                            }));
                        };
                    }));
                    Styx.CommonBot.BotEvents.OnBotStopped += args => {
                        System.Windows.Application.Current.Dispatcher.BeginInvoke((Action)(() => {
                            var grid = (System.Windows.Controls.Grid)((Honorbuddy.MainWindow) System.Windows.Application.Current.MainWindow).Content;
                            var profileConfigButton = grid.Children.OfType < System.Windows.Controls.Button > ().FirstOrDefault(btn => btn.Name == "btnProfileSettings"); grid.Children.Remove(profileConfigButton); _uiWindow.Close();
                        }));
                    };
                    Styx.CommonBot.TreeRoot.OnShutdownRequested += (sender, args) => {
                        System.Windows.Application.Current.Dispatcher.BeginInvoke((Action)(() => {
                            _uiWindow.Close();
                        }));
                    };
                }
                public static class UiWindow {
                    public static System.Windows.Window GetWindow() {
                        var window = new System.Windows.Window {
                            Title = "Zak: Suramar Settings",
                            SizeToContent = System.Windows.SizeToContent.WidthAndHeight,
                            ResizeMode = System.Windows.ResizeMode.NoResize,
                            DataContext = Settings.Instance
                        };
                        var grid = new System.Windows.Controls.StackPanel {
                        };
                        window.Content = grid;

                        var nameLabel = new System.Windows.Controls.Label {
                            HorizontalAlignment = System.Windows.HorizontalAlignment.Center,
                            Margin = new System.Windows.Thickness(0.0),
                            Padding = new System.Windows.Thickness(0.0),
                            FontWeight = System.Windows.FontWeights.Bold,
                            FontSize = 40.0,
                            Content = "Zakrn"
                        };
                        var subjectLbl = new System.Windows.Controls.Label {
                            HorizontalAlignment = System.Windows.HorizontalAlignment.Center,
                            Margin = new System.Windows.Thickness(0.0),
                            Padding = new System.Windows.Thickness(0.0),
                            FontSize = 20.0,
                            Content = "Suramar"
                        };
                        grid.Children.Add(nameLabel);
                        grid.Children.Add(subjectLbl);

                        var useAPItemCheckBox = new System.Windows.Controls.CheckBox {
                            HorizontalAlignment = System.Windows.HorizontalAlignment.Left,
                            Margin = new System.Windows.Thickness(12, 12, 12, 12),
                            Content = "Use Artifact Power Items"
                        };
                        grid.Children.Add(useAPItemCheckBox);
                        useAPItemCheckBox.SetBinding(System.Windows.Controls.CheckBox.IsCheckedProperty, new System.Windows.Data.Binding(nameof(Settings.Instance.UseArtifactPowerItems)) {
                            Source = Settings.Instance
                        });
                        return window;
                    }
                }


                bool ReadyToEmpowerArtifact()
                {
                    if( Me.IsCasting ) return false;
                    if( !Me.IsAlive ) return false;
                    if (!Settings.Instance.UseArtifactPowerItems) return false;
                    if (!Lua.GetReturnVal<bool>("return HasArtifactEquipped()", 0)) return false;
                    bool HaveItem = Me.BagItems.FirstOrDefault(x => x.ItemInfo.SubClassId.Equals(8) && x.GetEffect(0) != null && x.GetEffect(0).Spell.LocalizedName.Equals("Empowering")) != null;
                    return HaveItem;
                }
                async Task UseArtifactPowerItems()
                {
                    Logging.Write(System.Windows.Media.Colors.Yellow, "[Zak]: Using Artifact Boost Items.");
                    var artifactPowerItems = Me.BagItems.Where(x => x.ItemInfo.SubClassId.Equals(8) && x.GetEffect(0) != null && x.GetEffect(0).Spell.LocalizedName.Equals("Empowering"));
                    foreach (WoWItem useMe in artifactPowerItems)
                    {
                        await CommonCoroutines.StopMoving();
                        useMe.Use();
                        await Coroutine.Sleep(500);
                        await Coroutine.Wait(1600, () => !SpellManager.GlobalCooldown);
                        await Coroutine.Wait(2500, () => !Me.IsCasting);
                        await Coroutine.Yield();
                    }
                }
            ]]>
        </CustomBehavior>
        <CustomBehavior File="RunCode">
            <![CDATA[
                Initialize();
                string settingsLog = $"[Zak]: Settings Activated\n  Use Artifact Power Items :: {Settings.Instance.UseArtifactPowerItems}\n\nUse the 'Suramar Config' button above the bot's Stop/Start button to change these settings.\n";
                Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, settingsLog);
            ]]>
        </CustomBehavior>
        <!-- all credit to EchoTiger -->
        <!-- i adapted this code for the trex quest -->
        <CustomBehavior File="RunCode" Type="Definition">
            <![CDATA[

                    static double KILL_DIST = 30.0;

                    async Task VehicleMove(WoWPoint moveTo, bool allowCombat = true)
                    {
                        if (!StyxWoW.Me.InVehicle) return;
                        while (Me.Location.Distance(moveTo) >= 5)
                        {
                            WoWMovement.ClickToMove(moveTo);
                            if( allowCombat )
                            {
                                await CombatAwareness();
                            }

                            await Coroutine.Yield();
                        }
                    }

                    async Task VehicleCombat(WoWUnit vehicleKill)
                    {
                        if (!StyxWoW.Me.InVehicle) return;
                        if (vehicleKill.Distance > KILL_DIST) return;
                        if (Me.CurrentTarget != vehicleKill)
                        {
                            vehicleKill.Target();
                        }
                        await Coroutine.Sleep(150);
                        Styx.Helpers.KeyboardManager.KeyUpDown((char)System.Windows.Forms.Keys.D1);
                        //Styx.Helpers.KeyboardManager.KeyUpDown((char)System.Windows.Forms.Keys.D2);
                        //Styx.Helpers.KeyboardManager.KeyUpDown((char)System.Windows.Forms.Keys.D3);
                        //Styx.Helpers.KeyboardManager.KeyUpDown((char)System.Windows.Forms.Keys.D4);
                        await Coroutine.Sleep(1050);
                    }

                    async Task CombatAwareness()
                    {
                        if (!StyxWoW.Me.InVehicle) return;
                        var killArray = ObjectManager.GetObjectsOfType<WoWUnit>().Where(u => u.IsTargetingMeOrPet && u.Distance <= KILL_DIST);
                        if (killArray == null) return;

                        foreach (WoWUnit killMe in killArray)
                        {
                            while (killMe != null && killMe.IsTargetingMeOrPet && killMe.Distance <= KILL_DIST)
                            {
                                await CommonCoroutines.StopMoving();
                                StyxWoW.Me.SetFacing(killMe.Location);
                                await VehicleCombat(killMe);
                                await Coroutine.Yield();
                            }
                       }
                    }
                ]]>
        </CustomBehavior>
        <!-- arcwine mini event code, this was interesting to write :P  -->
        <CustomBehavior File="RunCode" Type="Definition">
            <![CDATA[
                async Task MakeWine() {
                    var margaux = Unit(112055);
                    while( margaux != null && margaux.HasAura(224237) ){
                        if( margaux.HasAura(217204) )
                        {
                            await AddPurifiedWater();
                        }
                        else if( margaux.HasAura(217205))
                        {
                            await AddNightLily();
                        }
                        else if( margaux.HasAura(217203))
                        {
                            await AddShadefruit();
                        }
                        else if( margaux.HasAura(217202))
                        {
                            await StompGrapes();
                        }
                        await Coroutine.Yield();
                    }
                }

                WoWObject GetObj( int objid)
                {
                    return ObjectManager.GetObjectsOfType<WoWGameObject>()
                        .OrderBy(ret => ret.Distance)
                        .FirstOrDefault(target =>
                            (int)target.Entry == objid );
                }

                async Task AddShadefruit()
                {
                    Logging.Write(System.Windows.Media.Colors.Yellow, "[Zak]: AddShadefruit");
                    await LeaveGrapes();
                    WoWObject fruit = GetObj(251493);
                    if( fruit != null )
                        fruit.Interact();
                    await Coroutine.Sleep(3000);
                    await Coroutine.Yield();
                }

                async Task AddNightLily()
                {
                    Logging.Write(System.Windows.Media.Colors.Yellow, "[Zak]: AddNightLily");
                    //this spell name doesnt match Silver Jasmine object
                    await LeaveGrapes();
                    WoWObject silverJasmine = GetObj(251494);
                    if( silverJasmine != null )
                        silverJasmine.Interact();
                    await Coroutine.Sleep(3000);
                    await Coroutine.Yield();
                }

                async Task AddPurifiedWater()
                {
                    Logging.Write(System.Windows.Media.Colors.Yellow, "[Zak]: AddPurifiedWater");
                    await LeaveGrapes();
                    WoWObject water = GetObj(251492);
                    if( water != null )
                        water.Interact();
                    await Coroutine.Sleep(3000);
                    await Coroutine.Yield();
                }

                async Task StompGrapes() {
                    Logging.Write(System.Windows.Media.Colors.Yellow, "[Zak]: StompGrapes");
                    await HopInGrapes();

                    var margaux = Unit(112055);
                    while( margaux != null && margaux.HasAura(224237) && margaux.HasAura(217202) )
                    {
                        Lua.DoString("JumpOrAscendStart()");
                        await Coroutine.Sleep(1000);
                        await Coroutine.Yield();
                    }
                }

                async Task LeaveGrapes() {
                    WoWPoint grapeGoto = new WoWPoint(1354.776,3297.472,132.8778);
                    while (Me.Location.Distance(grapeGoto) > 1)
                    {
                        WoWMovement.ClickToMove(grapeGoto);
                        await Coroutine.Yield();
                    }
                    await CommonCoroutines.StopMoving();
                }

                async Task HopInGrapes() {
                    await LeaveGrapes();
                    Me.SetFacing( new WoWPoint(1358.507,3294.529,133.5807) );
                    await Coroutine.Sleep(500);
                    Lua.DoString("MoveForwardStart()");
                    await Coroutine.Sleep(150);
                    Lua.DoString("JumpOrAscendStart()");
                    await Coroutine.Sleep(150);
                    Lua.DoString("MoveForwardStop()");
                }

            ]]>
        </CustomBehavior>
        <CustomBehavior File="RunCode" Type="Definition">
            <![CDATA[
                    long lastTrapTick = 0;
                    const uint SUBZONE_ID_SHAL_ARAN =           7928;
                    const uint SUBZONE_ID_STAR_CALLER_RETREAT = 8434;
                    const uint SUBZONE_ID_THE_WANING_CRESCENT = 8382;
                    const uint SUBZONE_ID_EVERMOON_TERRACE =    8487;
                    const uint SUBZONE_ID_EVERMOON_COMMONS =    7970;
                    const uint SUBZONE_ID_MOONLIT_LANDING =     8378;
                    const uint SUBZONE_ID_MIDNIGHT_COURT =      8380;

                    int StageNumber() {
                        if( Bots.DungeonBuddy.Helpers.ScenarioInfo.Current == null )
                            return 0;
                        return Bots.DungeonBuddy.Helpers.ScenarioInfo.Current.CurrentStageNumber;
                    }

                    long GetUnixTime()
                    {
                        return DateTimeOffset.Now.ToUnixTimeSeconds() * 1000;
                    }

                    bool ShouldUseTrap()
                    {
                        if( Me.IsActuallyInCombat && HasItem(133882) && (GetUnixTime() - lastTrapTick) >= 10000 )
                        {
                            lastTrapTick = GetUnixTime();
                            return true;
                        }
                        return false;
                    }

                    bool DoQuest(params uint[] questIds)
                    {
                        foreach (var questId in questIds)
                        {
                            if (HasQuest(questId) && !IsQuestCompleted(questId)) return true;
                        }
                        return false;
                    }
                    bool NeedsQuest(params uint[] questIds)
                    {
                        foreach (var questId in questIds)
                        {
                            if (!HasQuest(questId) && !IsQuestCompleted(questId)) return true;
                        }
                        return false;
                    }
                    bool NeedsBreadcrumbQuest(params uint[] questIds)
                    {
                        foreach (var questId in questIds)
                        {
                            if (IsQuestCompleted(questId)) return false;
                        }
                        return true;
                    }
                    bool QuestDone(params uint[] questIds)
                    {
                        foreach (var questId in questIds)
                        {
                            if (HasQuest(questId) && IsQuestCompleted(questId)) return true;
                        }
                        return false;
                    }

                    bool HasAncientMana( uint amount )
                    {
                        Logging.Write(System.Windows.Media.Colors.Yellow, "[Zak]: Checking if you have " + amount + " ancient mana");
                        return WoWCurrency.GetCurrencyById(1155) != null && WoWCurrency.GetCurrencyById(1155).Amount >= amount;
                    }

                    uint MaxAncientMana()
                    {
                        if( WoWCurrency.GetCurrencyById(1155) != null )
                        {
                            return WoWCurrency.GetCurrencyById(1155).TotalMax;
                        }
                        return 0;
                    }

                    async Task OldCastMask()
                    {
                        if( Me.ZoneId == 7637 && !Me.HasAura(202477) )
                        {
                            Lua.DoString("ExtraActionButton1:Click();");
                            await Coroutine.Sleep(1400);
                        }
                    }

                    bool IsThirsty( uint friendId )
                    {
                        List<string> values = Lua.GetReturnValues("return GetFriendshipReputation(" + friendId +")");

                        if( values.Count == 0 )
                        {
                            Logging.Write(System.Windows.Media.Colors.Red, "[Zak]: Failed to get arcane thirst");
                            return false;
                        }

                        int level = Int32.Parse( values[1]);
                        int threshold = Int32.Parse( values[7]);
                        int newlevel = level - threshold;

                        return newlevel <= 1;
                    }

                    bool IsThalyssraThirsty()
                    {
                        Logging.Write(System.Windows.Media.Colors.Yellow, "[Zak]: Checking if Thalyssra is thirsty");
                        return IsThirsty(1860);
                    }

                    bool IsOculethThirsty()
                    {
                        Logging.Write(System.Windows.Media.Colors.Yellow, "[Zak]: Checking if Oculeth is thirsty");
                        return IsThirsty(1862);
                    }

                    bool IsValtroisThirsty()
                    {
                        Logging.Write(System.Windows.Media.Colors.Yellow, "[Zak]: Checking if Valtrois is thirsty");
                        return IsThirsty(1919);
                    }

                    bool IsAtWorkshop()
                    {
                        Vector2 loc = new Vector2(1709.996f, 3914.844f);
                        return GetNearestWarp().Equals(loc);
                    }

                    bool IsAtGardens()
                    {
                        Vector2 loc = new Vector2(1975.996f, 3560.247f);
                        return GetNearestWarp().Equals(loc);
                    }

                    bool IsAtWarpLab()
                    {
                        Vector2 loc = new Vector2(1776.192f, 3763.838f);
                        return GetNearestWarp().Equals(loc);
                    }

                    bool IsAtFountain()
                    {
                        Vector2 loc = new Vector2(1800.066f, 3646.988f);
                        return GetNearestWarp().Equals(loc);
                    }

                    bool IsAtTelemetryLabs()
                    {
                        Vector2 loc = new Vector2(2083.047f, 3711.535f);
                        return GetNearestWarp().Equals(loc);
                    }



                    Vector2 GetNearestWarp()
                    {
                        Vector2 locWorkshop = new Vector2(1709.996f, 3914.844f);
                        Vector2 locGarden = new Vector2(1975.996f, 3560.247f);
                        Vector2 locWarpLab = new Vector2(1776.192f, 3763.838f);
                        Vector2 locFountain = new Vector2(1800.066f, 3646.988f);
                        Vector2 locTelemLab = new Vector2(2083.047f, 3711.535f);

                        Vector2[] warpLocations = { locWorkshop, locGarden, locWarpLab, locFountain, locTelemLab };

                        Vector2 loc = new Vector2( Me.Location.X, Me.Location.Y);
                        Vector2 res = locWorkshop;

                        double dist = 1000000.0;
                        foreach( var vec in warpLocations )
                        {
                            double d = CalcDist( vec, loc );
                            if( d < dist )
                            {
                                dist = d;
                                res = vec;
                            }
                        }

                        return res;
                    }

                    double CalcDist( Vector2 v1, Vector2 v2 )
                    {
                        double dx = v2.X - v1.X;
                        double dy =  v2.Y - v1.Y;
                        double r = Math.Pow( dx , 2) - Math.Pow( dy, 2);

                        if( r < 0 )
                            r *= -1;

                        return Math.Sqrt(  r );
                    }

                    double CalcDist2( Vector3 v1, Vector3 v2 )
                  {
                      return Vector3.Distance( v1, v2);
                    }

                    double DistFrom546()
                    {
                        Vector3 loc = new Vector3( 1021.413f, 3397.731f, 21.60876f );
                        return CalcDist2( Me.Location, loc );
                    }

                    double DistFrom253()
                    {
                        Vector2 loc = new Vector2( Me.Location.X, Me.Location.Y);
                        Vector2 res = new Vector2( 2949.458f, 4882.862f );

                        return CalcDist( loc, res );
                    }

                    double DistFromFelsoulHoldIsland()
                    {
                        Vector2 loc = new Vector2( Me.Location.X, Me.Location.Y);
                        Vector2 res = new Vector2( 1227.456f, 5144.128f );
                        return CalcDist( loc, res );
                    }

                    WoWItem GetBagItem(uint itemId )
                    {
                        return StyxWoW.Me.BagItems.FirstOrDefault(x => x.Entry == itemId);
                    }

                    bool HasItem(uint itemId)
                    {
                        return GetBagItem( itemId) != null;
                    }

                    bool ShouldCastMask()
                    {
                        return !Me.IsCasting && Me.IsAlive && IsInCity() && (!Me.HasAura(202477) && !Me.HasAura(208824));
                    }

                    async Task CastMask()
                    {
                        if( HasItem(136600) )
                        {
                            var item = GetBagItem(136600);
                            Logging.Write(System.Windows.Media.Colors.Yellow, "[Zak]: using " + item.Name);
                            item.Use();
                            await Coroutine.Sleep(2200);
                            await Coroutine.Wait(1600, () => !SpellManager.GlobalCooldown);
                            await Coroutine.Wait(2500, () => !Me.IsCasting);
                        }
                        else
                        {
                            Lua.DoString("ExtraActionButton1:Click();");
                        }
                        await Coroutine.Yield();
                    }

                    bool IsInCity()
                    {
                        return  Me.ZoneId == 7637 && //Suramar
                                (Me.SubZoneId == 7963 || //The Grand Promenade
                                Me.SubZoneId == 8021 || //Lunastre Estate
                                Me.SubZoneId == SUBZONE_ID_STAR_CALLER_RETREAT || //Starcaller Retreat
                                Me.SubZoneId == SUBZONE_ID_THE_WANING_CRESCENT || //The Waning Crescent
                                Me.SubZoneId == 8383 || //Artisan's Gallery
                                Me.SubZoneId == 8395 || //Astravar Harbor
                                Me.SubZoneId == 8385 || //Evermoon Bazaar
                                Me.SubZoneId == SUBZONE_ID_EVERMOON_COMMONS || //Evermoon Commons
                                Me.SubZoneId == 8386 || //Shimmershade Garden
                                Me.SubZoneId == 8398 || //Terrace of Order
                                Me.MinimapZoneText == "Estate of the First Arcanist" ||
                                Me.SubZoneId == 8149 || //Twilight Vineyards
                                Me.SubZoneId == 8353 || //Concourse of Destiny
                                Me.SubZoneId == 8397 || //Terrace of Enlightenment
                                Me.SubZoneId == 8441 || //Moonbeam Causeway
                                Me.SubZoneId == 8436 || //Sunset Park
                                Me.SubZoneId == 8351 || //The Menagerie
                                Me.SubZoneId == 8379 || //The Gilded Market
                                Me.SubZoneId == SUBZONE_ID_MOONLIT_LANDING || //Moonlit Landing
                                Me.SubZoneId == 8431 || //Sanctum of Order
                                Me.SubZoneId == SUBZONE_ID_EVERMOON_TERRACE ||
                                Me.SubZoneId == 8148);   //Suramar City
                    }

                    void PrintStep( params uint[] steps )
                    {
                        string strsteps = "[Zak]: step - ";

                        foreach (var step in steps)
                        {
                            strsteps += step + " ";
                        }
                        Logging.Write(System.Windows.Media.Colors.DeepSkyBlue, strsteps);
                    }

                    async Task SkipCutscene(int preWait = 3000, int postWait = 3000)
                    {
                // Add detection of cutscene here.
                        await Coroutine.Sleep(preWait);
                // Test and improve the working method.
                        Lua.DoString("MovieFrame:StopMovie(); CinematicFrame_CancelCinematic(); StopCinematic();");
                        await Coroutine.Sleep(postWait);
                    }
                    bool CanPurgeGuardian()
                    {
                        WoWItem item = StyxWoW.Me.BagItems.FirstOrDefault(x => x.Entry == 131760);
                        return item.CooldownTimeLeft == TimeSpan.Zero &&
                               Me.CurrentTarget.Entry == 99859 &&
                               Me.CurrentTarget.IsHostile &&
                               Me.CurrentTarget.HealthPercent <= 45.0;
                    }
                    bool UseInertCrystal()
                    {
                        //203027 - volatile
                        WoWItem item = Me.CarriedItems.FirstOrDefault(i => i.Entry == 133999);

                        WoWUnit obj = ObjectManager.GetObjectsOfType<WoWUnit>()
                            .OrderBy(ret => ret.Distance)
                            .FirstOrDefault(target =>
                                target.Distance <= 40 &&
                                target.IsAlive &&
                                !target.HasAura(203027) &&
                                (int)target.Entry == 102242 );

                        if( obj != null && item != null && item.Cooldown <= 0)
                        {
                            obj.Target();
                            item.UseContainerItem();
                            return true;
                        }
                        return false;
                    }
                    bool IsAtleastHonored()
                    {
                        return (int)Me.GetReputationLevelWith(1859) >= 5;
                    }
                    bool IsAtleastRevered()
                    {
                        return (int)Me.GetReputationLevelWith(1859) >= 6;
                    }
                    int NightfallenRepAmt()
                    {
                        return (int)Me.GetReputationWith(1859);
                    }
                ]]>
        </CustomBehavior>
        <CustomBehavior File="Hooks\DoWhen" LogExecution="false" AllowExecutionWhileNotAlive="false" ActivityName="UseArtifactBoostItems" UseWhen="ReadyToEmpowerArtifact()">
            <CustomBehavior File="RunCode" Code="await UseArtifactPowerItems()" />
        </CustomBehavior>
        <CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[Zak]: Zygor - Suramar Steps 6 - X&quot;);" />
        <CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[Zak]: ZoneId: &quot; + Me.ZoneId);" />
        <CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[Zak]: MaxMana: &quot; + (HasQuest(40745) &amp;&amp; (!IsObjectiveComplete(1,40745) || !IsObjectiveComplete(2,40745))));" />
        <!-- <CustomBehavior File="Hooks\Avoid" AvoidName="ettins" ObjectId="99791" ObjectId1="99792" Radius="15" /> -->
        <!-- 2 -->
        <If Condition="HasQuest(39985) || NeedsQuest(39986)">
            <CustomBehavior File="RunCode" Code="PrintStep(2)" />
            <TurnIn Nav="Fly" QuestName="Khadgar's Discovery" QuestId="39985" TurnInName="Archmage Khadgar" TurnInId="90417" X="-847.2126" Y="4632.287" Z="749.6396" />
            <PickUp Nav="Fly" QuestName="Magic Message" QuestId="39986" GiverName="Archmage Khadgar" GiverId="90417" X="-847.2126" Y="4632.287" Z="749.6396" />
        </If>
        <!-- 3 -->
        <While Condition="DoQuest(39986)">
            <CustomBehavior File="RunCode" Code="PrintStep(3)" />
            <CustomBehavior File="InteractWith" MobId="98266" TerminateWhen="IsQuestCompleted(39986)">
                <HuntingGrounds>
                    <Hotspot X="-849.5762" Y="4635.687" Z="749.6167" />
                </HuntingGrounds>
            </CustomBehavior>
            <CustomBehavior File="WaitTimer" WaitTime="35000" />
        </While>
        <!-- 4 -->
        <If Condition="HasQuest(39986) || NeedsQuest(39987)">
            <CustomBehavior File="RunCode" Code="PrintStep(4)" />
            <TurnIn Nav="Fly" QuestName="Magic Message" QuestId="39986" TurnInName="Archmage Khadgar" TurnInId="90417" X="-849.5762" Y="4635.687" Z="749.6167" />
            <PickUp Nav="Fly" QuestName="Trail of Echoes" QuestId="39987" GiverName="Archmage Khadgar" GiverId="90417" X="-849.5762" Y="4635.687" Z="749.6167" />
        </If>
        <!-- 5 -->
        <If Condition="DoQuest(39987) &amp;&amp; !IsObjectiveComplete(1,39987)">
            <CustomBehavior File="RunCode" Code="PrintStep(5)" />
            <CustomBehavior File="InteractWith" MobId="244874" NumOfTimes="1">
                <HuntingGrounds>
                    <Hotspot X="-849.5762" Y="4635.687" Z="749.6167" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 6 -->
        <If Condition="DoQuest(39987) &amp;&amp; !IsObjectiveComplete(1,39987)">
            <CustomBehavior File="RunCode" Code="PrintStep(6)" />
            <MoveTo X="1477.748" Y="4454.989" Z="122.9368" />
            <CustomBehavior File="UseItem" ItemId="131931" NumOfTimes="1" QuestId="39987" />
            <CustomBehavior File="WaitTimer" WaitTime="1000" />
            <CustomBehavior File="InteractWith" MobId="100169" NumOfTimes="1" X="1473.278" Y="4454.528" Z="123.1219" />
        </If>
        <!-- 7 -->
        <If Condition="DoQuest(39987) &amp;&amp; !IsObjectiveComplete(2,39987)">
            <CustomBehavior File="RunCode" Code="PrintStep(7)" />
            <Moveto X="1387.089" Y="4460.118" Z="118.9767" />
            <CustomBehavior File="UseItem" ItemId="131931" NumOfTimes="1" QuestId="39987" />
            <CustomBehavior File="WaitTimer" WaitTime="1000" />
            <CustomBehavior File="InteractWith" MobId="114070" NumOfTimes="1" X="1383.076" Y="4461.465" Z="119.8451" />
        </If>
        <!-- 8 -->
        <If Condition="DoQuest(39987) &amp;&amp; !IsObjectiveComplete(3,39987)">
            <CustomBehavior File="RunCode" Code="PrintStep(8)" />
            <Moveto X="1408.567" Y="4662.902" Z="128.4541" />
            <CustomBehavior File="UseItem" ItemId="131931" NumOfTimes="1" QuestId="39987" />
            <CustomBehavior File="WaitTimer" WaitTime="1000" />
            <CustomBehavior File="InteractWith" MobId="114071" NumOfTimes="1" X="1407.948" Y="4666.297" Z="129.3392" />
        </If>
        <!-- 9 -->
        <If Condition="DoQuest(39987) &amp;&amp; !IsObjectiveComplete(4,39987)">
            <CustomBehavior File="RunCode" Code="PrintStep(9)" />
            <CustomBehavior File="KillUntilComplete" MobIds="99213" QuestId="39987" TerminateWhen="IsObjectiveComplete(4,39987)">
                <HuntingGrounds>
                    <Hotspot X="1392.763" Y="4680.307" Z="129.8595" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 10 -->
        <!-- move to -->
        <!-- 11 -->
        <If Condition="HasQuest(39987) || NeedsQuest(40008)">
            <CustomBehavior File="RunCode" Code="PrintStep(11)" />
            <TurnIn Nav="Fly" QuestName="Trail of Echoes" QuestId="39987" TurnInName="First Arcanist Thalyssra" TurnInId="98312" X="1466.848" Y="4735.929" Z="142.6775" />
            <PickUp Nav="Fly" QuestName="The Only Way Out is Through" QuestId="40008" GiverName="First Arcanist Thalyssra" GiverId="98312" X="1466.848" Y="4735.929" Z="142.6775" />
        </If>
        <!-- 12 -->
        <If Condition="DoQuest(40008)">
            <CustomBehavior File="RunCode" Code="PrintStep(12)" />
            <CustomBehavior File="EscortGroup" QuestId="40008" EscortNpcId="98312" PriorityTargetId="98946" EscortMaxFollowDistance="4" EscortMaxFightDistance="50" />
        </If>
        <!-- 13 -->
        <If Condition="HasQuest(40008) || NeedsQuest(40123)">
            <CustomBehavior File="RunCode" Code="PrintStep(13)" />
            <TurnIn Nav="Fly" QuestName="The Only Way Out is Through" QuestId="40008" TurnInName="First Arcanist Thalyssra" TurnInId="98312" X="1689.113" Y="4700.26" Z="137.3754" />
            <PickUp Nav="Fly" QuestName="The Nightborne Pact" QuestId="40123" GiverName="First Arcanist Thalyssra" GiverId="98312" X="1689.113" Y="4700.26" Z="137.3754" />
        </If>
        <!-- 14 -->
        <If Condition="DoQuest(40123) &amp;&amp; !IsObjectiveComplete(1,40123)">
            <CustomBehavior File="RunCode" Code="PrintStep(14)" />
            <CustomBehavior File="WaitTimer" WaitTime="1000" />
            <CustomBehavior File="InteractWith" MobId="99482" NumOfTimes="1" X="1692.679" Y="4697.824" Z="136.1255" />
            <!-- movie -->
            <CustomBehavior File="WaitTimer" WaitTime="140000" />
        </If>
        <!-- 15 -->
        <If Condition="HasQuest(40123) || NeedsQuest(40009)">
            <CustomBehavior File="RunCode" Code="PrintStep(15)" />
            <TurnIn Nav="Fly" QuestName="The Nightborne Pact" QuestId="40123" TurnInName="First Arcanist Thalyssra" TurnInId="98312" X="1689.113" Y="4700.26" Z="137.3754" />
            <PickUp Nav="Fly" QuestName="Arcane Thirst" QuestId="40009" GiverName="First Arcanist Thalyssra" GiverId="98312" X="1689.113" Y="4700.26" Z="137.3754" />
        </If>
        <!-- 16 -->
        <!-- move to -->
        <!-- 17 -->
        <If Condition="DoQuest(40009)">
            <CustomBehavior File="RunCode" Code="PrintStep(17)" />
            <CustomBehavior File="KillUntilComplete" TerminateWhen="IsObjectiveComplete(2,40009)" X="1719.844" Y="4618.831" Z="123.9465">
                <PursuitList>
                    <PursueUnit Id="99524" Priority="600" />
                    <PursueUnit Id="99088" Priority="-2000" />
                    <PursueUnit Id="99539" Priority="9000" />
                </PursuitList>
            </CustomBehavior>
        </If>
        <!-- 18 -->
        <If Condition="DoQuest(40009)">
            <CustomBehavior File="RunCode" Code="PrintStep(18)" />
            <CustomBehavior File="InteractWith" TerminateWhen="IsObjectiveComplete(3,40009)" MobId="245126" NumOfTimes="500" CollectionDistance="500" InteractBlacklistTimeInSeconds="30" X="1723.295" Y="4604.747" Z="123.795" />
        </If>
        <!-- 19 -->
        <If Condition="HasQuest(40009) || NeedsQuest(42229)">
            <CustomBehavior File="RunCode" Code="PrintStep(19)" />
            <TurnIn Nav="Fly" QuestName="Arcane Thirst" QuestId="40009" TurnInName="First Arcanist Thalyssra" TurnInId="98312" />
            <PickUp Nav="Fly" QuestName="Shal'Aran" QuestId="42229" GiverName="First Arcanist Thalyssra" GiverId="98312" X="1723.295" Y="4604.747" Z="123.795" />
        </If>
        <!-- 20 -->
        <If Condition="DoQuest(42229)">
            <CustomBehavior File="RunCode" Code="PrintStep(20)" />
            <CustomBehavior File="Escort" QuestId="42229" MobId="111863" />
        </If>
        <!-- 21 -->
        <If Condition="HasQuest(42229) || NeedsQuest(44672,40011,40012)">
            <CustomBehavior File="RunCode" Code="PrintStep(21)" />
            <TurnIn Nav="Fly" QuestName="Shal'Aran" QuestId="42229" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1711.635" Y="4630.024" Z="124.0054" />
            <PickUp Nav="Fly" QuestName="Ancient Mana" QuestId="44672" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1711.635" Y="4630.024" Z="124.0054" />
            <PickUp Nav="Fly" QuestName="Oculeth's Workshop" QuestId="40011" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1711.635" Y="4630.024" Z="124.0054" />
            <PickUp Nav="Fly" QuestName="An Old Ally" QuestId="40012" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1711.635" Y="4630.024" Z="124.0054" />
        </If>
        <!-- 22 -->
        <!-- grab flight point -->
        <!-- 23 -->
        <If Condition="DoQuest(44672)">
            <CustomBehavior File="RunCode" Code="PrintStep(23)" />
            <CustomBehavior File="InteractWith" MobIds="252408, 252772, 252774, 260248, 260249" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1,44672)">
                <HuntingGrounds>
                    <Hotspot X="1604.467" Y="4739.134" Z="138.7215" />
                    <Hotspot X="1512.893" Y="4702.402" Z="148.0298" />
                    <Hotspot X="1626.951" Y="4815.862" Z="138.6257" />
                    <Hotspot X="1485.744" Y="4667.769" Z="140.9432" />
                    <Hotspot X="1393.388" Y="4692.751" Z="130.5269" />
                    <Hotspot X="1629.369" Y="4788.426" Z="138.3129" />
                    <Hotspot X="1806.211" Y="4934.246" Z="125.2439" />
                    <Hotspot X="1941.515" Y="4956.957" Z="121.3221" />
                    <Hotspot X="1330.276" Y="4723.805" Z="136.7535" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 24 -->
        <If Condition="HasQuest(44672)">
            <CustomBehavior File="RunCode" Code="PrintStep(24)" />
            <TurnIn Nav="Fly" QuestName="Ancient Mana" QuestId="44672" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1711.635" Y="4630.024" Z="124.0054" />
        </If>
        <!-- 25 -->
        <!-- set hearthstone -->
        <!-- 26 -->
        <If Condition="HasQuest(40012) || NeedsQuest(40326)">
            <CustomBehavior File="RunCode" Code="PrintStep(26)" />
            <TurnIn Nav="Fly" QuestName="An Old Ally" QuestId="40012" TurnInName="Enchanted Scroll" TurnInId="245328" X="1976.673" Y="4977.586" Z="120.9949" />
            <PickUp Nav="Fly" QuestName="Scattered Memories" QuestId="40326" GiverName="Enchanted Scroll" GiverId="245328" X="1976.673" Y="4977.586" Z="120.9949" />
        </If>
        <!-- 27 -->
        <If Condition="NeedsQuest(41149)">
            <CustomBehavior File="RunCode" Code="PrintStep(27)" />
            <PickUp Nav="Fly" QuestName="A Re-Warding Effort" QuestId="41149" GiverName="Arcane Ward" GiverId="109022" X="1962.298" Y="4959.978" Z="121.2815" />
        </If>
        <!-- 28 - 35-->
        <If Condition="DoQuest(41149) || DoQuest(40326)">
            <CustomBehavior File="RunCode" Code="PrintStep(28, 29, 30, 31, 32, 33, 34, 35)" />
            <CustomBehavior File="InteractWith" TerminateWhen="IsQuestCompleted(41149) &amp;&amp; IsQuestCompleted(40326)" NumOfTimes="500" CollectionDistance="1000">
                <PursuitList>
                    <PursueGameObject Id="245327" PursueWhen="!IsQuestCompleted(40326)" />
                    <PursueUnit Id="100059" PursueWhen="!IsQuestCompleted(41149)" />
                </PursuitList>
                <HuntingGrounds>
                    <Hotspot X="1967.151" Y="5027.482" Z="115.0973" />
                    <Hotspot X="2005.399" Y="5086.385" Z="109.0091" />
                    <Hotspot X="1966.288" Y="5255.816" Z="88.84992" />
                    <Hotspot X="1820.268" Y="5265.718" Z="71.68943" />
                    <Hotspot X="1799.513" Y="5398.516" Z="62.57012" />
                    <Hotspot X="1669.055" Y="5338.962" Z="63.9075" />
                    <Hotspot X="1773.753" Y="5195.098" Z="72.35218" />
                    <Hotspot X="1815.287" Y="5095.594" Z="91.71936" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 36 -->
        <If Condition="HasQuest(41149)">
            <CustomBehavior File="RunCode" Code="PrintStep(36)" />
            <TurnIn Nav="Fly" QuestName="A Re-Warding Effort" QuestId="41149" TurnInName="Kel'danath's Knapsack" TurnInId="247694" />
        </If>
        <!-- 37 - 39 -->
        <If Condition="HasQuest(40326) || NeedsQuest(41702)">
            <CustomBehavior File="RunCode" Code="PrintStep(37, 38, 39)" />
            <TurnIn Nav="Fly" QuestName="Scattered Memories" QuestId="40326" TurnInName="Kel'danath's Knapsack" TurnInId="247694" X="1509.796" Y="5495.391" Z="73.87749" />
            <PickUp Nav="Fly" QuestName="Written in Stone" QuestId="41702" GiverName="Kel'danath's Knapsack" GiverId="247694" X="1509.796" Y="5495.391" Z="73.87749" />
        </If>
        <!-- 40 -->
        <If Condition="DoQuest(41702)">
            <CustomBehavior File="RunCode" Code="PrintStep(40)" />
            <CustomBehavior File="KillUntilComplete" TerminateWhen="IsObjectiveComplete(1,41702)" MobId="100058" X="1381.62" Y="5536.221" Z="82.79152" />
        </If>
        <!-- 41 -->
        <If Condition="HasQuest(41702) || NeedsQuest(41704)">
            <CustomBehavior File="RunCode" Code="PrintStep(41)" />
            <TurnIn Nav="Fly" QuestName="Written in Stone" QuestId="41702" TurnInName="Theryn" TurnInId="104618" X="1400.383" Y="5512.052" Z="80.03493" />
            <PickUp Nav="Fly" QuestName="Subject 16" QuestId="41704" GiverName="Theryn" GiverId="104618" X="1400.383" Y="5512.052" Z="80.03493" />
        </If>
        <!-- 42 -->
        <If Condition="NeedsQuest(42396)">
            <CustomBehavior File="RunCode" Code="PrintStep(42)" />
            <PickUp Nav="Fly" QuestName="Do The Thing!" QuestId="42396" GiverName="Pearlhunter Phin" GiverId="107302" X="1406.303" Y="5775.441" Z="0.7108223" />
        </If>
        <!-- 43 -->
        <If Condition="DoQuest(42396)">
            <CustomBehavior File="RunCode" Code="PrintStep(43)" />
            <CustomBehavior File="InteractWith" MobIds="250288" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1,42396)">
                <HuntingGrounds>
                    <Hotspot X="1406.303" Y="5775.441" Z="0.7108223" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 44 -->
        <If Condition="HasQuest(42396) || NeedsQuest(42688)">
            <CustomBehavior File="RunCode" Code="PrintStep(44)" />
            <TurnIn Nav="Fly" QuestName="Do The Thing!" QuestId="42396" TurnInName="Pearlhunter Phin" TurnInId="107302" X="1406.303" Y="5775.441" Z="0.7108223" />
            <PickUp Nav="Fly" QuestName="Mrgls of Endearment" QuestId="42688" GiverName="Pearlhunter Phin" GiverId="107302" X="1406.303" Y="5775.441" Z="0.7108223" />
        </If>
        <!-- 45 -->
        <If Condition="DoQuest(42688)">
            <CustomBehavior File="RunCode" Code="PrintStep(45)" />
            <CustomBehavior File="KillUntilComplete" MobIds="109803" QuestId="42688" TerminateWhen="IsObjectiveComplete(1,42688)">
                <HuntingGrounds>
                    <Hotspot X="1405.806" Y="5756.202" Z="0.07338497" />
                    <Hotspot X="1345.431" Y="5670.458" Z="-2.43085" />
                    <Hotspot X="1215.929" Y="5601.481" Z="0.3475015" />
                    <Hotspot X="1241.919" Y="5658.396" Z="-2.964715" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 46 -->
        <If Condition="DoQuest(42688)">
            <CustomBehavior File="RunCode" Code="PrintStep(46)" />
            <CustomBehavior File="InteractWith" QuestId="42688" NumOfTimes="1" MobId="107302">
                <HuntingGrounds>
                    <Hotspot X="1503.19" Y="5812.916" Z="4.580419" />
                </HuntingGrounds>
            </CustomBehavior>
            <CustomBehavior File="RunCode">
                <![CDATA[
                    List<string> values = Lua.GetReturnValues("return GetNumGossipOptions()");
                    int idx = Int32.Parse(values[0]);
                    Logging.Write(System.Windows.Media.Colors.Yellow, "[Zak]: Sand option is: " + idx );
                    Lua.DoString("SelectGossipOption(" + idx + ")");
                ]]>
            </CustomBehavior>
        </If>
        <!-- 47 -->
        <If Condition="HasQuest(42688)">
            <CustomBehavior File="RunCode" Code="PrintStep(47)" />
            <TurnIn Nav="Fly" QuestName="Mrgls of Endearment" QuestId="42688" TurnInName="Pearlhunter Phin" TurnInId="107302" X="1504.785" Y="5811.515" Z="4.897935" />
            <CustomBehavior File="WaitTimer" WaitTime="40000" />
        </If>
        <!-- 48 -->
        <If Condition="NeedsQuest(42728)">
            <CustomBehavior File="RunCode" Code="PrintStep(48)" />
            <PickUp Nav="Fly" QuestName="A Mlrglrmg For Grlmrgl" QuestId="42728" GiverName="Pearlhunter Phin" GiverId="107302" X="1504.785" Y="5811.515" Z="4.897935" />
        </If>
        <!-- 49 -->
        <If Condition="DoQuest(42728)">
            <CustomBehavior File="RunCode" Code="PrintStep(49)" />
            <CustomBehavior File="InteractWith" QuestId="42728" TerminateWhen="IsObjectiveComplete(1,42728)" NumOfTimes="500" MobId="251334">
                <HuntingGrounds>
                    <Hotspot X="1665.745" Y="5975.03" Z="1.35959" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 50 -->
        <If Condition="HasQuest(42728) || NeedsQuest(41143)">
            <CustomBehavior File="RunCode" Code="PrintStep(50)" />
            <TurnIn Nav="Fly" QuestName="A Mlrglrmg For Grlmrgl" QuestId="42728" TurnInName="Mrgrlilgrl" TurnInId="108389" X="1525.099" Y="5813.416" Z="7.205919" />
            <PickUp Nav="Fly" QuestName="Mglrgrs Of Our Grmlgrlr" QuestId="41143" GiverName="Mrgrlilgrl" GiverId="108389" X="1525.099" Y="5813.416" Z="7.205919" />
        </If>
        <!-- 51 -->
        <If Condition="DoQuest(41143)">
            <CustomBehavior File="RunCode" Code="PrintStep(51)" />
            <Moveto X="1655.382" Y="5660.761" Z="47.88466" />
            <CustomBehavior File="WaitTimer" WaitTime="30000" TerminateWhen="IsObjectiveComplete(1,41143)" />
            <!-- wait for them to run off -->
            <CustomBehavior File="WaitTimer" WaitTime="30000" />
        </If>
        <!-- 52 -->
        <If Condition="HasQuest(41143)">
            <CustomBehavior File="RunCode" Code="PrintStep(52)" />
            <TurnIn Nav="Fly" QuestName="Mglrgrs Of Our Grmlgrlr" QuestId="41143" TurnInName="Mr. Mrglglrm" TurnInId="108390" X="1525.099" Y="5813.416" Z="7.205919" />
        </If>
        <!-- 53 -->
        <If Condition="NeedsQuest(40796)">
            <CustomBehavior File="RunCode" Code="PrintStep(53)" />
            <PickUp Nav="Fly" QuestName="Lingering on the Edge" QuestId="40796" GiverName="Absolon" GiverId="101848" X="1676.512" Y="4975.398" Z="127.9706" />
        </If>
        <!-- 54 -->
        <If Condition="DoQuest(40796) &amp;&amp; !HasAncientMana(100)">
            <CustomBehavior File="RunCode" Code="PrintStep(54)" />
            <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 100)" />
            <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
        </If>
        <!-- 55 -->
        <If Condition="HasQuest(40796)">
            <CustomBehavior File="RunCode" Code="PrintStep(55)" />
            <TurnIn Nav="Fly" QuestName="Lingering on the Edge" QuestId="40796" TurnInName="Absolon" TurnInId="101848" X="1676.512" Y="4975.398" Z="127.9706" />
        </If>
        <!-- 56 - 57 -->
        <If Condition="HasQuest(41704) || NeedsQuest(41760)">
            <CustomBehavior File="RunCode" Code="PrintStep(56,57)" />
            <TurnIn Nav="Fly" QuestName="Subject 16" QuestId="41704" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1707.489" Y="4630.308" Z="124.0054" />
            <PickUp Nav="Fly" QuestName="Kel'danath's Legacy" QuestId="41760" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1707.489" Y="4630.308" Z="124.0054" />
        </If>
        <!-- 58 -->
        <If Condition="DoQuest(41760)">
            <CustomBehavior File="RunCode" Code="PrintStep(58)" />
            <CustomBehavior File="Hooks\DoWhen" ActivityName="PurgeMob" AllowUseDuringCombat="true" LogExecution="true" UseAtInterval="2500">
                <CustomBehavior File="RunCode">
                    <![CDATA[
                        if (Me.CurrentTarget != null)
                        {
                            Lua.DoString("ExtraActionButton1:Click();");
                            await Coroutine.Sleep(3000);
                            SpellManager.ClickRemoteLocation(Me.CurrentTarget.Location);
                        }

                    ]]>
                </CustomBehavior>
            </CustomBehavior>
            <CustomBehavior File="KillUntilComplete" TerminateWhen="IsObjectiveComplete(1,41760)" MobId="98555">
                <HuntingGrounds>
                    <Hotspot X="1551.905" Y="4664.612" Z="148.0817" />
                    <Hotspot X="1502.666" Y="4731.902" Z="143.8503" />
                    <Hotspot X="1373.847" Y="4692.781" Z="129.6458" />
                </HuntingGrounds>
                <AvoidMobs>
                    <Mob Name="Moonlight Hunter" Id="99749" />
                    <Mob Name="Meredil Thrashmaw" Id="113190" />
                </AvoidMobs>
            </CustomBehavior>
            <CustomBehavior File="Hooks\DoWhen" ActivityName="PurgeMob" Command="Remove" />
        </If>
        <!-- 59 -->
        <If Condition="HasQuest(41760) || NeedsQuest(41762)">
            <CustomBehavior File="RunCode" Code="PrintStep(59)" />
            <TurnIn Nav="Fly" QuestName="Kel'danath's Legacy" QuestId="41760" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1707.489" Y="4630.308" Z="124.0054" />
            <PickUp Nav="Fly" QuestName="Sympathizers Among the Shal'dorei" QuestId="41762" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1707.489" Y="4630.308" Z="124.0054" />
        </If>
        <!-- 60 -->
        <If Condition="DoQuest(40011)">
            <CustomBehavior File="RunCode" Code="PrintStep(60)" />
            <MoveTo X="1679.904" Y="3929.66" Z="170.2346" />
            <CustomBehavior File="ForcedDismount" />
            <MoveTo X="1665.214" Y="3921.889" Z="170.2346" />
            <!-- wait for cooldown on ability -->
            <CustomBehavior File="WaitTimer" WaitTime="17000" />
            <CustomBehavior File="Misc\RunLua" Lua="ExtraActionButton1:Click();" />
            <!-- wait for npc to talk -->
            <CustomBehavior File="WaitTimer" WaitTime="25000" />
        </If>
        <!-- 61 -->
        <If Condition="HasQuest(40011) || NeedsQuest(40747)">
            <CustomBehavior File="RunCode" Code="PrintStep(61)" />
            <TurnIn Nav="Fly" QuestName="Oculeth's Workshop" QuestId="40011" TurnInName="Chief Telemancer Oculeth" TurnInId="101499" X="1664.109" Y="3899.859" Z="168.1633" />
            <PickUp Nav="Fly" QuestName="The Delicate Art of Telemancy" QuestId="40747" GiverName="Chief Telemancer Oculeth" GiverId="101499" X="1664.109" Y="3899.859" Z="168.1633" />
        </If>
        <UseMount Value="false" />
        <!-- 62 -->
        <!-- workshop to gardens -->
        <If Condition="DoQuest(40747) &amp;&amp; !IsObjectiveComplete(1,40747)">
            <CustomBehavior File="RunCode" Code="PrintStep(62)" />
            <CustomBehavior File="InteractWith" MobId="245925" NumOfTimes="1" X="1714.095" Y="3904.475" Z="167.9921" />
            <MoveTo X="1709.767" Y="3915.335" Z="167.9709" />
        </If>
        <!-- 63 -->
        <!-- gardens to warplab -->
        <If Condition="DoQuest(40747) &amp;&amp; IsObjectiveComplete(1,40747) &amp;&amp; !IsObjectiveComplete(3,40747) &amp;&amp; IsAtGardens()">
            <CustomBehavior File="RunCode" Code="PrintStep(63)" />
            <CustomBehavior File="InteractWith" MobId="245927" NumOfTimes="1" X="1964.78" Y="3559.214" Z="362.8636" />
            <Moveto X="1976.355" Y="3560.497" Z="363.0712" />
        </If>
        <!-- 64 -->
        <If Condition="DoQuest(40747) &amp;&amp; IsObjectiveComplete(1,40747) &amp;&amp; !IsObjectiveComplete(3,40747) &amp;&amp; IsAtWarpLab()">
            <CustomBehavior File="RunCode" Code="PrintStep(64)" />
            <CustomBehavior File="InteractWith" MobId="246229" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="1711.833" Y="3706.787" Z="261.2419" />
        </If>
        <!-- 65 -->
        <!-- warplab to workshop -->
        <If Condition="DoQuest(40747) &amp;&amp; IsObjectiveComplete(1,40747) &amp;&amp; IsObjectiveComplete(3,40747) &amp;&amp; !IsObjectiveComplete(2,40747) &amp;&amp; IsAtWarpLab()">
            <CustomBehavior File="RunCode" Code="PrintStep(65)" />
            <CustomBehavior File="InteractWith" MobId="245928" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="1787.05" Y="3763.933" Z="268.6244" />
            <Moveto X="1776.192" Y="3763.838" Z="268.8917" />
        </If>
        <!-- 66 -->
        <!-- workshop to gardens -->
        <If Condition="DoQuest(40747) &amp;&amp; IsObjectiveComplete(1,40747) &amp;&amp; IsObjectiveComplete(3,40747) &amp;&amp; !IsObjectiveComplete(2,40747) &amp;&amp; IsAtWorkshop()">
            <CustomBehavior File="RunCode" Code="PrintStep(66)" />
            <CustomBehavior File="InteractWith" MobId="245925" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="1714.095" Y="3904.475" Z="167.9921" />
            <MoveTo X="1709.767" Y="3915.335" Z="167.9709" />
        </If>
        <!-- 67 -->
        <!-- gardens to fountain -->
        <If Condition="DoQuest(40747) &amp;&amp; IsObjectiveComplete(1,40747) &amp;&amp; IsObjectiveComplete(3,40747) &amp;&amp; !IsObjectiveComplete(2,40747) &amp;&amp; IsAtGardens()">
            <CustomBehavior File="RunCode" Code="PrintStep(67)" />
            <CustomBehavior File="InteractWith" MobId="245954" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="1987.021" Y="3560.165" Z="362.8521" />
            <Moveto X="1976.355" Y="3560.497" Z="363.0712" />
        </If>
        <!-- 68 -->
        <!-- fountain to telemetry lab -->
        <If Condition="DoQuest(40747) &amp;&amp; IsObjectiveComplete(1,40747) &amp;&amp; IsObjectiveComplete(3,40747) &amp;&amp; !IsObjectiveComplete(2,40747) &amp;&amp; IsAtFountain()">
            <CustomBehavior File="RunCode" Code="PrintStep(68)" />
            <CustomBehavior File="InteractWith" MobId="245947" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="1810.194" Y="3641.862" Z="303.9812" />
            <MoveTo X="1800.066" Y="3646.988" Z="304.2827" />
            <!-- tweak this loc -->
        </If>
        <!-- 69 -->
        <If Condition="DoQuest(40747) &amp;&amp; IsObjectiveComplete(1,40747) &amp;&amp; IsObjectiveComplete(3,40747) &amp;&amp; !IsObjectiveComplete(2,40747) &amp;&amp; IsAtTelemetryLabs()">
            <CustomBehavior File="RunCode" Code="PrintStep(69)" />
            <CustomBehavior File="InteractWith" MobId="246225" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="2149.879" Y="3777.373" Z="462.5777" />
        </If>
        <!-- 70 -->
        <!-- telemetry lab to fountain -->
        <If Condition="QuestDone(40747) &amp;&amp; IsAtTelemetryLabs()">
            <CustomBehavior File="RunCode" Code="PrintStep(70)" />
            <CustomBehavior File="InteractWith" MobId="245950" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="2072.113" Y="3715.378" Z="454.1997" />
            <MoveTo X="2083.047" Y="3711.535" Z="454.3508" />
        </If>
        <!-- 71 -->
        <!-- fountain to garden -->
        <If Condition="QuestDone(40747) &amp;&amp; IsAtFountain()">
            <CustomBehavior File="RunCode" Code="PrintStep(71)" />
            <CustomBehavior File="InteractWith" MobId="245942" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="1792.744" Y="3650.518" Z="304.0344" />
            <MoveTo X="1800.066" Y="3646.988" Z="304.2827" />
        </If>
        <!-- 72 -->
        <!-- garden to library -->
        <If Condition="QuestDone(40747) &amp;&amp; IsAtGardens()">
            <CustomBehavior File="RunCode" Code="PrintStep(72)" />
            <CustomBehavior File="InteractWith" MobId="245926" NumOfTimes="1" X="1976.157" Y="3551.508" Z="362.6873" />
            <Moveto X="1976.355" Y="3560.497" Z="363.0712" />
            <!-- wait to leave -->
            <CustomBehavior File="WaitTimer" WaitTime="20000" />
        </If>
        <UseMount Value="true" />
        <!-- 73 -->
        <If Condition="HasQuest(40747) || NeedsQuest(40748)">
            <CustomBehavior File="RunCode" Code="PrintStep(73)" />
            <TurnIn Nav="Fly" QuestName="The Delicate Art of Telemancy" QuestId="40747" TurnInName="Chief Telemancer Oculeth" TurnInId="101499" X="1705.067" Y="3921.113" Z="167.8172" />
            <PickUp Nav="Fly" QuestName="Network Security" QuestId="40748" GiverName="Chief Telemancer Oculeth" GiverId="101499" X="1705.067" Y="3921.113" Z="167.8172" />
        </If>
        <!-- 74 -->
        <!-- workshop to gardens -->
        <If Condition="DoQuest(40748) &amp;&amp; !IsObjectiveComplete(1,40748) &amp;&amp; IsAtWorkshop()">
            <CustomBehavior File="RunCode" Code="PrintStep(74)" />
            <CustomBehavior File="InteractWith" MobId="246237" NumOfTimes="1" X="1709.767" Y="3915.335" Z="167.9709" />
            <MoveTo X="1709.767" Y="3915.335" Z="167.9709" />
        </If>
        <!-- 75 -->
        <!-- workshop to gardens -->
        <If Condition="DoQuest(40748) &amp;&amp; !IsObjectiveComplete(2,40748)">
            <CustomBehavior File="RunCode" Code="PrintStep(75)" />
            <CustomBehavior File="InteractWith" MobId="246328" NumOfTimes="1" X="2192.561" Y="3346.08" Z="249.1024" />
        </If>
        <!-- 76 - 79 -->
        <!-- workshop to gardens -->
        <If Condition="DoQuest(40748) &amp;&amp; !IsObjectiveComplete(3,40748)">
            <CustomBehavior File="RunCode" Code="PrintStep(76,77,78,79)" />
            <CustomBehavior File="InteractWith" MobId="246297" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(3,40748)">
                <HuntingGrounds>
                    <Hotspot X="2173.717" Y="3442.407" Z="221.7803" />
                    <Hotspot X="2183.721" Y="3478.244" Z="221.7803" />
                    <Hotspot X="2165.494" Y="3487.724" Z="221.7803" />
                </HuntingGrounds>
            </CustomBehavior>
            <!-- wait to leave -->
            <CustomBehavior File="WaitTimer" WaitTime="30000" />
        </If>
        <!-- 80 -->
        <If Condition="DoQuest(40748) &amp;&amp; !IsObjectiveComplete(4,40748)">
            <CustomBehavior File="RunCode" Code="PrintStep(80)" />
            <CustomBehavior File="KillUntilComplete" MobIds="101116" QuestId="40748" TerminateWhen="IsObjectiveComplete(4,40748)">
                <HuntingGrounds>
                    <Hotspot X="2328.63" Y="3546.813" Z="564.2925" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 81 -->
        <If Condition="DoQuest(40748) &amp;&amp; !IsObjectiveComplete(5,40748)">
            <CustomBehavior File="RunCode" Code="PrintStep(81)" />
            <CustomBehavior File="InteractWith" MobId="101782" NumOfTimes="1" InteractByGossipOptions="1" X="2326.536" Y="3546.114" Z="564.374" />
            <!-- wait to leave -->
            <CustomBehavior File="WaitTimer" WaitTime="10000" />
        </If>
        <!-- 82 -->
        <If Condition="HasQuest(40748) || NeedsQuest(40830)">
            <CustomBehavior File="RunCode" Code="PrintStep(82)" />
            <TurnIn Nav="Fly" QuestName="Network Security" QuestId="40748" TurnInName="Chief Telemancer Oculeth" TurnInId="102142" X="1636.75" Y="4755.82" Z="138.8127" />
            <PickUp Nav="Fly" QuestName="Close Enough" QuestId="40830" GiverName="Chief Telemancer Oculeth" GiverId="102142" X="1636.75" Y="4755.82" Z="138.8127" />
        </If>
        <!-- 83 -->
        <If Condition="DoQuest(40830) &amp;&amp; !IsObjectiveComplete(1,40830)">
            <CustomBehavior File="RunCode" Code="PrintStep(83)" />
            <CustomBehavior File="InteractWith" MobId="102017" NumOfTimes="1" X="1640.475" Y="4746.829" Z="138.2304" />
        </If>
        <!-- 84 -->
        <If Condition="DoQuest(40830) &amp;&amp; !IsObjectiveComplete(1,40830)">
            <CustomBehavior File="RunCode" Code="PrintStep(84)" />
            <MoveTo X="1706.335" Y="4634.648" Z="124.2806" />
        </If>
        <!-- 85 -->
        <If Condition="DoQuest(40830) &amp;&amp; !IsObjectiveComplete(2,40830)">
            <CustomBehavior File="RunCode" Code="PrintStep(85)" />
            <CustomBehavior File="RunCode" Code="Styx.Helpers.KeyboardManager.KeyUpDown((char)System.Windows.Forms.Keys.D1);" />
        </If>
        <!-- 86 -->
        <If Condition="HasQuest(40830) || NeedsQuest(44691)">
            <CustomBehavior File="RunCode" Code="PrintStep(86)" />
            <TurnIn Nav="Fly" QuestName="Close Enough" QuestId="40830" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1706.171" Y="4635.102" Z="124.2671" />
            <PickUp Nav="Fly" QuestName="Hungry Work" QuestId="44691" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1706.171" Y="4635.102" Z="124.2671" />
        </If>
        <!-- 87 -->
        <If Condition="DoQuest(44691)">
            <CustomBehavior File="RunCode" Code="PrintStep(87)" />
            <If Condition="!HasAncientMana(50)">
                <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 50)" />
                <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
            </If>
            <CustomBehavior File="InteractWith" MobId="98548" X="1707.512" Y="4628.36" Z="124.0053" />
            <CustomBehavior File="RunMacro" Macro="/click GossipTitleButton1" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
        </If>
        <!-- 88 -->
        <If Condition="HasQuest(44691) || NeedsQuest(40956)">
            <CustomBehavior File="RunCode" Code="PrintStep(88)" />
            <TurnIn Nav="Fly" QuestName="Hungry Work" QuestId="44691" TurnInName="Chief Telemancer Oculeth" TurnInId="98548" X="1706.202" Y="4630.045" Z="124.0053" />
            <PickUp Nav="Fly" QuestName="Survey Says..." QuestId="40956" GiverName="Chief Telemancer Oculeth" GiverId="98548" X="1706.202" Y="4630.045" Z="124.0053" />
        </If>
        <!-- 89 -->
        <If Condition="DoQuest(40956)">
            <CustomBehavior File="RunCode" Code="PrintStep(89)" />
            <MoveTo X="1702.409" Y="4650.169" Z="170.0954" />
            <CustomBehavior File="Hooks\DoWhen" ActivityName="survey" AllowUseDuringCombat="true" LogExecution="true" UseAtInterval="4000">
                <CustomBehavior File="UseItem" ItemId="133897" QuestId="40956" />
            </CustomBehavior>
            <CustomBehavior File="UseItem" ItemId="133897" QuestId="40956" />
            <CustomBehavior File="KillUntilComplete" MobIds="106808, 106690, 106810" QuestId="40956" TerminateWhen="IsObjectiveComplete(1,40956)">
                <HuntingGrounds>
                    <Hotspot X="1708.357" Y="4642.355" Z="170.0808" />
                </HuntingGrounds>
            </CustomBehavior>
            <CustomBehavior File="Hooks\DoWhen" ActivityName="survey" Command="Remove" />
        </If>
        <!-- 90 - 91 -->
        <If Condition="QuestDone(40956)">
            <CustomBehavior File="RunCode" Code="PrintStep(90,01)" />
            <TurnIn Nav="Fly" QuestName="Survey Says..." QuestId="40956" TurnInName="Place Telemancy Beacon" TurnInId="246713" />
            <CustomBehavior File="InteractWith" MobId="260260" NumOfTimes="1" X="1703.401" Y="4651.938" Z="170.0116" />
        </If>
        <!-- 92 -->
        <If Condition="NeedsQuest(40010)">
            <CustomBehavior File="RunCode" Code="PrintStep(92)" />
            <PickUp Nav="Fly" QuestName="Tapping the Leylines" QuestId="40010" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1707.338" Y="4630.285" Z="124.0054" />
        </If>
        <!-- 93 -->
        <If Condition="DoQuest(40010) &amp;&amp; !IsObjectiveComplete(1, 40010)">
            <CustomBehavior File="RunCode" Code="PrintStep(93)" />
            <CustomBehavior File="InteractWith" MobId="254129" WaitTime="3000" X="1783.168" Y="4640.48" Z="124.789" />
        </If>
        <!-- 94 -->
        <!-- move to -->
        <!-- 95 -->
        <If Condition="NeedsQuest(43809)">
            <CustomBehavior File="RunCode" Code="PrintStep(95)" />
            <PickUp Nav="Fly" QuestName="Tel'anor'eporter Online!" QuestId="43809" GiverName="Unpowered Telemancy Beacon" GiverId="252817" X="2139.617" Y="4323.337" Z="258.0854" />
        </If>
        <!-- 96  -->
        <If Condition="DoQuest(43809)  &amp;&amp; !HasAncientMana(100)">
            <CustomBehavior File="RunCode" Code="PrintStep(96)" />
            <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 100)" />
            <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
        </If>
        <!-- 97 -->
        <If Condition="QuestDone(43809) &amp;&amp; HasAncientMana(100)">
            <CustomBehavior File="RunCode" Code="PrintStep(97)" />
            <TurnIn Nav="Fly" QuestName="Tel'anor'eporter Online!" QuestId="43809" TurnInName="Unpowered Telemancy Beacon" TurnInId="252817" X="2139.617" Y="4323.337" Z="258.0854" />
        </If>
        <!-- 98 -->
        <If Condition="DoQuest(40010) &amp;&amp; !IsObjectiveComplete(2, 40010)">
            <CustomBehavior File="RunCode" Code="PrintStep(98)" />
            <MoveTo X="2011.139" Y="4350.546" Z="164.8867" />
        </If>
        <!-- 99 -->
        <If Condition="NeedsQuest(40368)">
            <CustomBehavior File="RunCode" Code="PrintStep(99)" />
            <PickUp Nav="Fly" QuestName="Turtle Powered" QuestId="40368" GiverName="Morhun Rivertamer" GiverId="99788" X="1901.087" Y="4250.872" Z="192.39" />
        </If>
        <!-- 100 -->
        <While Condition="DoQuest(40368)">
            <CustomBehavior File="RunCode" Code="PrintStep(100)" />
            <CustomBehavior File="KillUntilComplete" MobIds="113125" QuestId="40368" TerminateWhen="IsQuestCompleted(40368)">
                <HuntingGrounds>
                    <Hotspot X="2149.204" Y="4533.311" Z="168.2968" />
                    <Hotspot X="2223.377" Y="4434.439" Z="168.2103" />
                    <Hotspot X="1988.07" Y="4391.601" Z="158.8909" />
                    <Hotspot X="1978.225" Y="4659.908" Z="167.506" />
                </HuntingGrounds>
            </CustomBehavior>
        </While>
        <!-- 101 -->
        <If Condition="HasQuest(40368) || NeedsQuest(40348,40370)">
            <CustomBehavior File="RunCode" Code="PrintStep(101)" />
            <TurnIn Nav="Fly" QuestName="Turtle Powered" QuestId="40368" TurnInName="Morhun Rivertamer" TurnInId="99788" X="1903.078" Y="4258.906" Z="192.6073" />
            <PickUp Nav="Fly" QuestName="Something in the Water" QuestId="40348" GiverName="Morhun Rivertamer" GiverId="99788" X="1903.078" Y="4258.906" Z="192.6073" />
            <PickUp Nav="Fly" QuestName="Purge the Unclean" QuestId="40370" GiverName="Morhun Rivertamer" GiverId="99788" X="1903.078" Y="4258.906" Z="192.6073" />
        </If>
        <!-- 102 -->
        <If Condition="DoQuest(40348)">
            <CustomBehavior File="RunCode" Code="PrintStep(102)" />
            <CustomBehavior File="KillUntilComplete" TerminateWhen="IsObjectiveComplete(1,40348)" MobId="99789">
                <HuntingGrounds>
                    <Hotspot X="1914.462" Y="4226.851" Z="186.6151" />
                    <Hotspot X="1828.023" Y="4107.956" Z="187.2927" />
                    <Hotspot X="1814.273" Y="4029.974" Z="222.6178" />
                    <Hotspot X="2050.366" Y="4064.027" Z="219.4372" />
                    <Hotspot X="2011.812" Y="4226.075" Z="219.4522" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 103 -->
        <!-- this quest is oddly hard to script for me for some reason!? -->
        <If Condition="DoQuest(40370)">
            <CustomBehavior File="RunCode" Code="PrintStep(103)" />
            <UseMount Value="false" />
            <CustomBehavior File="ForcedDismount" />
            <MoveTo X="2071.089" Y="4045.228" Z="219.4364" />
            <CustomBehavior File="Hooks\DoWhen" LogExecution="false" AllowUseDuringCombat="true" AllowExecutionWhileNotAlive="false" ActivityName="PurgeGuardian" UseWhen="CanPurgeGuardian()">
                <CustomBehavior File="UseItemTargetLocation" ItemId="131760" MobId1="99859" NumOfTimes="1" />
                <CustomBehavior File="WaitTimer" WaitTime="1800" />
            </CustomBehavior>
            <CustomBehavior File="RunCode" Code="PrintStep(1031)" />
            <CustomBehavior File="KillUntilComplete" QuestId="40370" MobId="99882">
                <HuntingGrounds>
                    <Hotspot X="2090.174" Y="4024.964" Z="219.4874" />
                </HuntingGrounds>
            </CustomBehavior>
            <CustomBehavior File="RunCode" Code="PrintStep(1032)" />
            <CustomBehavior File="Hooks\DoWhen" ActivityName="PurgeGuardian" Command="Remove" />
            <UseMount Value="true" />
        </If>
        <!-- 104 -->
        <If Condition="HasQuest(40348) || HasQuest(40370)">
            <CustomBehavior File="RunCode" Code="PrintStep(104)" />
            <TurnIn Nav="Fly" QuestName="Something in the Water" QuestId="40348" TurnInName="Morhun Rivertamer" TurnInId="99788" X="1904.124" Y="4246.788" Z="191.628" />
            <TurnIn Nav="Fly" QuestName="Purge the Unclean" QuestId="40370" TurnInName="Morhun Rivertamer" TurnInId="99788" X="1904.124" Y="4246.788" Z="191.628" />
        </If>
        <!-- 105 -->
        <If Condition="DoQuest(40010)">
            <CustomBehavior File="RunCode" Code="PrintStep(105)" />
            <CustomBehavior File="InteractWith" MobId="102600" InteractByGossipOptions="1" WaitTime="3000" X="2000.038" Y="4349.769" Z="163.9751" />
            <CustomBehavior File="WaitTimer" WaitTime="30000" />
        </If>
        <!-- 106 -->
        <If Condition="HasQuest(40010) || NeedsQuest(41028)">
            <CustomBehavior File="RunCode" Code="PrintStep(106)" />
            <TurnIn Nav="Fly" QuestName="Tapping the Leylines" QuestId="40010" TurnInName="Arcanist Valtrois" TurnInId="102600" X="2013.488" Y="4252.934" Z="166.4541" />
            <PickUp Nav="Fly" QuestName="Power Grid" QuestId="41028" GiverName="Arcanist Valtrois" GiverId="102600" X="2013.488" Y="4252.934" Z="166.4541" />
        </If>
        <!-- 107 -->
        <If Condition="DoQuest(41028) &amp;&amp; !IsObjectiveComplete(1,41028)">
            <CustomBehavior File="RunCode" Code="PrintStep(107)" />
            <CustomBehavior File="InteractWith" MobId="246762" X="1941.441" Y="4172.089" Z="166.9342" />
        </If>
        <!-- 108 -->
        <If Condition="DoQuest(41028) &amp;&amp; !IsObjectiveComplete(1,41028)">
            <CustomBehavior File="RunCode" Code="PrintStep(108)" />
            <CustomBehavior File="InteractWith" MobId="246886" X="1968.484" Y="4196.602" Z="168.0005" />
        </If>
        <!-- 109 -->
        <If Condition="DoQuest(41028) &amp;&amp; !IsObjectiveComplete(2,41028)">
            <CustomBehavior File="RunCode" Code="PrintStep(109)" />
            <CustomBehavior File="InteractWith" MobId="246759" X="1958.444" Y="4193.181" Z="166.7697" />
        </If>
        <!-- 110 -->
        <If Condition="DoQuest(41028) &amp;&amp; !IsObjectiveComplete(2,41028)">
            <CustomBehavior File="RunCode" Code="PrintStep(110)" />
            <CustomBehavior File="InteractWith" MobId="246758" X="1898.625" Y="4111.471" Z="168.2814" />
        </If>
        <!-- 111 -->
        <If Condition="DoQuest(41028) &amp;&amp; !IsObjectiveComplete(2,41028)">
            <CustomBehavior File="RunCode" Code="PrintStep(111)" />
            <CustomBehavior File="InteractWith" MobId="246833" X="1948.363" Y="4165.92" Z="167.0708" />
        </If>
        <!-- 112 -->
        <If Condition="DoQuest(41028) &amp;&amp; !IsObjectiveComplete(2,41028)">
            <CustomBehavior File="RunCode" Code="PrintStep(112)" />
            <CustomBehavior File="InteractWith" MobId="246913" X="1971.538" Y="4163.739" Z="168.8583" />
        </If>
        <!-- 113 -->
        <If Condition="DoQuest(41028) &amp;&amp; !IsObjectiveComplete(3,41028)">
            <CustomBehavior File="RunCode" Code="PrintStep(113)" />
            <CustomBehavior File="InteractWith" MobId="246757" X="2009.842" Y="4244.258" Z="166.6262" />
        </If>
        <!-- 114 -->
        <If Condition="DoQuest(41028) &amp;&amp; !IsObjectiveComplete(3,41028)">
            <CustomBehavior File="RunCode" Code="PrintStep(114)" />
            <CustomBehavior File="InteractWith" MobId="246833" X="1948.363" Y="4165.92" Z="167.0708" />
        </If>
        <!-- 115 -->
        <If Condition="DoQuest(41028) &amp;&amp; !IsObjectiveComplete(3,41028)">
            <CustomBehavior File="RunCode" Code="PrintStep(115)" />
            <CustomBehavior File="InteractWith" MobId="246914" X="1938.649" Y="4160.887" Z="168.6007" />
        </If>
        <!-- 116 -->
        <If Condition="DoQuest(41028) &amp;&amp; !IsObjectiveComplete(4,41028)">
            <CustomBehavior File="RunCode" Code="PrintStep(116)" />
            <CustomBehavior File="InteractWith" MobId="246758" X="1898.625" Y="4111.471" Z="168.2814" />
        </If>
        <!-- 117 -->
        <If Condition="DoQuest(41028) &amp;&amp; !IsObjectiveComplete(4,41028)">
            <CustomBehavior File="RunCode" Code="PrintStep(117)" />
            <CustomBehavior File="InteractWith" MobId="246761" X="1966.53" Y="4186.626" Z="167.0288" />
        </If>
        <!-- 118 -->
        <If Condition="DoQuest(41028) &amp;&amp; !IsObjectiveComplete(4,41028)">
            <CustomBehavior File="RunCode" Code="PrintStep(118)" />
            <CustomBehavior File="InteractWith" MobId="246762" X="1941.441" Y="4172.089" Z="166.9342" />
        </If>
        <!-- 119 -->
        <If Condition="DoQuest(41028) &amp;&amp; !IsObjectiveComplete(4,41028)">
            <CustomBehavior File="RunCode" Code="PrintStep(119)" />
            <CustomBehavior File="InteractWith" MobId="246916" X="1935.738" Y="4193.576" Z="168.0016" />
        </If>
        <!-- 120 -->
        <If Condition="HasQuest(41028)">
            <CustomBehavior File="RunCode" Code="PrintStep(120)" />
            <TurnIn Nav="Fly" QuestName="Power Grid" QuestId="41028" TurnInName="Arcanist Valtrois" TurnInId="102600" X="2013.488" Y="4252.934" Z="166.4541" />
        </If>
        <!-- 121 -->
        <If Condition="NeedsQuest(41138)">
            <CustomBehavior File="RunCode" Code="PrintStep(121)" />
            <CustomBehavior File="WaitTimer" WaitTime="40000" />
            <PickUp QuestName="Feeding Shal'Aran" QuestId="41138" GiverName="Arcanist Valtrois" GiverId="102600" X="1712.013" Y="4633.702" Z="124.0061" />
        </If>
        <!-- 122 -->
        <While Condition="DoQuest(41138)">
            <CustomBehavior File="RunCode" Code="PrintStep(122)" />
            <CustomBehavior File="Escort" QuestId="41138" MobId="102600" />
        </While>
        <!-- pre-harvest 100 mana -->
        <If Condition="!IsQuestCompleted(43811)  &amp;&amp; !HasAncientMana(200)">
            <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 200)" />
            <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
        </If>
        <!-- 123 -->
        <If Condition="HasQuest(41138)">
            <CustomBehavior File="RunCode" Code="PrintStep(123)" />
            <TurnIn Nav="Fly" QuestName="Feeding Shal'Aran" QuestId="41138" TurnInName="Arcanist Valtrois" TurnInId="103155" X="1710.873" Y="4632.39" Z="124.0058" />
        </If>
        <!-- 124 -->
        <If Condition="DoQuest(41762) &amp;&amp; !HasItem(136600)">
            <CustomBehavior File="RunCode" Code="PrintStep(124)" />
            <CustomBehavior File="InteractWith" MobId="104998" InteractByGossipOptions="1,1" X="811.715" Y="4485.904" Z="130.1234" />
            <CustomBehavior File="WaitTimer" WaitTime="30000" />
        </If>
        <!-- 125 -->
        <If Condition="HasQuest(41762) || NeedsQuest(41834)">
            <CustomBehavior File="RunCode" Code="PrintStep(125)" />
            <TurnIn Nav="Fly" QuestName="Sympathizers Among the Shal'dorei" QuestId="41762" TurnInName="Silgryn" TurnInId="105071" X="823.4247" Y="4429.39" Z="114.7488" />
            <PickUp Nav="Fly" QuestName="The Masks We Wear" QuestId="41834" GiverName="Silgryn" GiverId="105071" X="823.4247" Y="4429.39" Z="114.7488" />
        </If>
        <!-- 126 -->
        <If Condition="DoQuest(41834) &amp;&amp; !HasItem(136600)">
            <CustomBehavior File="RunCode" Code="PrintStep(126)" />
            <CustomBehavior File="InteractWith" MobId="249021" X="765.7309" Y="4419.362" Z="123.4398" />
        </If>
        <CustomBehavior File="Hooks\DoWhen" UseWhen="ShouldCastMask()" ActivityName="applyMask" StopMovingToConductActivity="true" AllowUseWhileMounted="true">
            <CustomBehavior File="RunCode" Code="await CastMask()" />
        </CustomBehavior>
        <!-- 127, 128 -->
        <While Condition="DoQuest(41834) &amp;&amp; !IsObjectiveComplete(3,41834) &amp;&amp; HasItem(136600)">
            <CustomBehavior File="RunCode" Code="PrintStep(127,128)" />
            <CustomBehavior File="Hooks\Avoid" AvoidName="High Mage of the Duskwatch" ObjectId="105759" Radius="20" />
            <CustomBehavior File="InteractWith" QuestId="41834" TerminateWhen="IsObjectiveComplete(3,41834)" InteractByGossipOptions="1" NumOfTimes="500" MobId="105351" AttemptCountMax="2" InteractBlacklistTimeInSeconds="1000">
                <HuntingGrounds>
                    <Hotspot X="726.0839" Y="4339.292" Z="137.4211" />
                    <Hotspot X="696.7408" Y="4283.497" Z="135.9123" />
                    <Hotspot X="713.7027" Y="4358.816" Z="141.1253" />
                    <Hotspot X="578.7675" Y="4283.235" Z="132.8907" />
                </HuntingGrounds>
            </CustomBehavior>
            <CustomBehavior File="Hooks\Avoid" AvoidName="High Mage of the Duskwatch" Command="Remove" />
        </While>
        <!-- 129 -->
        <If Condition="DoQuest(41834) &amp;&amp; HasItem(136600)">
            <CustomBehavior File="RunCode" Code="PrintStep(129)" />
            <CustomBehavior File="InteractWith" MobId="105342" InteractByGossipOptions="1" X="527.9258" Y="4251.841" Z="132.9018" />
        </If>
        <CustomBehavior File="Hooks\DoWhen" ActivityName="applyMask" Command="Remove" />
        <!-- 130 -->
        <If Condition="HasQuest(41834) || NeedsQuest(41989)">
            <CustomBehavior File="RunCode" Code="PrintStep(130)" />
            <TurnIn Nav="Fly" QuestName="The Masks We Wear" QuestId="41834" TurnInName="Ly'leth Lunastre" TurnInId="105342" X="527.9258" Y="4251.841" Z="132.9018" />
            <PickUp Nav="Fly" QuestName="Blood of My Blood" QuestId="41989" GiverName="Ly'leth Lunastre" GiverId="105342" X="527.9258" Y="4251.841" Z="132.9018" />
        </If>
        <!-- 131 -->
        <If Condition="NeedsQuest(43811)">
            <CustomBehavior File="RunCode" Code="PrintStep(131)" />
            <PickUp Nav="Fly" QuestName="Lunastre Estate Teleporter Online!" QuestId="43811" GiverName="Unpowered Telemancy Beacon" GiverId="252815" X="514.3519" Y="4235.66" Z="134.396" />
        </If>
        <!-- 132 -->
        <!-- ??? -->
        <!-- 133 -->
        <If Condition="QuestDone(43811) &amp;&amp; HasAncientMana(100)">
            <CustomBehavior File="RunCode" Code="PrintStep(133)" />
            <TurnIn Nav="Fly" QuestName="Lunastre Estate Teleporter Online!" QuestId="43811" TurnInName="Unpowered Telemancy Beacon" TurnInId="252815" X="514.271" Y="4235.872" Z="134.3963" />
        </If>
        <!-- 134 -->
        <If Condition="DoQuest(41989) &amp;&amp; !IsObjectiveComplete(1,41989)">
            <CustomBehavior File="RunCode" Code="PrintStep(134)" />
            <CustomBehavior File="InteractWith" MobId="249697" X="530.8055" Y="4322.458" Z="133.1402" />
        </If>
        <!-- 135 -->
        <If Condition="DoQuest(41989) &amp;&amp; !IsObjectiveComplete(2,41989)">
            <CustomBehavior File="RunCode" Code="PrintStep(135)" />
            <If Condition="Me.IsHorde">
                <CustomBehavior File="KillUntilComplete" MobIds="106239" QuestId="41989" QuestObjectiveIndex="2" X="532.6307" Y="4316.902" Z="132.9876" />
            </If>
            <If Condition="Me.IsAlliance">
                <CustomBehavior File="KillUntilComplete" MobIds="106173" QuestId="41989" QuestObjectiveIndex="2" X="532.6307" Y="4316.902" Z="132.9876" />
            </If>
        </If>
        <!-- 136 -->
        <If Condition="DoQuest(41989) &amp;&amp; !IsObjectiveComplete(3,41989)">
            <CustomBehavior File="RunCode" Code="PrintStep(136)" />
            <If Condition="Me.IsHorde">
                <CustomBehavior File="InteractWith" MobIds="106239, 106173" InteractByGossipOptions="1" X="532.6307" Y="4316.902" Z="132.9876" />
            </If>
            <If Condition="Me.IsAlliance">
                <CustomBehavior File="InteractWith" MobId="106173" InteractByGossipOptions="1" X="532.6307" Y="4316.902" Z="132.9876" />
            </If>
        </If>
        <!-- 137 -->
        <If Condition="DoQuest(41989)">
            <CustomBehavior File="RunCode" Code="PrintStep(137)" />
            <MoveTo X="528.2828" Y="4252.315" Z="132.902" />
            <CustomBehavior File="WaitTimer" WaitTime="30000" />
        </If>
        <!-- 138 -->
        <If Condition="HasQuest(41989) || NeedsQuest(42079)">
            <CustomBehavior File="RunCode" Code="PrintStep(138)" />
            <TurnIn Nav="Fly" QuestName="Blood of My Blood" QuestId="41989" TurnInName="Ly'leth Lunastre" TurnInId="105342" X="527.9258" Y="4251.841" Z="132.9018" />
            <PickUp Nav="Fly" QuestName="Masquerade" QuestId="42079" GiverName="Ly'leth Lunastre" GiverId="105342" X="527.9258" Y="4251.841" Z="132.9018" />
        </If>
        <!-- 139 -->
        <If Condition="DoQuest(42079)">
            <CustomBehavior File="RunCode" Code="PrintStep(139)" />
            <If Condition="Me.IsHorde">
                <CustomBehavior File="InteractWith" MobIds="106418,106420" InteractByUsingItemId="136970" NumOfTimes="1" QuestId="42079" />
            </If>
            <If Condition="Me.IsAlliance">
                <CustomBehavior File="InteractWith" MobId="106420" InteractByUsingItemId="136970" NumOfTimes="1" QuestId="42079" />
            </If>
        </If>
        <!-- steps changed here at some point -->
        <!-- 139 -->
        <If Condition="HasQuest(42079) || NeedsQuest(42147)">
            <CustomBehavior File="RunCode" Code="PrintStep(139)" />
            <TurnIn Nav="Fly" QuestName="Masquerade" QuestId="42079" TurnInName="Ly'leth Lunastre" TurnInId="105342" X="527.9258" Y="4251.841" Z="132.9018" />
            <PickUp Nav="Fly" QuestName="First Contact" QuestId="42147" GiverName="Ly'leth Lunastre" GiverId="105342" X="527.9258" Y="4251.841" Z="132.9018" />
        </If>
        <!-- 141 -->
        <CustomBehavior File="Hooks\DoWhen" LogExecution="true" AllowExecutionWhileNotAlive="false" ActivityName="apply_mask" UseWhen="ShouldCastMask()" StopMovingToConductActivity="true" AllowUseWhileMounted="true">
            <CustomBehavior File="RunCode" Code="await CastMask()" />
        </CustomBehavior>
        <!-- 142 -->
        <If Condition="DoQuest(42147)">
            <CustomBehavior File="RunCode" Code="PrintStep(142)" />
            <CustomBehavior File="Hooks\Avoid" AvoidName="MaskDetectors" ObjectIds="105759, 99755" Radius="20" />
            <CustomBehavior File="InteractWith" MobId="106495" InteractByGossipOptions="1" X="1216.248" Y="4280.907" Z="113.0716" />
            <CustomBehavior File="Hooks\Avoid" AvoidName="MaskDetectors" Command="Remove" />
        </If>
        <!-- 143 -->
        <If Condition="!IsQuestCompleted(43813)">
            <CustomBehavior File="RunCode" Code="PrintStep(143)" />
            <MoveTo X="1141.0" Y="4184.000" Z="95.60146" />
        </If>
        <PickUp Nav="Fly" QuestName="Sanctum of Order Teleporter Online!" QuestId="43813" GiverName="Unpowered Telemancy Beacon" GiverId="252816" X="1201.466" Y="4248.837" Z="12.72329" />
        <!-- 144 -->
        <If Condition="DoQuest(43813)  &amp;&amp; !HasAncientMana(100)">
            <CustomBehavior File="RunCode" Code="PrintStep(144)" />
            <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 100)" />
            <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
        </If>
        <!-- 145 -->
        <If Condition="QuestDone(43813) &amp;&amp; HasAncientMana(100)">
            <CustomBehavior File="RunCode" Code="PrintStep(145)" />
            <TurnIn Nav="Fly" QuestName="Sanctum of Order Teleporter Online!" QuestId="43813" TurnInName="Unpowered Telemancy Beacon" TurnInId="252816" X="1201.466" Y="4248.837" Z="12.72329" />
        </If>
        <!-- 146 -->
        <If Condition="Me.SubZoneId == 8431 &amp;&amp; IsQuestCompleted(43813) &amp;&amp; QuestDone(42147)">
            <CustomBehavior File="RunCode" Code="PrintStep(146)" />
            <CustomBehavior File="InteractWith" MobId="260265" X="1204.069" Y="4248.17" Z="13.96463" />
        </If>
        <!-- 147 -->
        <!-- check if he is thirsty and unlock if we have mana, otherwise go get some -->
        <If Condition="QuestDone(42147) &amp;&amp; IsThalyssraThirsty()">
            <CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.Yellow, &quot;Thirsty&quot;);" />
            <If Condition="!HasAncientMana(50)">
                <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 100)" />
                <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
            </If>
            <CustomBehavior File="InteractWith" MobId="97140" X="1737.871" Y="4600.824" Z="96.28322" />
            <CustomBehavior File="RunMacro" Macro="/click GossipTitleButton1" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
        </If>
        <If Condition="HasQuest(42147) || NeedsQuest(40324)">
            <CustomBehavior File="RunCode" Code="PrintStep(147)" />
            <TurnIn Nav="Fly" QuestName="First Contact" QuestId="42147" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1737.87" Y="4600.397" Z="96.3101" />
            <PickUp Nav="Fly" QuestName="Arcane Communion" QuestId="40324" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1737.87" Y="4600.397" Z="96.3101" />
        </If>
        <!-- 148 -->
        <If Condition="DoQuest(40324) &amp;&amp; !HasAncientMana(300)">
            <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 300)" />
            <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
        </If>
        <If Condition="HasQuest(40324) &amp;&amp; HasAncientMana(300)">
            <CustomBehavior File="RunCode" Code="PrintStep(148)" />
            <CustomBehavior File="InteractWith" MobId="104618" InteractByGossipOptions="1" X="1731.88" Y="4596.162" Z="96.28315" />
        </If>
        <!-- 149 -->
        <If Condition="HasQuest(40324) || NeedsQuest(40325)">
            <CustomBehavior File="RunCode" Code="PrintStep(149)" />
            <TurnIn Nav="Fly" QuestName="Arcane Communion" QuestId="40324" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1737.87" Y="4600.397" Z="96.3101" />
            <PickUp Nav="Fly" QuestName="Scenes from a Memory" QuestId="40325" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1737.87" Y="4600.397" Z="96.3101" />
        </If>
        <!-- 148 -->
        <If Condition="DoQuest(40325)">
            <CustomBehavior File="RunCode" Code="PrintStep(148)" />
            <CustomBehavior File="WaitTimer" WaitTime="30000" />
            <CustomBehavior File="InteractWith" MobIds="107516, 107504, 107506, 107505, 107517, 107611, 107609, 107631, 107618" NumOfTimes="999" InteractBlacklistTimeInSeconds="3" TerminateWhen="IsObjectiveComplete(1,40325)" X="1755.827" Y="4592.34" Z="97.26285" />
        </If>
        <!-- 149 -->
        <If Condition="HasQuest(40325) || NeedsQuest(42224)">
            <CustomBehavior File="RunCode" Code="PrintStep(149)" />
            <TurnIn Nav="Fly" QuestName="Scenes from a Memory" QuestId="40325" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1737.87" Y="4600.397" Z="96.3101" />
            <PickUp Nav="Fly" QuestName="Cloaked in Moonshade" QuestId="42224" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1737.87" Y="4600.397" Z="96.3101" />
        </If>
        <!-- 150 -->
        <If Condition="NeedsQuest(40798)">
            <CustomBehavior File="RunCode" Code="PrintStep(150)" />
            <PickUp Nav="Fly" QuestName="Cling to Hope" QuestId="40798" GiverName="Absolon" GiverId="101848" X="1676.881" Y="4565.673" Z="123.9951" />
        </If>
        <!-- 153 -->
        <!-- just a move to -->
        <!-- 154 -->
        <If Condition="NeedsQuest(41452)">
            <CustomBehavior File="RunCode" Code="PrintStep(154)" />
            <PickUp Nav="Fly" QuestName="Feline Frantic" QuestId="41452" GiverName="Mayruna Moonwing" GiverId="103568" X="2269.187" Y="5244.868" Z="113.3099" />
        </If>
        <!-- 155 -->
        <If Condition="DoQuest(41452)">
            <CustomBehavior File="RunCode" Code="PrintStep(155)" />
            <CustomBehavior File="InteractWith" MobId="248064" TerminateWhen="IsObjectiveComplete(1,41452)" X="2304.207" Y="5237.48" Z="108.1125" />
        </If>
        <!-- 156 -->
        <If Condition="DoQuest(41452)">
            <CustomBehavior File="RunCode" Code="PrintStep(156)" />
            <CustomBehavior File="InteractWith" MobId="248065" TerminateWhen="IsObjectiveComplete(2,41452)" X="2273.184" Y="5207.104" Z="109.3777" />
        </If>
        <!-- 157 -->
        <If Condition="DoQuest(41452)">
            <CustomBehavior File="RunCode" Code="PrintStep(157)" />
            <CustomBehavior File="InteractWith" MobId="248063" TerminateWhen="IsObjectiveComplete(3,41452)" X="2269.929" Y="5190.155" Z="109.026" />
        </If>
        <!-- 158 -->
        <If Condition="DoQuest(41452)">
            <CustomBehavior File="RunCode" Code="PrintStep(158)" />
            <CustomBehavior File="InteractWith" MobId="248055" TerminateWhen="IsObjectiveComplete(4,41452)" X="2314.837" Y="5169.223" Z="117.6262" />
        </If>
        <!-- 159 -->
        <If Condition="HasQuest(41452) || NeedsQuest(41463)">
            <CustomBehavior File="RunCode" Code="PrintStep(159)" />
            <TurnIn Nav="Fly" QuestName="Feline Frantic" QuestId="41452" TurnInName="Mayruna Moonwing" TurnInId="103568" X="2269.187" Y="5244.868" Z="113.3099" />
            <PickUp Nav="Run" QuestName="Missing Along the Way" QuestId="41463" GiverName="Mayruna Moonwing" GiverId="103568" X="2269.187" Y="5244.868" Z="113.3099" />
        </If>
        <!-- 160 -->
        <If Condition="NeedsQuest(41453)">
            <CustomBehavior File="RunCode" Code="PrintStep(160)" />
            <PickUp QuestName="Homeward Bounding" QuestId="41453" GiverName="Mardranel Forestheart" GiverId="103570" X="2269.187" Y="5244.868" Z="113.3099" />
        </If>
        <!-- 161 -->
        <If Condition="!IsQuestCompleted(41453) &amp;&amp; HasQuest(41453)">
            <CustomBehavior File="RunCode" Code="PrintStep(161)" />
            <CustomBehavior File="UserDialog" QuestId="41453" AllowBotStop="True" SoundCue="Exclamation" SoundCueInterval="150" ExpiryTime="300" ExpiryAction="InputEnabled_Continue" Text="Homeward Bounding may not work 100% of the time due to the randomness of the kitty. feel free to do it by hand quickly by stopping now." />
            <MoveTo Nav="Run" X="2249.215" Y="5278.467" Z="116.0898" />
            <CustomBehavior File="ForcedDismount" />
            <MoveTo Nav="Run" X="2258.984" Y="5296.698" Z="116.086" />
            <CustomBehavior File="WaitTimer" WaitTime="10000" />
            <CustomBehavior File="RunCode">
                <![CDATA[
                    var kitty = Unit(104478);
                    kitty.Target();

                    while(!IsObjectiveComplete(1,41453))
                    {
                        Logging.Write(System.Windows.Media.Colors.Yellow, "[Zak]: Chasing Kitty");

                        Vector3 kLoc = Me.CurrentTarget.Location;
                        Vector3 mLoc = Me.Location;

                        double diff = 2291.792 - kLoc.X;
                        WoWPoint nLoc;

                        bool right = diff < 0;
                        if( right )
                        {
                            nLoc = new WoWPoint( kLoc.X + (diff/9.0), kLoc.Y - 1.5, kLoc.Z );
                        }
                        else
                        {
                            nLoc = new WoWPoint( kLoc.X - (diff/9.0), kLoc.Y - 1.5, kLoc.Z );
                        }

                        Navigator.MoveTo(nLoc);

                        await Coroutine.Sleep(3000);
                    }
                ]]>
            </CustomBehavior>
            <CustomBehavior File="WaitTimer" WaitTime="15000" />
        </If>
        <!-- 162 -->
        <!-- finishes automatically -->
        <!-- 163 -->
        <If Condition="HasQuest(41453) || NeedsQuest(41197)">
            <CustomBehavior File="RunCode" Code="PrintStep(163)" />
            <TurnIn Nav="Fly" QuestName="Homeward Bounding" QuestId="41453" TurnInName="Mardranel Forestheart" TurnInId="103570" X="2312.153" Y="5470.168" Z="116.6692" />
            <PickUp Nav="Fly" QuestName="You've Got to Be Kitten Me Right Meow" QuestId="41197" GiverName="Mardranel Forestheart" GiverId="103570" X="2312.153" Y="5470.168" Z="116.6692" />
        </If>
        <!-- 164 -->
        <If Condition="DoQuest(41197)">
            <CustomBehavior File="RunCode" Code="PrintStep(164)" />
            <!-- Credit: ksmaze -->
            <CustomBehavior File="RunCode">
                <![CDATA[
                    var home = new Vector3(2322.228f, 5470.458f, 118.7071f);

                    while (!IsQuestCompleted(41197))
                    {
                      var kitty = Unit(103511);
                      kitty.Target();

                      while(kitty != null && kitty.IsValid)
                      {
                          Logging.Write(System.Windows.Media.Colors.Yellow, "[Zak]: Chasing Kitty");
                          float inverse = WoWMathHelper.CalculateNeededFacing(home, kitty.Location);
                          var nLoc = kitty.Location.RayCast(inverse, 2);
                          Navigator.MoveTo(nLoc);
                          await Coroutine.Sleep(3000);
                      }
                    }
                ]]>
            </CustomBehavior>
        </If>
        <!-- 165 -->
        <If Condition="HasQuest(41197)">
            <CustomBehavior File="RunCode" Code="PrintStep(165)" />
            <TurnIn Nav="Fly" QuestName="You've Got to Be Kitten Me Right Meow" QuestId="41197" TurnInName="Mardranel Forestheart" TurnInId="103570" X="2312.153" Y="5470.168" Z="116.6692" />
        </If>
        <!-- 166 -->
        <If Condition="HasQuest(41463) || NeedsQuest(41464)">
            <CustomBehavior File="RunCode" Code="PrintStep(166)" />
            <TurnIn Nav="Fly" QuestName="Missing Along the Way" QuestId="41463" TurnInName="Kalendros Irongrove" TurnInId="106696" X="2615.757" Y="5572.743" Z="182.6656" />
            <PickUp Nav="Fly" QuestName="Not Here, Not Now, Not Ever" QuestId="41464" GiverName="Kalendros Irongrove" GiverId="106696" X="2615.757" Y="5572.743" Z="182.6656" />
        </If>
        <!-- 167 -->
        <If Condition="DoQuest(41464)">
            <CustomBehavior File="RunCode" Code="PrintStep(167)" />
            <CustomBehavior File="KillUntilComplete" MobIds="106764" QuestId="41464" TerminateWhen="GetItemCount(137189) == 3">
                <HuntingGrounds>
                    <Hotspot X="2602.18" Y="5582.347" Z="182.1877" />
                    <Hotspot X="2663.675" Y="5613.03" Z="191.5668" />
                    <Hotspot X="2667.221" Y="5548.1" Z="186.9757" />
                </HuntingGrounds>
            </CustomBehavior>
            <CustomBehavior File="InteractWith" MobId="106765" TerminateWhen="QuestDone(41464)" NumOfTimes="500">
                <HuntingGrounds>
                    <Hotspot X="2602.18" Y="5582.347" Z="182.1877" />
                    <Hotspot X="2663.675" Y="5613.03" Z="191.5668" />
                    <Hotspot X="2667.221" Y="5548.1" Z="186.9757" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 168 -->
        <If Condition="HasQuest(41464) || NeedsQuest(41467)">
            <CustomBehavior File="RunCode" Code="PrintStep(168)" />
            <TurnIn Nav="Fly" QuestName="Not Here, Not Now, Not Ever" QuestId="41464" TurnInName="Kalendros Irongrove" TurnInId="106696" X="2615.757" Y="5572.743" Z="182.6656" />
            <PickUp Nav="Fly" QuestName="The Only Choice We Can Make" QuestId="41467" GiverName="Kalendros Irongrove" GiverId="106696" X="2615.757" Y="5572.743" Z="182.6656" />
        </If>
        <!-- 169 -->
        <If Condition="DoQuest(41467)">
            <CustomBehavior File="RunCode" Code="PrintStep(169)" />
            <MoveTo X="2617.178" Y="5560.029" Z="182.6609" />
            <CustomBehavior File="UseItem" ItemId="135534" />
        </If>
        <!-- 171 -->
        <If Condition="HasQuest(42224) || NeedsQuest(42225)">
            <CustomBehavior File="RunCode" Code="PrintStep(171)" />
            <TurnIn Nav="Fly" QuestName="Cloaked in Moonshade" QuestId="42224" TurnInName="Moonshade Relic" TurnInId="250383" X="2043.991" Y="5693.085" Z="85.64674" />
            <PickUp Nav="Fly" QuestName="Breaking the Seal" QuestId="42225" GiverName="Moonshade Relic" GiverId="250383" X="2043.991" Y="5693.085" Z="85.64674" />
        </If>
        <!-- 172 -->
        <If Condition="DoQuest(42225) &amp;&amp; !IsObjectiveComplete(1,42225)">
            <CustomBehavior File="RunCode" Code="PrintStep(172)" />
            <CustomBehavior File="InteractWith" MobId="250382" X="2041.389" Y="5710.63" Z="86.13902" />
        </If>
        <!-- 173 -->
        <If Condition="DoQuest(42225) &amp;&amp; !IsObjectiveComplete(1,42225)">
            <CustomBehavior File="RunCode" Code="PrintStep(173)" />
            <CustomBehavior File="InteractWith" MobId="250378" X="2041.752" Y="5695.899" Z="85.64749" />
        </If>
        <!-- 174 -->
        <If Condition="DoQuest(42225) &amp;&amp; !IsObjectiveComplete(2,42225)">
            <CustomBehavior File="RunCode" Code="PrintStep(174)" />
            <CustomBehavior File="InteractWith" MobId="250382" X="2041.389" Y="5710.63" Z="86.13902" />
        </If>
        <!-- 175 -->
        <If Condition="DoQuest(42225) &amp;&amp; !IsObjectiveComplete(2,42225)">
            <CustomBehavior File="RunCode" Code="PrintStep(175)" />
            <CustomBehavior File="InteractWith" MobId="250379" X="2033.009" Y="5702.615" Z="85.02367" />
        </If>
        <!-- 176 -->
        <If Condition="DoQuest(42225) &amp;&amp; !IsObjectiveComplete(2,42225)">
            <CustomBehavior File="RunCode" Code="PrintStep(176)" />
            <CustomBehavior File="InteractWith" MobId="250381" X="2050.264" Y="5681.919" Z="86.05747" />
        </If>
        <!-- 177 -->
        <If Condition="DoQuest(42225) &amp;&amp; !IsObjectiveComplete(2,42225)">
            <CustomBehavior File="RunCode" Code="PrintStep(177)" />
            <CustomBehavior File="InteractWith" MobId="250666" X="2046.785" Y="5697.388" Z="85.847" />
        </If>
        <!-- 178 -->
        <If Condition="DoQuest(42225) &amp;&amp; !IsObjectiveComplete(3,42225)">
            <CustomBehavior File="RunCode" Code="PrintStep(178)" />
            <CustomBehavior File="InteractWith" MobId="250380" X="2057.37" Y="5689.786" Z="86.30775" />
        </If>
        <!-- 179 -->
        <If Condition="DoQuest(42225) &amp;&amp; !IsObjectiveComplete(3,42225)">
            <CustomBehavior File="RunCode" Code="PrintStep(179)" />
            <CustomBehavior File="InteractWith" MobId="250381" X="2050.264" Y="5681.919" Z="86.05747" />
        </If>
        <!-- 180 -->
        <If Condition="DoQuest(42225) &amp;&amp; !IsObjectiveComplete(3,42225)">
            <CustomBehavior File="RunCode" Code="PrintStep(180)" />
            <CustomBehavior File="InteractWith" MobId="250667" X="2047.325" Y="5695.16" Z="85.81974" />
        </If>
        <!-- 181 -->
        <If Condition="HasQuest(42225)">
            <CustomBehavior File="RunCode" Code="PrintStep(181)" />
            <TurnIn Nav="Fly" QuestName="Breaking the Seal" QuestId="42225" TurnInName="Moonshade Relic" TurnInId="250383" X="2043.991" Y="5693.085" Z="85.64674" />
        </If>
        <!-- Moonshade Hideout accepted automatically -->
        <!-- 182 -->
        <If Condition="DoQuest(42226)">
            <CustomBehavior File="RunCode" Code="PrintStep(182)" />
            <CustomBehavior File="KillUntilComplete" MobIds="107856, 107853, 107857, 107888" QuestId="42226" TerminateWhen="QuestDone(42226)">
                <HuntingGrounds>
                    <Hotspot X="2031.729" Y="5676.135" Z="85.98132" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <UseMount Value="false" />
        <!-- 183 -->
        <If Condition="HasQuest(42226) || NeedsQuest(42227)">
            <CustomBehavior File="RunCode" Code="PrintStep(183)" />
            <TurnIn Nav="Fly" QuestName="Moonshade Holdout" QuestId="42226" TurnInName="Valewalker Farodin" TurnInId="107126" X="2043.991" Y="5693.085" Z="85.64674" />
            <PickUp Nav="Fly" QuestName="Into the Crevasse" QuestId="42227" GiverName="Valewalker Farodin" GiverId="107126" X="2043.991" Y="5693.085" Z="85.64674" />
            <CustomBehavior File="ForcedDismount" />
        </If>
        <!-- 184 -->
        <If Condition="DoQuest(42227) &amp;&amp; !IsObjectiveComplete(1, 42227)">
            <CustomBehavior File="RunCode" Code="PrintStep(184)" />
            <MoveTo X="1893.406" Y="5523.812" Z="24.90339" />
            <CustomBehavior File="WaitTimer" WaitTime="30000" TerminateWhen="IsObjectiveComplete(1, 42227)" />
            <!-- <CustomBehavior File="Escort" QuestId="42227" MobId="107126" EscortUntil="DestinationReached" EscortDestX="1892.924"  EscortDestY="5522.651"  EscortDestZ="24.36934" /> -->
            <CustomBehavior File="ForcedDismount" />
            <CustomBehavior File="WaitTimer" WaitTime="500" />
            <CustomBehavior File="Misc\RunLua" Lua="MoveForwardStart();" WaitTime="500" />
            <CustomBehavior File="Misc\RunLua" Lua="MoveForwardStop();" WaitTime="100" />
        </If>
        <!-- 185 -->
        <If Condition="DoQuest(42227)">
            <CustomBehavior File="RunCode" Code="PrintStep(185)" />
            <CustomBehavior File="ForcedDismount" />
            <CustomBehavior File="WaitTimer" WaitTime="500" />
            <CustomBehavior File="Misc\RunLua" Lua="MoveForwardStart();" WaitTime="500" />
            <CustomBehavior File="Misc\RunLua" Lua="MoveForwardStop();" WaitTime="100" />
        </If>
        <UseMount Value="true" />
        <!-- 186 -->
        <If Condition="HasQuest(42227) || NeedsQuest(42228)">
            <CustomBehavior File="RunCode" Code="PrintStep(186)" />
            <TurnIn Nav="Fly" QuestName="Into the Crevasse" QuestId="42227" TurnInName="Valewalker Farodin" TurnInId="107126" X="1877.637" Y="5475.554" Z="-68.12977" />
            <PickUp Nav="Fly" QuestName="The Hidden City" QuestId="42228" GiverName="Valewalker Farodin" GiverId="107126" X="1877.637" Y="5475.554" Z="-68.12977" />
        </If>
        <!-- 187 -->
        <If Condition="NeedsQuest(43593)">
            <CustomBehavior File="RunCode" Code="PrintStep(187)" />
            <PickUp Nav="Fly" QuestName="Leyline Feed: Falanaar Depths" QuestId="43593" GiverName="Leyline Feed" GiverId="252263" X="1624.266" Y="5369.372" Z="-59.86499" />
        </If>
        <!-- 188 -->
        <If Condition="DoQuest(43593) &amp;&amp; !HasAncientMana(250)">
            <CustomBehavior File="RunCode" Code="PrintStep(188)" />
            <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 300)" />
            <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
        </If>
        <!-- 189 -->
        <If Condition="HasQuest(43593)">
            <CustomBehavior File="RunCode" Code="PrintStep(189)" />
            <TurnIn Nav="Fly" QuestName="Leyline Feed: Falanaar Depths" QuestId="43593" TurnInName="Leyline Feed" TurnInId="252263" X="1624.266" Y="5369.372" Z="-59.86499" />
        </If>
        <!-- 190 -->
        <If Condition="(NeedsQuest(43592) || HasQuest(43592)) &amp;&amp; !HasAncientMana(250)">
            <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 250)" />
            <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
        </If>
        <If Condition="NeedsQuest(43592)">
            <CustomBehavior File="RunCode" Code="PrintStep(190)" />
            <PickUp Nav="Fly" QuestName="Leyline Feed: Falanaar Arcway" QuestId="43592" GiverName="Leyline Feed" GiverId="252262" X="1807.095" Y="5264.879" Z="-57.26294" />
        </If>
        <!-- 191 -->
        <!-- 192 -->
        <If Condition="HasQuest(43592)">
            <CustomBehavior File="RunCode" Code="PrintStep(192)" />
            <TurnIn Nav="Fly" QuestName="Leyline Feed: Falanaar Arcway" QuestId="43592" TurnInName="Leyline Feed" TurnInId="252262" X="1807.095" Y="5264.879" Z="-57.26294" />
        </If>
        <!-- 193 -->
        <If Condition="DoQuest(42228)">
            <CustomBehavior File="RunCode" Code="PrintStep(193)" />
            <CustomBehavior File="KillUntilComplete" MobIds="107959" QuestId="42228" TerminateWhen="QuestDone(42228)">
                <HuntingGrounds>
                    <Hotspot X="2185.781" Y="5481.971" Z="1.592235" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 194 -->
        <If Condition="HasQuest(42228) || NeedsQuest(42230)">
            <CustomBehavior File="RunCode" Code="PrintStep(194)" />
            <TurnIn Nav="Fly" QuestName="The Hidden City" QuestId="42228" TurnInName="Ancient Seed" TurnInId="108101" X="2187.691" Y="5480.94" Z="1.592952" />
            <PickUp Nav="Fly" QuestName="The Valewalker's Burden" QuestId="42230" GiverName="Ancient Seed" GiverId="108101" X="2187.691" Y="5480.94" Z="1.592952" />
        </If>
        <!-- 195 -->
        <If Condition="DoQuest(42230) &amp;&amp; !IsObjectiveComplete(1,42230)">
            <CustomBehavior File="RunCode" Code="PrintStep(195)" />
            <CustomBehavior File="InteractWith" MobId="251047" X="2370.608" Y="5442.983" Z="15.95275" />
            <!-- wait for teleport -->
            <CustomBehavior File="WaitTimer" WaitTime="30000" />
        </If>
        <!-- 196 -->
        <If Condition="QuestDone(42230)">
            <CustomBehavior File="RunCode" Code="PrintStep(196)" />
            <MoveTo X="1722.773" Y="4614.757" Z="123.7993" />
            <TurnIn Nav="Fly" QuestName="The Valewalker's Burden" QuestId="42230" TurnInName="Doodad_7sr_hubmanatree_seedholder001" TurnInId="265435" X="1722.773" Y="4614.757" Z="123.7993" />
            <!-- movie -->
            <CustomBehavior File="WaitTimer" WaitTime="30000" />
        </If>
        <!-- 197 -->
        <!-- hb was stopping here for some reason with just a regular pickup block idk -->
        <If Condition="!IsQuestCompleted(44561) &amp;&amp; !HasQuest(44561)">
            <CustomBehavior File="RunCode" Code="PrintStep(197)" />
            <CustomBehavior File="InteractWith" MobId="107126" X="1722.54" Y="4615.137" Z="123.8005" />
            <CustomBehavior File="Misc\RunLua" Lua="AcceptQuest()" WaitTime="200" />
        </If>
        <!-- 198 -->
        <!-- check if he is thirsty and unlock if we have mana, otherwise go get some -->
        <If Condition="!IsQuestCompleted(44492) &amp;&amp; IsValtroisThirsty()">
            <If Condition="!HasAncientMana(50)">
                <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 50)" />
                <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
            </If>
            <CustomBehavior File="InteractWith" MobId="103155" X="1732.071" Y="4605.52" Z="123.8043" />
            <CustomBehavior File="Misc\RunLua" Lua="QuestFrameCompleteButton:Click()" WaitTime="200" />
            <CustomBehavior File="Misc\RunLua" Lua="QuestFrameCompleteQuestButton:Click()" WaitTime="200" />
        </If>
        <If Condition="NeedsQuest(44492)">
            <CustomBehavior File="RunCode" Code="PrintStep(198)" />
            <PickUp Nav="Fly" QuestName="Leyline Apprentice" QuestId="44492" GiverName="Arcanist Valtrois" GiverId="103155" X="1732.071" Y="4605.52" Z="123.8043" />
        </If>
        <!-- 199 -->
        <If Condition="HasQuest(44492)">
            <CustomBehavior File="RunCode" Code="PrintStep(199)" />
            <TurnIn Nav="Fly" QuestName="Leyline Apprentice" QuestId="44492" TurnInName="Arcanist Valtrois" TurnInId="103155" X="1732.071" Y="4605.52" Z="123.8043" />
        </If>
        <!-- 200 -->
        <If Condition="HasQuest(41467) || NeedsQuest(41473)">
            <CustomBehavior File="RunCode" Code="PrintStep(200)" />
            <TurnIn Nav="Fly" QuestName="The Only Choice We Can Make" QuestId="41467" TurnInName="Mayruna Moonwing" TurnInId="103568" X="2298.161" Y="5231.146" Z="107.7191" />
            <PickUp Nav="Fly" QuestName="Redhoof the Ancient" QuestId="41473" GiverName="Mayruna Moonwing" GiverId="103568" X="2298.161" Y="5231.146" Z="107.7191" />
        </If>
        <!-- 201 -->
        <If Condition="HasQuest(41473) || NeedsQuest(41474,41475) ">
            <CustomBehavior File="RunCode" Code="PrintStep(201)" />
            <TurnIn Nav="Fly" QuestName="Redhoof the Ancient" QuestId="41473" TurnInName="Mythandros Irongrove" TurnInId="103569" X="2347.255" Y="5091.745" Z="112.6199" />
            <PickUp Nav="Fly" QuestName="Fertilizing the Future" QuestId="41474" GiverName="Mythandros Irongrove" GiverId="103569" X="2347.255" Y="5091.745" Z="112.6199" />
            <PickUp Nav="Fly" QuestName="Prongs and Fangs" QuestId="41475" GiverName="Mythandros Irongrove" GiverId="103569" X="2347.255" Y="5091.745" Z="112.6199" />
        </If>
        <!-- 202 - 204 -->
        <If Condition="DoQuest(41474)">
            <CustomBehavior File="RunCode" Code="PrintStep(202,203,204)" />
            <CustomBehavior File="InteractWith" MobId="248114" NumOfTimes="500" TerminateWhen="IsQuestCompleted(41474)">
                <HuntingGrounds>
                    <Hotspot X="2150.961" Y="5147.301" Z="125.5595" />
                    <Hotspot X="2204.618" Y="5138.357" Z="123.2354" />
                    <Hotspot X="2253.21" Y="5127.307" Z="125.3089" />
                    <Hotspot X="2155.137" Y="4955.449" Z="138.7735" />
                    <Hotspot X="2143.054" Y="4897.685" Z="155.3225" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 205 -->
        <If Condition="DoQuest(41475)">
            <CustomBehavior File="RunCode" Code="PrintStep(205)" />
            <CustomBehavior File="KillUntilComplete" MobIds="104226" TerminateWhen="IsObjectiveComplete(2, 41475)">
                <HotSpots>
                    <Hotspot X="2244.476" Y="5010.06" Z="137.113" />
                </HotSpots>
            </CustomBehavior>
        </If>
        <!-- 206 - 208 -->
        <If Condition="DoQuest(41475)">
            <CustomBehavior File="RunCode" Code="PrintStep(206,207,208)" />
            <CustomBehavior File="KillUntilComplete" MobIds="104224" TerminateWhen="IsObjectiveComplete(1, 41475)">
                <HotSpots>
                    <Hotspot X="2195.02" Y="5066.134" Z="135.6669" />
                    <Hotspot X="2244.476" Y="5010.06" Z="137.113" />
                    <Hotspot X="2236.205" Y="4900.87" Z="143.2135" />
                    <Hotspot X="2151.802" Y="4886.728" Z="154.8712" />
                </HotSpots>
            </CustomBehavior>
        </If>
        <!-- 209 -->
        <If Condition="HasQuest(41474) || HasQuest(41475) || NeedsQuest(41478)">
            <CustomBehavior File="RunCode" Code="PrintStep(209)" />
            <TurnIn Nav="Fly" QuestName="Fertilizing the Future" QuestId="41474" TurnInName="Mythandros Irongrove" TurnInId="103569" X="2347.255" Y="5091.745" Z="112.6199" />
            <TurnIn Nav="Fly" QuestName="Prongs and Fangs" QuestId="41475" TurnInName="Mythandros Irongrove" TurnInId="103569" X="2347.255" Y="5091.745" Z="112.6199" />
            <PickUp Nav="Fly" QuestName="The Final Blessing" QuestId="41478" GiverName="Mythandros Irongrove" GiverId="103569" X="2347.073" Y="5091.385" Z="112.7444" />
        </If>
        <!-- 210 -->
        <If Condition="HasQuest(41478) || NeedsQuest(41479,41480,41485)">
            <CustomBehavior File="RunCode" Code="PrintStep(210)" />
            <TurnIn Nav="Fly" QuestName="The Final Blessing" QuestId="41478" TurnInName="Solendra Featherdown" TurnInId="103571" X="2305.934" Y="4977.681" Z="132.3243" />
            <PickUp Nav="Fly" QuestName="Natural Adversaries" QuestId="41479" GiverName="Solendra Featherdown" GiverId="103571" X="2305.934" Y="4977.681" Z="132.3243" />
            <PickUp Nav="Fly" QuestName="Managazer" QuestId="41480" GiverName="Solendra Featherdown" GiverId="103571" X="2305.934" Y="4977.681" Z="132.3243" />
            <PickUp Nav="Fly" QuestName="Moonwhisper Rescue" QuestId="41485" GiverName="Solendra Featherdown" GiverId="103571" X="2305.934" Y="4977.681" Z="132.3243" />
        </If>
        <!-- 211 -->
        <If Condition="DoQuest(41480)">
            <CustomBehavior File="RunCode" Code="PrintStep(211)" />
            <CustomBehavior File="InteractWith" MobId="103808" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1, 41480)">
                <HuntingGrounds>
                    <Hotspot X="2531.733" Y="4845.089" Z="120.228" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 212 -->
        <If Condition="DoQuest(41485)">
            <CustomBehavior File="RunCode" Code="PrintStep(212)" />
            <CustomBehavior File="InteractWith" MobIds="103816, 105405" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1, 41485)">
                <HuntingGrounds>
                    <Hotspot X="2313.65" Y="4950.181" Z="127.8318" />
                    <Hotspot X="2441.213" Y="4985.778" Z="119.8523" />
                    <Hotspot X="2497.254" Y="4954.636" Z="124.335" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 213 -->
        <If Condition="DoQuest(41479)">
            <CustomBehavior File="RunCode" Code="PrintStep(213)" />
            <CustomBehavior File="KillUntilComplete" MobIds="103527" TerminateWhen="IsObjectiveComplete(1, 41479)">
                <HuntingGrounds>
                    <Hotspot X="2313.65" Y="4950.181" Z="127.8318" />
                    <Hotspot X="2441.213" Y="4985.778" Z="119.8523" />
                    <Hotspot X="2497.254" Y="4954.636" Z="124.335" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 214 -->
        <If Condition="HasQuest(41485) || HasQuest(41479) || HasQuest(41480) || NeedsQuest(41469)">
            <CustomBehavior File="RunCode" Code="PrintStep(214)" />
            <TurnIn Nav="Fly" QuestName="Moonwhisper Rescue" QuestId="41485" TurnInName="Solendra Featherdown" TurnInId="103571" X="2305.934" Y="4977.681" Z="132.3243" />
            <TurnIn Nav="Fly" QuestName="Natural Adversaries" QuestId="41479" TurnInName="Solendra Featherdown" TurnInId="103571" X="2305.934" Y="4977.681" Z="132.3243" />
            <TurnIn Nav="Fly" QuestName="Managazer" QuestId="41480" TurnInName="Solendra Featherdown" TurnInId="103571" X="2305.934" Y="4977.681" Z="132.3243" />
            <PickUp Nav="Fly" QuestName="Return to Irongrove Retreat" QuestId="41469" GiverName="Solendra Featherdown" GiverId="103571" X="2305.934" Y="4977.681" Z="132.3243" />
        </If>
        <!-- 215 -->
        <If Condition="NeedsQuest(43590)">
            <CustomBehavior File="RunCode" Code="PrintStep(215)" />
            <PickUp Nav="Fly" QuestName="Leyline Feed: Ley Station Moonfall" QuestId="43590" GiverName="Leyline Feed" GiverId="252260" X="2721.865" Y="4663.681" Z="155.3818" />
        </If>
        <!-- 216 -->
        <If Condition="DoQuest(43590)">
            <CustomBehavior File="RunCode" Code="PrintStep(216)" />
            <CustomBehavior File="KillUntilComplete" MobIds="112140" TerminateWhen="IsObjectiveComplete(1, 43590)">
                <HuntingGrounds>
                    <Hotspot X="2440.675" Y="4623.51" Z="175.4894" />
                    <Hotspot X="2379.893" Y="4696.706" Z="153.2943" />
                    <Hotspot X="2317.932" Y="4776.167" Z="147.2014" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 217 -->
        <If Condition="DoQuest(43590) &amp;&amp; !HasAncientMana(200)">
            <CustomBehavior File="RunCode" Code="PrintStep(217)" />
            <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 200)" />
            <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
        </If>
        <!-- 218 -->
        <If Condition="HasQuest(43590)">
            <CustomBehavior File="RunCode" Code="PrintStep(218)" />
            <TurnIn Nav="Fly" QuestName="Leyline Feed: Ley Station Moonfall" QuestId="43590" TurnInName="Leyline Feed" TurnInId="252260" X="2721.865" Y="4663.681" Z="155.3818" />
        </If>
        <!-- 219 -->
        <If Condition="HasQuest(41469) || NeedsQuest(41494)">
            <CustomBehavior File="RunCode" Code="PrintStep(219)" />
            <TurnIn Nav="Fly" QuestName="Return to Irongrove Retreat" QuestId="41469" TurnInName="Mythandros Irongrove" TurnInId="103569" X="2284.007" Y="5203.943" Z="109.5459" />
            <PickUp Nav="Fly" QuestName="Eminent Grow-main" QuestId="41494" GiverName="Mythandros Irongrove" GiverId="103569" X="2284.007" Y="5203.943" Z="109.5459" />
        </If>
        <!-- 220 -->
        <If Condition="DoQuest(41494)">
            <CustomBehavior File="RunCode" Code="PrintStep(220)" />
            <CustomBehavior File="InteractWith" MobId="249023" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1, 41494)">
                <HuntingGrounds>
                    <Hotspot X="2287.103" Y="5208.266" Z="109.4065" />
                </HuntingGrounds>
            </CustomBehavior>
            <CustomBehavior File="WaitTimer" WaitTime="10000" />
        </If>
        <!-- 221 -->
        <!-- 222 -->
        <If Condition="HasQuest(41494)">
            <CustomBehavior File="RunCode" Code="PrintStep(222)" />
            <TurnIn Nav="Fly" QuestName="Eminent Grow-main" QuestId="41494" TurnInName="Mayruna Moonwing" TurnInId="103568" X="2284.007" Y="5203.943" Z="109.5459" />
        </If>
        <!-- 223 -->
        <If Condition="NeedsQuest(42223)">
            <CustomBehavior File="RunCode" Code="PrintStep(223)" />
            <PickUp Nav="Fly" QuestName="Scouting the Crimson Thicket" QuestId="42223" GiverName="Solendra Featherdown" GiverId="103571" X="2287.973" Y="5208.162" Z="109.3824" />
        </If>
        <!-- 224 -->
        <If Condition="NeedsQuest(40883)">
            <CustomBehavior File="RunCode" Code="PrintStep(224)" />
            <PickUp Nav="Fly" QuestName="Fate of the Guard" QuestId="40883" GiverName="Thalrenus Rivertree" GiverId="101766" X="2659.653" Y="5113.666" Z="148.1721" />
        </If>
        <!-- 225 -->
        <If Condition="NeedsQuest(43591)">
            <CustomBehavior File="RunCode" Code="PrintStep(225)" />
            <PickUp Nav="Fly" QuestName="Leyline Feed: Ley Station Aethenar" QuestId="43591" GiverName="Leyline Feed" GiverId="252261" X="2876.361" Y="5414.121" Z="144.8342" />
        </If>
        <!-- 226 -->
        <If Condition="DoQuest(43591)">
            <CustomBehavior File="RunCode" Code="PrintStep(226)" />
            <CustomBehavior File="KillUntilComplete" MobIds="112067" TerminateWhen="IsObjectiveComplete(1, 43591)">
                <HuntingGrounds>
                    <Hotspot X="2879.714" Y="5415.9" Z="144.9005" />
                    <Hotspot X="2831.348" Y="5348.954" Z="145.4519" />
                    <Hotspot X="2787.856" Y="5389.284" Z="144.9563" />
                    <Hotspot X="2819.708" Y="5448.275" Z="145.452" />
                    <Hotspot X="2924.875" Y="5378.286" Z="145.4517" />
                    <Hotspot X="2956.989" Y="5420.431" Z="144.956" />
                    <Hotspot X="2905.56" Y="5456.2" Z="145.4517" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 227 -->
        <If Condition="DoQuest(43591) &amp;&amp; !HasAncientMana(200)">
            <CustomBehavior File="RunCode" Code="PrintStep(227)" />
            <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 200)" />
            <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
        </If>
        <!-- 228 -->
        <If Condition="HasQuest(43591)">
            <CustomBehavior File="RunCode" Code="PrintStep(228)" />
            <TurnIn Nav="Fly" QuestName="Leyline Feed: Ley Station Aethenar" QuestId="43591" TurnInName="Leyline Feed" TurnInId="252261" X="2876.361" Y="5414.121" Z="144.8342" />
        </If>
        <!-- 229 -->
        <If Condition="!IsQuestCompleted(41030)">
            <CustomBehavior File="RunCode" Code="PrintStep(229)" />
            <CustomBehavior File="KillUntilComplete" MobIds="101784, 101783" TerminateWhen="HasQuest(41030)">
                <HuntingGrounds>
                    <Hotspot X="2780.779" Y="5131.295" Z="174.6612" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 230 -->
        <UseMount Value="false" />
        <If Condition="DoQuest(40883)">
            <CustomBehavior File="RunCode" Code="PrintStep(230)" />
            <CustomBehavior File="InteractWith" MobId="102029" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1, 40883)">
                <HuntingGrounds>
                    <Hotspot X="2798.995" Y="5132.926" Z="174.549" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 231 -->
        <If Condition="NeedsQuest(40949)">
            <CustomBehavior File="RunCode" Code="PrintStep(231)" />
            <PickUp Nav="Fly" QuestName="Not Their Last Stand" QuestId="40949" GiverName="Ivanel Meadowsong" GiverId="106095" X="2756.91" Y="5011.496" Z="198.8824" />
        </If>
        <!-- 232 -->
        <If Condition="DoQuest(40883)">
            <CustomBehavior File="RunCode" Code="PrintStep(232)" />
            <CustomBehavior File="InteractWith" MobId="102031" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(2, 40883)">
                <HuntingGrounds>
                    <Hotspot X="2782.993" Y="4948.82" Z="198.684" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 233 -->
        <If Condition="DoQuest(40949)">
            <CustomBehavior File="RunCode" Code="PrintStep(233)" />
            <CustomBehavior File="InteractWith" MobId="101780" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1, 40949)">
                <HuntingGrounds>
                    <Hotspot X="2782.993" Y="4948.82" Z="198.684" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 234 -->
        <If Condition="DoQuest(41030)">
            <CustomBehavior File="RunCode" Code="PrintStep(234)" />
            <CustomBehavior File="KillUntilComplete" MobIds="101784, 101783" TerminateWhen="IsObjectiveComplete(1, 41030)">
                <HuntingGrounds>
                    <Hotspot X="2780.779" Y="5131.295" Z="174.6612" />
                    <Hotspot X="2782.993" Y="4948.82" Z="198.684" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 235 -->
        <If Condition="DoQuest(40883)">
            <CustomBehavior File="RunCode" Code="PrintStep(235)" />
            <CustomBehavior File="InteractWith" MobId="102030" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(3, 40883)">
                <HuntingGrounds>
                    <Hotspot X="2778.071" Y="4799.49" Z="186.3184" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 236 -->
        <If Condition="HasQuest(40883) || HasQuest(41030)">
            <CustomBehavior File="RunCode" Code="PrintStep(236)" />
            <TurnIn Nav="Fly" QuestName="Fate of the Guard" QuestId="40883" TurnInName="Lyrea Windfeather" TurnInId="101767" X="2778.071" Y="4799.49" Z="186.3184" />
            <TurnIn Nav="Fly" QuestName="Sigil Reclamation" QuestId="41030" TurnInName="Lyrea Windfeather" TurnInId="101767" X="2778.071" Y="4799.49" Z="186.3184" />
        </If>
        <!-- 237 -->
        <If Condition="HasQuest(40949)">
            <CustomBehavior File="RunCode" Code="PrintStep(237)" />
            <TurnIn Nav="Fly" QuestName="Not Their Last Stand" QuestId="40949" TurnInName="Wounded Moonfall Defender" TurnInId="106182" X="2778.071" Y="4799.49" Z="186.3184" />
        </If>
        <!-- 238 -->
        <If Condition="NeedsQuest(40963)">
            <CustomBehavior File="RunCode" Code="PrintStep(238)" />
            <PickUp Nav="Fly" QuestName="Take Them in Claw" QuestId="40963" GiverName="Lyrea Windfeather" GiverId="101767" X="2778.071" Y="4799.49" Z="186.3184" />
        </If>
        <!-- 239 -->
        <If Condition="DoQuest(40963)">
            <CustomBehavior File="RunCode" Code="PrintStep(239)" />
            <CustomBehavior File="CombatUseItemOnV2" QuestId="40963" ItemId="139882" ItemAppliesAuraId="94956" MobId="101784" MobId1="101783" UseWhenMobHasHealthPercent="100" MaxRangeToUseItem="30" TerminateWhen="IsObjectiveComplete(1, 40963)">
                <HuntingGrounds>
                    <Hotspot X="2780.779" Y="5131.295" Z="174.6612" />
                    <Hotspot X="2782.993" Y="4948.82" Z="198.684" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 240 -->
        <If Condition="HasQuest(40963) || NeedsQuest(40964)">
            <CustomBehavior File="RunCode" Code="PrintStep(240)" />
            <TurnIn Nav="Fly" QuestName="Take Them in Claw" QuestId="40963" TurnInName="Serena Windfeather" TurnInId="102425" X="2595.459" Y="4909.358" Z="247.2779" />
            <PickUp Nav="Fly" QuestName="The Rift Between" QuestId="40964" GiverName="Serena Windfeather" GiverId="102425" X="2595.459" Y="4909.358" Z="247.2779" />
        </If>
        <!-- got a weird behavior accepting this quest -->
        <If Condition="NeedsQuest(40968)">
            <CustomBehavior File="WaitTimer" WaitTime="3000" />
            <CustomBehavior File="InteractWith" MobId="102425" X="2595.459" Y="4909.358" Z="247.2779" />
            <CustomBehavior File="Misc\RunLua" Lua="AcceptQuest()" WaitTime="200" />
        </If>
        <!-- 241 -->
        <If Condition="DoQuest(40964)">
            <CustomBehavior File="RunCode" Code="PrintStep(241)" />
            <CustomBehavior File="InteractWith" MobId="102426" NumOfTimes="500" InteractByGossipOptions="1" TerminateWhen="IsObjectiveComplete(1, 40964)">
                <HuntingGrounds>
                    <Hotspot X="2592.222" Y="4911.658" Z="247.5308" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 242 -->
        <If Condition="HasQuest(40964) || NeedsQuest(40967,40965,41032)">
            <CustomBehavior File="RunCode" Code="PrintStep(242)" />
            <TurnIn Nav="Fly" QuestName="The Rift Between" QuestId="40964" TurnInName="Lothrius Mooncaller" TurnInId="101768" X="2617.048" Y="4637.557" Z="258.9414" />
            <PickUp Nav="Fly" QuestName="Precious Little Left" QuestId="40967" GiverName="Lothrius Mooncaller" GiverId="101768" X="2617.048" Y="4637.557" Z="258.9414" />
            <PickUp Nav="Fly" QuestName="Lay Waste, Lay Mines" QuestId="40965" GiverName="Lothrius Mooncaller" GiverId="101768" X="2617.048" Y="4637.557" Z="258.9414" />
            <PickUp Nav="Fly" QuestName="Stop the Spell Seekers" QuestId="41032" GiverName="Lothrius Mooncaller" GiverId="101768" X="2617.048" Y="4637.557" Z="258.9414" />
        </If>
        <CustomBehavior File="Hooks\DoWhen" ActivityName="setTrap" UseWhen="ShouldUseTrap()" AllowUseDuringCombat="true" LogExecution="true">
            <CustomBehavior File="UseItem" ItemId="133882" />
        </CustomBehavior>
        <DisableBehavior Name="Pull" />
        <!-- 243 -->
        <If Condition="DoQuest(40967)">
            <CustomBehavior File="RunCode" Code="PrintStep(243)" />
            <CustomBehavior File="InteractWith" MobId="246703" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(2, 40967)">
                <HuntingGrounds>
                    <Hotspot X="2612.061" Y="4726.095" Z="262.4545" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 244 -->
        <If Condition="NeedsQuest(40762)">
            <CustomBehavior File="RunCode" Code="PrintStep(244)" />
            <CustomBehavior File="RunCode" Code="PrintStep(2441)" />
            <MoveTo X="2747.718" Y="4680.42" Z="271.3399" />
            <!-- turn pull on so we can kill capn -->
            <EnableBehavior Name="Pull" />
            <CustomBehavior File="KillUntilComplete" MobIds="106275" TerminateWhen="HasItem(136851)" X="2747.718" Y="4680.42" Z="271.3399" />
            <DisableBehavior Name="Pull" />
            <CustomBehavior File="RunCode" Code="PrintStep(2442)" />
            <CustomBehavior File="UseItem" ItemId="136851" />
            <CustomBehavior File="RunCode" Code="PrintStep(2443)" />
            <CustomBehavior File="Misc\RunLua" Lua="AcceptQuest()" WaitTime="200" />
        </If>
        <!-- 245 -->
        <If Condition="DoQuest(40967)">
            <CustomBehavior File="RunCode" Code="PrintStep(245)" />
            <CustomBehavior File="InteractWith" MobId="246704" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(3, 40967)">
                <HuntingGrounds>
                    <Hotspot X="2783.359" Y="4767.056" Z="272.0873" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 246 -->
        <If Condition="DoQuest(40967)">
            <CustomBehavior File="RunCode" Code="PrintStep(246)" />
            <CustomBehavior File="InteractWith" MobId="246702" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1, 40967)">
                <HuntingGrounds>
                    <Hotspot X="2825.74" Y="4639.374" Z="273.4915" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 247 -->
        <If Condition="DoQuest(41032)">
            <CustomBehavior File="RunCode" Code="PrintStep(247)" />
            <CustomBehavior File="InteractWith" MobId="103213" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1, 41032)">
                <HuntingGrounds>
                    <Hotspot X="2754.733" Y="4705.179" Z="273.4313" />
                    <Hotspot X="2771.606" Y="4657.494" Z="271.6132" />
                    <Hotspot X="2743.972" Y="4629.302" Z="258.8517" />
                    <Hotspot X="2663.746" Y="4725.763" Z="258.9397" />
                    <Hotspot X="2727.123" Y="4737.895" Z="271.5403" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 248 -->
        <If Condition="DoQuest(40965)">
            <CustomBehavior File="RunCode" Code="PrintStep(248)" />
            <CustomBehavior File="KillUntilComplete" MobIds="111599, 111527, 111530, 103326" TerminateWhen="IsQuestCompleted(40965)">
                <HuntingGrounds>
                    <Hotspot X="2754.733" Y="4705.179" Z="273.4313" />
                    <Hotspot X="2771.606" Y="4657.494" Z="271.6132" />
                    <Hotspot X="2743.972" Y="4629.302" Z="258.8517" />
                    <Hotspot X="2663.746" Y="4725.763" Z="258.9397" />
                    <Hotspot X="2727.123" Y="4737.895" Z="271.5403" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 249 -->
        <If Condition="DoQuest(40968)">
            <CustomBehavior File="RunCode" Code="PrintStep(249)" />
            <CustomBehavior File="KillUntilComplete" MobIds="111599, 111527, 111530, 103326" TerminateWhen="GetItemCount(133957) == 10">
                <HuntingGrounds>
                    <Hotspot X="2754.733" Y="4705.179" Z="273.4313" />
                    <Hotspot X="2771.606" Y="4657.494" Z="271.6132" />
                    <Hotspot X="2743.972" Y="4629.302" Z="258.8517" />
                    <Hotspot X="2663.746" Y="4725.763" Z="258.9397" />
                    <Hotspot X="2727.123" Y="4737.895" Z="271.5403" />
                </HuntingGrounds>
            </CustomBehavior>
            <If Condition="DoQuest(40968) &amp;&amp; GetItemCount(133957) == 10">
                <CustomBehavior File="UseItem" ItemId="133957" />
            </If>
        </If>
        <!-- 250 -->
        <If Condition="HasQuest(40968) || NeedsQuest(41110)">
            <CustomBehavior File="RunCode" Code="PrintStep(250)" />
            <TurnIn Nav="Fly" QuestName="Recovering Stolen Power" QuestId="40968" />
            <PickUp Nav="Fly" QuestName="Waiting for Revenge" QuestId="41110" GiverName="Moonfall Riding Hippogryph" GiverId="111604" X="2830.336" Y="4701.386" Z="285.4977" />
        </If>
        <CustomBehavior File="RunCode" Code="PrintStep(2500)" />
        <If Condition="DoQuest(41110)">
            <CustomBehavior File="InteractWith" MobId="111604" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1, 41110)">
                <HuntingGrounds>
                    <Hotspot X="2830.336" Y="4701.386" Z="285.4977" />
                </HuntingGrounds>
            </CustomBehavior>
            <CustomBehavior File="WaitTimer" WaitTime="2000" TerminateWhen="Me.OnTaxi" />
        </If>
        <If Condition="HasQuest(41110) &amp;&amp; Me.InVehicle">
            <CustomBehavior File="RunCode" Code="PrintStep(2501)" />
            <CustomBehavior File="RunCode" Code="Styx.Helpers.KeyboardManager.KeyUpDown((char)System.Windows.Forms.Keys.D2);" />
            <CustomBehavior File="WaitTimer" WaitTime="600000" TerminateWhen="!Me.InVehicle" />
        </If>
        <If Condition="QuestDone(41110)">
            <TurnIn Nav="Fly" QuestName="Waiting for Revenge" QuestId="41110" />
        </If>
        <!-- 251 -->
        <EnableBehavior Name="Pull" />
        <!-- go farm another shard if we need it -->
        <CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[Zak]: Checking for Rain Death Upon Them - 41111&quot;);" />
        <If Condition="NeedsQuest(41111) || HasQuest(41111)">
            <CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[Zak]: Farming up a volatile spell focus&quot;);" />
            <If Condition="!HasItem(133956)">
                <CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[Zak]: Gathering 10 Spell Focus Fragment&quot;);" />
                <CustomBehavior File="KillUntilComplete" MobIds="111599, 111527, 111530, 103326" TerminateWhen="GetItemCount(133957) == 10">
                    <HuntingGrounds>
                        <Hotspot X="2754.733" Y="4705.179" Z="273.4313" />
                        <Hotspot X="2771.606" Y="4657.494" Z="271.6132" />
                        <Hotspot X="2743.972" Y="4629.302" Z="258.8517" />
                        <Hotspot X="2663.746" Y="4725.763" Z="258.9397" />
                        <Hotspot X="2727.123" Y="4737.895" Z="271.5403" />
                    </HuntingGrounds>
                    <Blackspots>
                        <Blackspot X="2755.671" Y="4673.797" Z="271.3399" Radius="40" />
                        <Blackspot X="2668.729" Y="4610.212" Z="259.2582" Radius="30" />
                    </Blackspots>
                </CustomBehavior>
            </If>
            <If Condition="!HasItem(133956) &amp;&amp; GetItemCount(133957) == 10">
                <CustomBehavior File="UseItem" ItemId="133957" />
            </If>
        </If>
        <!-- go farm some mana before we get too deep -->
        <CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[Zak]: Checking if we need mana for Moon Guard Teleporter Online! - 43808&quot;);" />
        <If Condition="!IsQuestCompleted(43808) &amp;&amp; !HasAncientMana(100)">
            <CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[Zak]: Pre-farming some ancient mana&quot;);" />
            <UseMount Value="true" />
            <MoveTo X="2539.183" Y="4482.568" Z="234.0783" />
            <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 100)" />
            <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
        </If>
        <UseMount Value="true" />
        <If Condition="HasQuest(40967) || HasQuest(40965) || HasQuest(41032) || HasQuest(40762) || NeedsQuest(40969)">
            <CustomBehavior File="RunCode" Code="PrintStep(251)" />
            <CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[Zak]: Turning in many quests.&quot;);" />
            <TurnIn Nav="Fly" QuestName="Precious Little Left" QuestId="40967" TurnInName="Lothrius Mooncaller" TurnInId="101768" X="2618.521" Y="4638.142" Z="258.9366" />
            <TurnIn Nav="Fly" QuestName="Lay Waste, Lay Mines" QuestId="40965" TurnInName="Lothrius Mooncaller" TurnInId="101768" X="2618.521" Y="4638.142" Z="258.9366" />
            <TurnIn Nav="Fly" QuestName="Stop the Spell Seekers" QuestId="41032" TurnInName="Lothrius Mooncaller" TurnInId="101768" X="2618.521" Y="4638.142" Z="258.9366" />
            <TurnIn Nav="Fly" QuestName="Zealot's Dues" QuestId="40762" TurnInName="Lothrius Mooncaller" TurnInId="101768" X="2618.521" Y="4638.142" Z="258.9366" />
            <PickUp Nav="Fly" QuestName="Starweaver's Fate" QuestId="40969" GiverName="Lothrius Mooncaller" GiverId="101768" X="2618.521" Y="4638.142" Z="258.9366" />
        </If>
        <CustomBehavior File="Hooks\DoWhen" ActivityName="setTrap" Command="Remove" />
        <!-- 252 -->
        <!-- im not sure why he put it in this order, this is a terrible idea -->
        <If Condition="HasQuest(40969) &amp;&amp; DistFrom253() &gt; 50">
            <CustomBehavior File="RunCode" Code="PrintStep(252)" />
            <DisableBehavior Name="Combat" />
            <MoveTo X="2641.464" Y="4653.886" Z="258.8484" />
            <CustomBehavior File="WaitTimer" WaitTime="500" />
            <CustomBehavior File="InteractWith" MobId="246462" X="2641.464" Y="4653.886" Z="258.8484" />
            <CustomBehavior File="WaitTimer" WaitTime="5000" />
            <MoveTo X="2665.263" Y="4662.308" Z="259.4984" />
            <CustomBehavior File="WaitTimer" WaitTime="500" />
            <CustomBehavior File="InteractWith" MobId="246462" X="2665.263" Y="4662.308" Z="259.4984" />
            <CustomBehavior File="WaitTimer" WaitTime="5000" />
            <MoveTo X="2687.107" Y="4677.823" Z="258.8538" />
            <CustomBehavior File="WaitTimer" WaitTime="500" />
            <CustomBehavior File="InteractWith" MobId="246462" X="2687.107" Y="4677.823" Z="258.8538" />
            <CustomBehavior File="WaitTimer" WaitTime="5000" />
            <MoveTo X="2702.248" Y="4723.266" Z="271.3399" />
            <CustomBehavior File="WaitTimer" WaitTime="500" />
            <CustomBehavior File="InteractWith" MobId="246462" X="2702.248" Y="4723.266" Z="271.3399" />
            <CustomBehavior File="WaitTimer" WaitTime="5000" />
            <MoveTo X="2703.979" Y="4745.619" Z="271.3395" />
            <CustomBehavior File="WaitTimer" WaitTime="500" />
            <CustomBehavior File="InteractWith" MobId="246462" X="2703.979" Y="4745.619" Z="271.3395" />
            <CustomBehavior File="WaitTimer" WaitTime="5000" />
            <MoveTo X="2714.282" Y="4770.157" Z="271.3395" />
            <CustomBehavior File="WaitTimer" WaitTime="500" />
            <CustomBehavior File="InteractWith" MobId="246462" X="2714.282" Y="4770.157" Z="271.3395" />
            <CustomBehavior File="WaitTimer" WaitTime="5000" />
            <MoveTo X="2731.913" Y="4788.243" Z="271.3395" />
            <CustomBehavior File="WaitTimer" WaitTime="500" />
            <CustomBehavior File="InteractWith" MobId="246462" X="2731.913" Y="4788.243" Z="271.3395" />
            <CustomBehavior File="WaitTimer" WaitTime="5000" />
            <MoveTo X="2750.883" Y="4807.63" Z="271.3395" />
            <CustomBehavior File="WaitTimer" WaitTime="500" />
            <CustomBehavior File="InteractWith" MobId="246462" X="2750.883" Y="4807.63" Z="271.3395" />
            <CustomBehavior File="WaitTimer" WaitTime="5000" />
            <MoveTo X="2770.112" Y="4826.866" Z="271.3397" />
            <CustomBehavior File="WaitTimer" WaitTime="500" />
            <CustomBehavior File="InteractWith" MobId="246462" X="2770.112" Y="4826.866" Z="271.3397" />
            <CustomBehavior File="WaitTimer" WaitTime="5000" />
            <MoveTo X="2865.682" Y="4922.981" Z="271.8038" />
            <CustomBehavior File="WaitTimer" WaitTime="500" />
            <CustomBehavior File="InteractWith" MobId="246462" X="2865.682" Y="4922.981" Z="271.8038" />
            <CustomBehavior File="WaitTimer" WaitTime="5000" />
            <MoveTo X="2882.978" Y="4940.316" Z="271.8038" />
            <CustomBehavior File="WaitTimer" WaitTime="500" />
            <CustomBehavior File="InteractWith" MobId="246462" X="2882.978" Y="4940.316" Z="271.8038" />
            <CustomBehavior File="WaitTimer" WaitTime="5000" />
            <MoveTo X="2905.608" Y="4935.912" Z="271.804" />
            <CustomBehavior File="WaitTimer" WaitTime="500" />
            <CustomBehavior File="InteractWith" MobId="246462" X="2905.608" Y="4935.912" Z="271.804" />
            <CustomBehavior File="WaitTimer" WaitTime="5000" />
            <MoveTo X="2925.388" Y="4932.462" Z="271.804" />
            <CustomBehavior File="WaitTimer" WaitTime="500" />
            <CustomBehavior File="InteractWith" MobId="246462" X="2925.388" Y="4932.462" Z="271.804" />
            <CustomBehavior File="WaitTimer" WaitTime="5000" />
            <MoveTo X="2943.1" Y="4918.203" Z="271.8405" />
            <CustomBehavior File="WaitTimer" WaitTime="500" />
            <CustomBehavior File="InteractWith" MobId="246462" X="2943.1" Y="4918.203" Z="271.8405" />
            <CustomBehavior File="WaitTimer" WaitTime="5000" />
            <EnableBehavior Name="Combat" />
        </If>
        <!-- 253 -->
        <If Condition="!IsQuestCompleted(41111) &amp;&amp; NeedsQuest(41111)">
            <CustomBehavior File="RunCode" Code="PrintStep(253)" />
            <PickUp Nav="Fly" QuestName="Rain Death Upon Them" QuestId="41111" GiverName="Moonfall Riding Hippogryph" GiverId="111605" X="2953.197" Y="4883.051" Z="285.826" />
        </If>
        <!-- 254 - 256 -->
        <If Condition="HasQuest(40969) || NeedsQuest(40970,40971)">
            <CustomBehavior File="RunCode" Code="PrintStep(254,255,256)" />
            <MoveTo X="2970.517" Y="4875.906" Z="284.9778" />
            <CustomBehavior File="WaitTimer" WaitTime="5000" />
            <TurnIn Nav="Fly" QuestName="Starweaver's Fate" QuestId="40969" TurnInName="Syrana Starweaver" TurnInId="101765" X="2970.517" Y="4875.906" Z="284.9778" />
            <PickUp Nav="Fly" QuestName="The Orchestrator of Our Demise" QuestId="40970" GiverName="Syrana Starweaver" GiverId="101765" X="2970.517" Y="4875.906" Z="284.9778" />
            <PickUp Nav="Fly" QuestName="Overwhelming Distraction" QuestId="40971" GiverName="Syrana Starweaver" GiverId="101765" X="2970.517" Y="4875.906" Z="284.9778" />
        </If>
        <!-- 257 -->
        <If Condition="DoQuest(40971)">
            <CustomBehavior File="RunCode" Code="PrintStep(257)" />
            <DisableBehavior Name="Combat" />
            <If Condition="DoQuest(40971)">
                <MoveTo X="2949.632" Y="4931.799" Z="272.1" />
                <If Condition="UseInertCrystal()">
                    <CustomBehavior File="WaitTimer" WaitTime="5000" />
                </If>
            </If>
            <If Condition="DoQuest(40971)">
                <MoveTo X="2964.842" Y="4947.92" Z="271.8244" />
                <If Condition="UseInertCrystal()">
                    <CustomBehavior File="WaitTimer" WaitTime="5000" />
                </If>
            </If>
            <If Condition="DoQuest(40971)">
                <MoveTo X="2971.451" Y="4963.638" Z="272.4892" />
                <If Condition="UseInertCrystal()">
                    <CustomBehavior File="WaitTimer" WaitTime="5000" />
                </If>
            </If>
            <If Condition="DoQuest(40971)">
                <MoveTo X="2971.858" Y="4985.686" Z="272.2955" />
                <If Condition="UseInertCrystal()">
                    <CustomBehavior File="WaitTimer" WaitTime="5000" />
                </If>
            </If>
            <If Condition="DoQuest(40971)">
                <MoveTo X="2962.59" Y="5006.315" Z="271.8596" />
                <If Condition="UseInertCrystal()">
                    <CustomBehavior File="WaitTimer" WaitTime="5000" />
                </If>
            </If>
            <If Condition="DoQuest(40971)">
                <MoveTo X="2949.221" Y="5021.032" Z="271.809" />
                <If Condition="UseInertCrystal()">
                    <CustomBehavior File="WaitTimer" WaitTime="5000" />
                </If>
            </If>
            <If Condition="DoQuest(40971)">
                <MoveTo X="2931.005" Y="5029.282" Z="271.8272" />
                <If Condition="UseInertCrystal()">
                    <CustomBehavior File="WaitTimer" WaitTime="5000" />
                </If>
            </If>
            <If Condition="DoQuest(40971)">
                <MoveTo X="2906.679" Y="5030.229" Z="271.8406" />
                <If Condition="UseInertCrystal()">
                    <CustomBehavior File="WaitTimer" WaitTime="5000" />
                </If>
            </If>
            <If Condition="DoQuest(40971)">
                <MoveTo X="2887.329" Y="5017.914" Z="271.8218" />
                <If Condition="UseInertCrystal()">
                    <CustomBehavior File="WaitTimer" WaitTime="5000" />
                </If>
            </If>
            <If Condition="DoQuest(40971)">
                <MoveTo X="2876.618" Y="5008.198" Z="271.8879" />
                <If Condition="UseInertCrystal()">
                    <CustomBehavior File="WaitTimer" WaitTime="5000" />
                </If>
            </If>
            <If Condition="DoQuest(40971)">
                <MoveTo X="2870.317" Y="4989.904" Z="271.963" />
                <If Condition="UseInertCrystal()">
                    <CustomBehavior File="WaitTimer" WaitTime="5000" />
                </If>
            </If>
            <If Condition="DoQuest(40971)">
                <MoveTo X="2869.478" Y="4968.499" Z="271.8129" />
                <If Condition="UseInertCrystal()">
                    <CustomBehavior File="WaitTimer" WaitTime="5000" />
                </If>
            </If>
            <If Condition="DoQuest(40971)">
                <MoveTo X="2874.992" Y="4948.983" Z="272.088" />
                <If Condition="UseInertCrystal()">
                    <CustomBehavior File="WaitTimer" WaitTime="5000" />
                </If>
            </If>
            <If Condition="DoQuest(40971)">
                <MoveTo X="2892.915" Y="4930.724" Z="271.8906" />
                <If Condition="UseInertCrystal()">
                    <CustomBehavior File="WaitTimer" WaitTime="5000" />
                </If>
            </If>
            <If Condition="DoQuest(40971)">
                <MoveTo X="2908.34" Y="4923.989" Z="272.0619" />
                <If Condition="UseInertCrystal()">
                    <CustomBehavior File="WaitTimer" WaitTime="5000" />
                </If>
            </If>
            <If Condition="DoQuest(40971)">
                <MoveTo X="2926.485" Y="4924.027" Z="272.2269" />
                <If Condition="UseInertCrystal()">
                    <CustomBehavior File="WaitTimer" WaitTime="5000" />
                </If>
            </If>
            <EnableBehavior Name="Combat" />
        </If>
        <!-- 258 -->
        <If Condition="DoQuest(40970)">
            <CustomBehavior File="RunCode" Code="PrintStep(258)" />
            <CustomBehavior File="KillUntilComplete" MobIds="102575" TerminateWhen="QuestDone(40970)">
                <HuntingGrounds>
                    <Hotspot X="2975.35" Y="5026.769" Z="272.4049" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 259 -->
        <If Condition="NeedsQuest(43808)">
            <CustomBehavior File="RunCode" Code="PrintStep(259)" />
            <PickUp Nav="Fly" QuestName="Moon Guard Teleporter Online!" QuestId="43808" GiverName="Unpowered Telemancy Beacon" GiverId="252814" X="3036.183" Y="4951.125" Z="357.2864" />
        </If>
        <!-- 260 -->
        <!-- 261 -->
        <If Condition="HasQuest(43808)">
            <CustomBehavior File="RunCode" Code="PrintStep(261)" />
            <TurnIn Nav="Fly" QuestName="Moon Guard Teleporter Online!" QuestId="43808" TurnInName="Unpowered Telemancy Beacon" TurnInId="252814" X="3036.183" Y="4951.125" Z="357.2864" />
        </If>
        <If Condition="DoQuest(41111) &amp;&amp; !Me.IsOnTransport">
            <CustomBehavior File="InteractWith" MobId="111606" X="3033.015" Y="4929.304" Z="358.597" />
            <CustomBehavior File="WaitTimer" WaitTime="3000" />
        </If>
        <If Condition="DoQuest(41111) &amp;&amp; Me.IsOnTransport">
            <CustomBehavior File="Vehicles\NoControlVehicle" QuestId="41111" VehicleMountId="111606" TargetId="111599" TargetId2="111527" TargetId3="111530" TargetId4="103326" TargetId5="114300" TargetId6="114301" AttackButton="1" OftenToUse="1600" NumOfTimes="500" VehicleId="111606" MaxRange="1000" />
        </If>
        <If Condition="HasQuest(41111)">
            <TurnIn Nav="Fly" QuestName="Rain Death Upon Them" QuestId="41111" />
        </If>
        <!-- 262 -->
        <If Condition="HasQuest(40971) || HasQuest(40970)">
            <CustomBehavior File="RunCode" Code="PrintStep(262)" />
            <TurnIn Nav="Fly" QuestName="Overwhelming Distraction" QuestId="40971" TurnInName="Syrana Starweaver" TurnInId="103129" X="3059.413" Y="4990.342" Z="357.288" />
            <TurnIn Nav="Fly" QuestName="The Orchestrator of Our Demise" QuestId="40970" TurnInName="Syrana Starweaver" TurnInId="103129" X="3059.413" Y="4990.342" Z="357.288" />
        </If>
        <!-- 263 -->
        <If Condition="NeedsQuest(40972)">
            <CustomBehavior File="RunCode" Code="PrintStep(263)" />
            <PickUp Nav="Fly" QuestName="Last Stand of the Moon Guard" QuestId="40972" GiverName="Thalrenus Rivertree" GiverId="101766" X="3059.413" Y="4990.342" Z="357.288" />
        </If>
        <!-- 264 -->
        <If Condition="DoQuest(40972)">
            <CustomBehavior File="RunCode" Code="PrintStep(264)" />
            <CustomBehavior File="InteractWith" MobId="101766" InteractByGossipOptions="1" X="3059.413" Y="4990.342" Z="357.288" />
            <CustomBehavior File="WaitTimer" WaitTime="30000" />
        </If>
        <!-- 265 -->
        <UseMount Value="true" />
        <!-- check if she is thirsty before we try and turnin -->
        <If Condition="HasQuest(40972) &amp;&amp; IsThalyssraThirsty()">
            <If Condition="!HasAncientMana(50)">
                <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 50)" />
                <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
            </If>
            <CustomBehavior File="InteractWith" MobId="97140" X="1724.658" Y="4614.287" Z="123.7945" />
            <CustomBehavior File="RunMacro" Macro="/click GossipTitleButton1" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
        </If>
        <If Condition="HasQuest(40972)">
            <CustomBehavior File="RunCode" Code="PrintStep(265)" />
            <TurnIn Nav="Fly" QuestName="Last Stand of the Moon Guard" QuestId="40972" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1724.658" Y="4614.287" Z="123.7945" />
        </If>
        <!-- 266 -->
        <If Condition="NeedsQuest(44493) &amp;&amp; IsValtroisThirsty()">
            <If Condition="!HasAncientMana(50)">
                <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 50)" />
                <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
            </If>
            <CustomBehavior File="InteractWith" MobId="103155" X="1731.536" Y="4606.796" Z="123.8035" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
        </If>
        <If Condition="NeedsQuest(44493)">
            <CustomBehavior File="RunCode" Code="PrintStep(266)" />
            <PickUp Nav="Fly" QuestName="Leyline Proficiency" QuestId="44493" GiverName="Arcanist Valtrois" GiverId="103155" X="1731.536" Y="4606.796" Z="123.8035" />
        </If>
        <!-- 267 -->
        <If Condition="HasQuest(44493)">
            <CustomBehavior File="RunCode" Code="PrintStep(267)" />
            <TurnIn Nav="Fly" QuestName="Leyline Proficiency" QuestId="44493" TurnInName="Arcanist Valtrois" TurnInId="103155" X="1731.536" Y="4606.796" Z="123.8035" />
        </If>
        <!-- 268 -->
        <CustomBehavior File="Hooks\DoWhen" UseWhen="ShouldCastMask()" LogExecution="true" ActivityName="apply_mask" StopMovingToConductActivity="true" AllowUseWhileMounted="true">
            <CustomBehavior File="RunCode" Code="CastMask()" />
            <CustomBehavior File="WaitTimer" WaitTime="4000" />
        </CustomBehavior>
        <If Condition="QuestDone(40798)">
            <CustomBehavior File="RunCode" Code="PrintStep(268)" />
            <MoveTo X="1437.216" Y="4336.231" Z="113.071" />
        </If>
        <If Condition="HasQuest(40798)">
            <TurnIn Nav="Fly" QuestName="Cling to Hope" QuestId="40798" TurnInName="Noressa" TurnInId="111318" X="1364.334" Y="4351.875" Z="113.0737" />
        </If>
        <!-- 269 -->
        <If Condition="NeedsQuest(43588)">
            <CustomBehavior File="RunCode" Code="PrintStep(269)" />
            <PickUp Nav="Fly" QuestName="Leyline Feed: Kel'balor" QuestId="43588" GiverName="Leyline Feed" GiverId="252259" X="2023.723" Y="3387.641" Z="162.6618" />
        </If>
        <CustomBehavior File="Hooks\DoWhen" ActivityName="apply_mask" Command="Remove" />
        <!-- 270 -->
        <If Condition="DoQuest(43588)">
            <CustomBehavior File="RunCode" Code="PrintStep(270)" />
            <CustomBehavior File="InteractWith" MobId="253071" X="2024.286" Y="3393.75" Z="162.729" />
            <CustomBehavior File="KillUntilComplete" TerminateWhen="IsObjectiveComplete(1, 43588)">
                <HuntingGrounds>
                    <Hotspot X="2024.286" Y="3393.75" Z="162.729" />
                </HuntingGrounds>
                <PursuitList>
                    <PursueUnit Id="113570" PursueWhen="UNIT.Distance &lt; 20" />
                    <PursueUnit Id="111923" PursueWhen="UNIT.Distance &lt; 20" />
                </PursuitList>
            </CustomBehavior>
        </If>w
        <!-- 271 -->
        <If Condition="DoQuest(43588) &amp;&amp; !HasAncientMana(200)">
            <CustomBehavior File="RunCode" Code="PrintStep(271)" />
            <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 200)" />
            <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
        </If>
        <!-- 272 -->
        <If Condition="HasQuest(43588)">
            <CustomBehavior File="RunCode" Code="PrintStep(272)" />
            <TurnIn Nav="Fly" QuestName="Leyline Feed: Kel'balor" QuestId="43588" TurnInName="Leyline Feed" TurnInId="252259" X="2023.723" Y="3387.641" Z="162.6618" />
        </If>
        <!-- 273 -->
        <If Condition="HasQuest(42223) || NeedsQuest(40617)">
            <CustomBehavior File="RunCode" Code="PrintStep(273)" />
            <TurnIn Nav="Fly" QuestName="Scouting the Crimson Thicket" QuestId="42223" TurnInName="Lilryia Dawnwind" TurnInId="100775" X="1626.365" Y="3222.938" Z="162.2837" />
            <PickUp Nav="Fly" QuestName="Turn Around, Nighteyes" QuestId="40617" GiverName="Lilryia Dawnwind" GiverId="100775" X="1626.365" Y="3222.938" Z="162.2837" />
        </If>
        <!-- 274 -->
        <!-- grab flight path -->
        <If Condition="DoQuest(40617) &amp;&amp; !IsObjectiveComplete(1, 40617)">
            <CustomBehavior File="RunCode" Code="PrintStep(274)" />
            <MoveTo X="1898.717" Y="3098.343" Z="220.4361" />
        </If>
        <!-- 275 -->
        <If Condition="DoQuest(40617) &amp;&amp; !IsObjectiveComplete(1, 40617)">
            <CustomBehavior File="RunCode" Code="PrintStep(275)" />
            <MoveTo X="1746.231" Y="3113.79" Z="164.3932" />
        </If>
        <!-- 276 -->
        <If Condition="DoQuest(40617)">
            <CustomBehavior File="RunCode" Code="PrintStep(276)" />
            <CustomBehavior File="KillUntilComplete" MobIds="100780" TerminateWhen="IsObjectiveComplete(2, 40617)">
                <HuntingGrounds>
                    <Hotspot X="1746.231" Y="3113.79" Z="164.3932" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 277 -->
        <If Condition="NeedsQuest(40907)">
            <CustomBehavior File="RunCode" Code="PrintStep(277)" />
            <PickUp Nav="Fly" QuestName="Removing Obstacles" QuestId="40907" GiverName="Toryl" GiverId="102309" X="1558.892" Y="3042.477" Z="93.09901" />
        </If>
        <UseMount Value="false" />
        <CustomBehavior File="ForcedDismount" />
        <!-- 278 -->
        <If Condition="DoQuest(40907)">
            <CustomBehavior File="RunCode" Code="PrintStep(278)" />
            <CustomBehavior File="KillUntilComplete" MobIds="102738" TerminateWhen="IsObjectiveComplete(1, 40907)">
                <HuntingGrounds>
                    <Hotspot X="1490.119" Y="2826.381" Z="43.29788" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 279 -->
        <If Condition="DoQuest(40907)">
            <CustomBehavior File="RunCode" Code="PrintStep(279)" />
            <CustomBehavior File="KillUntilComplete" MobIds="102739" TerminateWhen="IsObjectiveComplete(2, 40907)">
                <HuntingGrounds>
                    <Hotspot X="1712.379" Y="2819.422" Z="42.53382" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 280 -->
        <If Condition="HasQuest(40907) || NeedsQuest(40908)">
            <CustomBehavior File="RunCode" Code="PrintStep(280)" />
            <TurnIn Nav="Fly" QuestName="Removing Obstacles" QuestId="40907" TurnInName="Toryl" TurnInId="99948" X="1639.647" Y="2737.854" Z="22.70454" />
            <PickUp Nav="Fly" QuestName="Jarl Come Back Now" QuestId="40908" GiverName="Toryl" GiverId="99948" X="1639.647" Y="2737.854" Z="22.70454" />
        </If>
        <!-- 281 -->
        <If Condition="HasQuest(40908) || NeedsQuest(40332)">
            <CustomBehavior File="RunCode" Code="PrintStep(281)" />
            <TurnIn Nav="Fly" QuestName="Jarl Come Back Now" QuestId="40908" TurnInName="Jarl Throndyr" TurnInId="99559" X="1445.161" Y="2822.416" Z="21.33919" />
            <PickUp Nav="Fly" QuestName="Beach Bonfire" QuestId="40332" GiverName="Jarl Throndyr" GiverId="99559" X="1445.161" Y="2822.416" Z="21.33919" />
        </If>
        <!-- 282 -->
        <If Condition="NeedsQuest(40320,40331)">
            <CustomBehavior File="RunCode" Code="PrintStep(282)" />
            <PickUp Nav="Fly" QuestName="Band of Blood Brothers" QuestId="40320" GiverName="Brandolf" GiverId="99544" X="1445.161" Y="2822.416" Z="21.33919" />
            <PickUp Nav="Fly" QuestName="Bite of the Sashj'tar" QuestId="40331" GiverName="Brandolf" GiverId="99544" X="1445.161" Y="2822.416" Z="21.33919" />
        </If>
        <!-- 283 -->
        <If Condition="DoQuest(40332) &amp;&amp; !IsObjectiveComplete(1,40332)">
            <CustomBehavior File="RunCode" Code="PrintStep(283)" />
            <CustomBehavior File="InteractWith" MobIds="245887, 245792" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1,40332)">
                <HuntingGrounds>
                    <Hotspot X="1403.441" Y="2747.881" Z="0.1237803" />
                    <Hotspot X="1372.679" Y="2682.823" Z="-0.5905914" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 284 -->
        <If Condition="DoQuest(40320) &amp;&amp; !IsObjectiveComplete(1,40320)">
            <CustomBehavior File="RunCode" Code="PrintStep(284)" />
            <CustomBehavior File="InteractWith" MobIds="245321" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1,40320)">
                <HuntingGrounds>
                    <Hotspot X="1306.767" Y="2809.534" Z="-16.86363" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 285 -->
        <If Condition="DoQuest(40320) &amp;&amp; !IsObjectiveComplete(2,40320)">
            <CustomBehavior File="RunCode" Code="PrintStep(285)" />
            <CustomBehavior File="InteractWith" MobIds="99563" NumOfTimes="500" InteractByGossipOptions="1" TerminateWhen="IsObjectiveComplete(2,40320)">
                <HuntingGrounds>
                    <Hotspot X="1234.37" Y="2829.404" Z="-11.5531" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 286 -->
        <If Condition="DoQuest(40320) &amp;&amp; !IsObjectiveComplete(3,40320)">
            <CustomBehavior File="RunCode" Code="PrintStep(286)" />
            <CustomBehavior File="InteractWith" MobIds="99564" NumOfTimes="500" InteractByGossipOptions="1" TerminateWhen="IsObjectiveComplete(3,40320)">
                <HuntingGrounds>
                    <Hotspot X="1282.88" Y="2880.448" Z="-11.75164" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 287 -->
        <If Condition="DoQuest(40332) &amp;&amp; !IsObjectiveComplete(2,40332)">
            <CustomBehavior File="RunCode" Code="PrintStep(287)" />
            <CustomBehavior File="InteractWith" MobIds="101131" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(2,40332)">
                <HuntingGrounds>
                    <Hotspot X="1256.081" Y="2641.21" Z="0.8523445" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 288 -->
        <If Condition="DoQuest(40331)">
            <CustomBehavior File="RunCode" Code="PrintStep(288)" />
            <CustomBehavior File="KillUntilComplete" MobIds="102739" TerminateWhen="IsObjectiveComplete(1, 40331)">
                <HuntingGrounds>
                    <Hotspot X="1403.441" Y="2747.881" Z="0.1237803" />
                    <Hotspot X="1372.679" Y="2682.823" Z="-0.5905914" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 289 -->
        <If Condition="HasQuest(40332) || HasQuest(40320) || HasQuest(40331) || NeedsQuest(40334)">
            <CustomBehavior File="RunCode" Code="PrintStep(289)" />
            <TurnIn Nav="Fly" QuestName="Beach Bonfire" QuestId="40332" TurnInName="Brandolf" TurnInId="102334" X="1256.081" Y="2641.21" Z="0.8523445" />
            <TurnIn Nav="Fly" QuestName="Band of Blood Brothers" QuestId="40320" TurnInName="Brandolf" TurnInId="102334" X="1256.081" Y="2641.21" Z="0.8523445" />
            <TurnIn Nav="Fly" QuestName="Bite of the Sashj'tar" QuestId="40331" TurnInName="Brandolf" TurnInId="102334" X="1256.081" Y="2641.21" Z="0.8523445" />
            <PickUp Nav="Fly" QuestName="Fisherman's Tonic" QuestId="40334" GiverName="Brandolf" GiverId="102334" X="1256.081" Y="2641.21" Z="0.8523445" />
        </If>
        <!-- 290 -->
        <If Condition="DoQuest(40334)">
            <CustomBehavior File="RunCode" Code="PrintStep(290)" />
            <CustomBehavior File="KillUntilComplete" MobIds="102828, 100949, 100950" TerminateWhen="IsObjectiveComplete(2, 40334)">
                <HuntingGrounds>
                    <Hotspot X="1056.912" Y="2610.179" Z="2.008139" />
                    <Hotspot X="976.5192" Y="2582.707" Z="3.610669" />
                    <Hotspot X="894.9761" Y="2612.082" Z="0.8384525" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 291 -->
        <If Condition="DoQuest(40334)">
            <CustomBehavior File="RunCode" Code="PrintStep(291)" />
            <CustomBehavior File="KillUntilComplete" MobIds="102796" TerminateWhen="IsObjectiveComplete(3, 40334)">
                <HuntingGrounds>
                    <Hotspot X="921.054" Y="2796.057" Z="-3.007007" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 292 -->
        <If Condition="DoQuest(40334)">
            <CustomBehavior File="RunCode" Code="PrintStep(292)" />
            <CustomBehavior File="KillUntilComplete" MobIds="100100" TerminateWhen="IsObjectiveComplete(1, 40334)">
                <HuntingGrounds>
                    <Hotspot X="921.054" Y="2796.057" Z="-3.007007" />
                    <Hotspot X="841.2545" Y="2856.517" Z="-9.824205" />
                    <Hotspot X="851.3156" Y="2650.387" Z="0.1384602" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 293 -->
        <If Condition="HasQuest(40334) || NeedsQuest(41034)">
            <CustomBehavior File="RunCode" Code="PrintStep(293)" />
            <TurnIn Nav="Fly" QuestName="Fisherman's Tonic" QuestId="40334" TurnInName="Brandolf" TurnInId="100004" />
            <PickUp Nav="Fly" QuestName="Testing the Waters" QuestId="41034" GiverName="Brandolf" GiverId="100004" />
        </If>
        <!-- 294 -->
        <If Condition="DoQuest(41034) &amp;&amp; !IsObjectiveComplete(2, 41034)">
            <CustomBehavior File="RunCode" Code="PrintStep(294)" />
            <!-- leave cave -->
            <MoveTo X="938.9965" Y="2526.882" Z="2.4044" />
            <CustomBehavior File="MyCTM" X="872.6779" Y="2453.581" Z="-1.906282" />
            <CustomBehavior File="MyCTM" X="870.7814" Y="2369.968" Z="-88.0772" />
            <CustomBehavior File="MyCTM" X="782.4954" Y="2431.686" Z="-71.21175" />
            <CustomBehavior File="KillUntilComplete" MobIds="102841" TerminateWhen="IsObjectiveComplete(2, 41034)">
                <HuntingGrounds>
                    <Hotspot X="782.4954" Y="2431.686" Z="-71.21175" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- i updated zygor and the numbers changed -->
        <!-- 293 -->
        <CustomBehavior File="Hooks\Avoid" AvoidName="whale_shark" ObjectId="99899" Radius="30" />
        <If Condition="DoQuest(41034) &amp;&amp; !IsObjectiveComplete(1, 41034)">
            <CustomBehavior File="RunCode" Code="PrintStep(293)" />
            <CustomBehavior File="MyCTM" X="870.7814" Y="2369.968" Z="-88.0772" />
            <CustomBehavior File="MyCTM" X="929.2061" Y="2320.617" Z="-29.8241" />
            <CustomBehavior File="MyCTM" X="1057.504" Y="2208.932" Z="-29.49107" />
            <CustomBehavior File="MyCTM" X="1057.499" Y="2208.936" Z="-115.3167" />
            <CustomBehavior File="MyCTM" X="1075.34" Y="2207.08" Z="-125.3794" />
            <CustomBehavior File="KillUntilComplete" MobIds="102840" TerminateWhen="IsObjectiveComplete(1, 41034)">
                <HuntingGrounds>
                    <Hotspot X="1075.547" Y="2204.08" Z="-126.7002" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 294 -->
        <If Condition="DoQuest(41034) &amp;&amp; !IsObjectiveComplete(3, 41034)">
            <CustomBehavior File="RunCode" Code="PrintStep(294)" />
            <CustomBehavior File="MyCTM" X="1098.621" Y="2228.489" Z="-107.6941" />
            <CustomBehavior File="MyCTM" X="1269.369" Y="2317.943" Z="-87.92223" />
            <CustomBehavior File="MyCTM" X="1285.422" Y="2332.762" Z="-105.8444" />
            <CustomBehavior File="KillUntilComplete" MobIds="102844" TerminateWhen="IsObjectiveComplete(3, 41034)">
                <HuntingGrounds>
                    <Hotspot X="1285.422" Y="2332.762" Z="-105.8444" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 295 -->
        <!-- check if azuregale bay -->
        <If Condition="QuestDone(41034) &amp;&amp; Me.SubZoneId == 7917">
            <CustomBehavior File="RunCode" Code="PrintStep(295)" />
            <CustomBehavior File="MyCTM" X="1338.23" Y="2425.823" Z="-47.28785" />
            <CustomBehavior File="MyCTM" X="1448.034" Y="2584.579" Z="-1.906767" />
            <CustomBehavior File="MyCTM" X="1480.99" Y="2624.647" Z="1.03686" />
        </If>
        <If Condition="HasQuest(41034)">
            <TurnIn Nav="Fly" QuestName="Testing the Waters" QuestId="41034" TurnInName="Brandolf" TurnInId="102845" X="1618.507" Y="2729.824" Z="23.20116" />
        </If>
        <!-- 296 -->
        <If Condition="NeedsQuest(40927)">
            <CustomBehavior File="RunCode" Code="PrintStep(296)" />
            <PickUp Nav="Fly" QuestName="Jandvik's Last Hope" QuestId="40927" GiverName="Toryl" GiverId="99948" X="1618.507" Y="2729.824" Z="23.20116" />
        </If>
        <!-- 297 -->
        <!-- TODO get subzone id -->
        <If Condition="DoQuest(40927) &amp;&amp; Me.MinimapZoneText != &quot;Sashj'tar Grotto&quot;">
            <CustomBehavior File="RunCode" Code="PrintStep(297)" />
            <MoveTo X="1552.061" Y="2455.406" Z="1.147959" />
            <CustomBehavior File="MyCTM" X="1347.202" Y="2398.23" Z="-19.70461" />
            <CustomBehavior File="MyCTM" X="1347.202" Y="2398.23" Z="-86.13209" />
            <CustomBehavior File="MyCTM" X="1469.176" Y="2437.71" Z="-68.89151" />
        </If>
        <!-- 297 -->
        <!-- TODO get subzone id -->
        <If Condition="DoQuest(40927) &amp;&amp; Me.MinimapZoneText == &quot;Sashj'tar Grotto&quot; &amp;&amp; !IsObjectiveComplete(1, 40927)">
            <CustomBehavior File="RunCode" Code="PrintStep(297)" />
            <CustomBehavior File="InteractWith" QuestId="40927" MobId="102388" NumOfTimes="1" InteractByGossipOptions="1">
                <HuntingGrounds>
                    <Hotspot X="1485.502" Y="2441.157" Z="-67.66195" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 298 -->
        <!-- TODO get subzone id -->
        <If Condition="DoQuest(40927) &amp;&amp; Me.MinimapZoneText == &quot;Sashj'tar Grotto&quot; &amp;&amp; !IsObjectiveComplete(2, 40927)">
            <CustomBehavior File="RunCode" Code="PrintStep(298)" />
            <CustomBehavior File="KillUntilComplete" MobIds="102388" TerminateWhen="IsObjectiveComplete(2, 40927)">
                <HuntingGrounds>
                    <Hotspot X="1485.502" Y="2441.157" Z="-67.66195" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 299 -->
        <!-- TODO get subzone id -->
        <If Condition="DoQuest(40927) &amp;&amp; Me.MinimapZoneText == &quot;Sashj'tar Grotto&quot; &amp;&amp; !IsObjectiveComplete(3, 40927)">
            <CustomBehavior File="RunCode" Code="PrintStep(299)" />
            <CustomBehavior File="InteractWith" QuestId="40927" MobId="246923" NumOfTimes="1">
                <HuntingGrounds>
                    <Hotspot X="1485.502" Y="2441.157" Z="-67.66195" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 300 -->
        <If Condition="HasQuest(40927) || NeedsQuest(41426,41709)">
            <CustomBehavior File="RunCode" Code="PrintStep(300)" />
            <TurnIn Nav="Fly" QuestName="Jandvik's Last Hope" QuestId="40927" TurnInName="Toryl" TurnInId="102390" X="1491.591" Y="2440.221" Z="-67.3662" />
            <PickUp Nav="Fly" QuestName="Against Their Will" QuestId="41426" GiverName="Toryl" GiverId="102390" X="1491.591" Y="2440.221" Z="-67.3662" />
            <PickUp Nav="Fly" QuestName="Breaking Down the Big Guns" QuestId="41709" GiverName="Toryl" GiverId="102390" X="1491.591" Y="2440.221" Z="-67.3662" />
        </If>
        <!-- 301 -->
        <If Condition="NeedsQuest(41606,41425)">
            <CustomBehavior File="RunCode" Code="PrintStep(301)" />
            <PickUp Nav="Fly" QuestName="Finding Brytag" QuestId="41606" GiverName="Kell" GiverId="104630" X="1491.591" Y="2440.221" Z="-67.3662" />
            <PickUp Nav="Fly" QuestName="Sunken Foes" QuestId="41425" GiverName="Kell" GiverId="104630" X="1491.591" Y="2440.221" Z="-67.3662" />
        </If>
        <!-- 302 -->
        <If Condition="NeedsQuest(41410)">
            <CustomBehavior File="RunCode" Code="PrintStep(302)" />
            <CustomBehavior File="MyCTM" X="1373.943" Y="2397.92" Z="-83.48626" />
            <CustomBehavior File="MyCTM" X="1214.762" Y="2373.221" Z="-88.2552" />
            <CustomBehavior File="MyCTM" X="1213.779" Y="2365.122" Z="-112.4378" />
            <CustomBehavior File="MyCTM" X="1230.122" Y="2354.766" Z="-117.2635" />
            <PickUp Nav="Fly" QuestName="Dry Powder" QuestId="41410" GiverName="Fjolrik" GiverId="104586" X="1230.122" Y="2354.766" Z="-117.2635" />
        </If>
        <!-- 303 -->
        <If Condition="DoQuest(41410)">
            <CustomBehavior File="RunCode" Code="PrintStep(303)" />
        </If>
        <While Condition="DoQuest(41410)">
            <If Condition="DoQuest(41410)">
                <CustomBehavior File="MyCTM" X="1086.79" Y="2414.884" Z="-124.6144" />
                <CustomBehavior File="InteractWith" QuestId="41410" MobId="247851" NumOfTimes="1" X="1086.79" Y="2414.884" Z="-124.6144" />
            </If>
            <If Condition="DoQuest(41410)">
                <CustomBehavior File="MyCTM" X="1159.818" Y="2407.925" Z="-118.2961" />
                <CustomBehavior File="InteractWith" QuestId="41410" MobId="247851" NumOfTimes="1" X="1159.818" Y="2407.925" Z="-118.2961" />
            </If>
            <If Condition="DoQuest(41410)">
                <CustomBehavior File="MyCTM" X="1156.019" Y="2448.085" Z="-117.737" />
                <CustomBehavior File="InteractWith" QuestId="41410" MobId="247851" NumOfTimes="1" X="1156.019" Y="2448.085" Z="-117.737" />
            </If>
            <If Condition="DoQuest(41410)">
                <CustomBehavior File="MyCTM" X="1076.368" Y="2359.689" Z="-124.9511" />
                <CustomBehavior File="InteractWith" QuestId="41410" MobId="247851" NumOfTimes="1" X="1076.368" Y="2359.689" Z="-124.9511" />
            </If>
            <If Condition="DoQuest(41410)">
                <CustomBehavior File="MyCTM" X="1174.899" Y="2384.792" Z="-99.47632" />
                <CustomBehavior File="InteractWith" QuestId="41410" MobId="247851" NumOfTimes="1" X="1174.899" Y="2384.792" Z="-99.47632" />
            </If>
            <If Condition="DoQuest(41410)">
                <CustomBehavior File="MyCTM" X="1037.993" Y="2399.403" Z="-124.8226" />
                <CustomBehavior File="InteractWith" QuestId="41410" MobId="247851" NumOfTimes="1" X="1037.993" Y="2399.403" Z="-124.8226" />
            </If>
        </While>
        <!-- 304 -->
        <If Condition="DoQuest(41425) &amp;&amp; !IsObjectiveComplete(2,41425)">
            <CustomBehavior File="RunCode" Code="PrintStep(304)" />
        </If>
        <While Condition="DoQuest(41425) &amp;&amp; !IsObjectiveComplete(2,41425)">
            <If Condition="!IsObjectiveComplete(2,41425)">
                <CustomBehavior File="MyCTM" X="1086.79" Y="2414.884" Z="-124.6144" />
            </If>
            <If Condition="!IsObjectiveComplete(2,41425)">
                <CustomBehavior File="MyCTM" X="1159.818" Y="2407.925" Z="-118.2961" />
            </If>
            <If Condition="!IsObjectiveComplete(2,41425)">
                <CustomBehavior File="MyCTM" X="1156.019" Y="2448.085" Z="-117.737" />
            </If>
            <If Condition="!IsObjectiveComplete(2,41425)">
                <CustomBehavior File="MyCTM" X="1076.368" Y="2359.689" Z="-124.9511" />
            </If>
            <If Condition="!IsObjectiveComplete(2,41425)">
                <CustomBehavior File="MyCTM" X="1174.899" Y="2384.792" Z="-99.47632" />
            </If>
            <If Condition="!IsObjectiveComplete(2,41425)">
                <CustomBehavior File="MyCTM" X="1037.993" Y="2399.403" Z="-124.8226" />
            </If>
        </While>
        <!-- 305 -->
        <If Condition="HasQuest(41410) || NeedsQuest(41409)">
            <CustomBehavior File="RunCode" Code="PrintStep(305)" />
            <CustomBehavior File="MyCTM" X="1161.235" Y="2399.082" Z="-81.7067" />
            <CustomBehavior File="MyCTM" X="1230.122" Y="2354.766" Z="-117.2635" />
            <TurnIn Nav="Fly" QuestName="Dry Powder" QuestId="41410" TurnInName="Fjolrik" TurnInId="104586" />
            <PickUp Nav="Fly" QuestName="Timing Is Everything" QuestId="41409" GiverName="Fjolrik" GiverId="104586" />
        </If>
        <!-- 306 -->
        <If Condition="DoQuest(41709)">
            <CustomBehavior File="RunCode" Code="PrintStep(306)" />
        </If>
        <While Condition="DoQuest(41709)">
            <CustomBehavior File="MyCTM" X="1161.235" Y="2399.082" Z="-81.7067" />
            <If Condition="DoQuest(41709)">
                <CustomBehavior File="MyCTM" X="1190.844" Y="2336.271" Z="-120.429" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
            </If>
            <If Condition="DoQuest(41709)">
                <CustomBehavior File="MyCTM" X="1220.634" Y="2397.576" Z="-119.5027" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
            </If>
            <If Condition="DoQuest(41709)">
                <CustomBehavior File="MyCTM" X="1205.559" Y="2304.373" Z="-113.2354" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
            </If>
            <If Condition="DoQuest(41709)">
                <CustomBehavior File="MyCTM" X="1255.629" Y="2412.495" Z="-121.5674" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
            </If>
            <If Condition="DoQuest(41709)">
                <CustomBehavior File="MyCTM" X="1152.208" Y="2300.165" Z="-124.9997" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
            </If>
            <If Condition="DoQuest(41709)">
                <CustomBehavior File="MyCTM" X="1263.59" Y="2291.908" Z="-105.7302" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
            </If>
        </While>
        <!-- 307 -->
        <CustomBehavior File="Hooks\Avoid" AvoidName="avoid_harpoons" ObjectIds="104638" Radius="20" />
        <If Condition="DoQuest(41426)">
            <CustomBehavior File="RunCode" Code="PrintStep(307)" />
        </If>
        <While Condition="DoQuest(41426)">
            <CustomBehavior File="MyCTM" X="1161.235" Y="2399.082" Z="-81.7067" />
            <If Condition="DoQuest(41426)">
                <CustomBehavior File="MyCTM" X="1207.944" Y="2361.318" Z="-128.4111" />
                <CustomBehavior File="InteractWith" QuestId="41426" MobId="103529" NumOfTimes="1" X="1207.944" Y="2361.318" Z="-128.4111" />
            </If>
            <If Condition="DoQuest(41426)">
                <CustomBehavior File="MyCTM" X="1243.842" Y="2375.087" Z="-127.5444" />
                <CustomBehavior File="InteractWith" QuestId="41426" MobId="103529" NumOfTimes="1" X="1243.842" Y="2375.087" Z="-127.5444" />
            </If>
            <If Condition="DoQuest(41426)">
                <CustomBehavior File="MyCTM" X="1283.188" Y="2374.715" Z="-121.3691" />
                <CustomBehavior File="InteractWith" QuestId="41426" MobId="103529" NumOfTimes="1" X="1283.188" Y="2374.715" Z="-121.3691" />
            </If>
            <If Condition="DoQuest(41426)">
                <CustomBehavior File="MyCTM" X="1298.106" Y="2409.845" Z="-120.776" />
                <CustomBehavior File="InteractWith" QuestId="41426" MobId="103529" NumOfTimes="1" X="1298.106" Y="2409.845" Z="-120.776" />
            </If>
            <If Condition="DoQuest(41426)">
                <CustomBehavior File="MyCTM" X="1309.351" Y="2454.247" Z="-117.6289" />
                <CustomBehavior File="InteractWith" QuestId="41426" MobId="103529" NumOfTimes="1" X="1309.351" Y="2454.247" Z="-117.6289" />
            </If>
            <If Condition="DoQuest(41426)">
                <CustomBehavior File="MyCTM" X="1327" Y="2358.026" Z="-106.8367" />
                <CustomBehavior File="InteractWith" QuestId="41426" MobId="103529" NumOfTimes="1" X="1327" Y="2358.026" Z="-106.8367" />
            </If>
        </While>
        <CustomBehavior File="Hooks\Avoid" AvoidName="avoid_harpoons" Command="Remove" />
        <!-- 308 -->
        <If Condition="DoQuest(41425)">
            <CustomBehavior File="RunCode" Code="PrintStep(308)" />
        </If>
        <While Condition="DoQuest(41425)">
            <CustomBehavior File="MyCTM" X="1226.869" Y="2347.387" Z="-92.60435" />
            <If Condition="DoQuest(41425)">
                <CustomBehavior File="MyCTM" X="1252.755" Y="2313.039" Z="-110.2418" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
            </If>
            <If Condition="DoQuest(41425)">
                <CustomBehavior File="MyCTM" X="1296.814" Y="2382.969" Z="-111.134" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
            </If>
            <If Condition="DoQuest(41425)">
                <CustomBehavior File="MyCTM" X="1181.295" Y="2316.043" Z="-120.9286" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
            </If>
            <If Condition="DoQuest(41425)">
                <CustomBehavior File="MyCTM" X="1306.022" Y="2301.913" Z="-101.9073" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
            </If>
            <If Condition="DoQuest(41425)">
                <CustomBehavior File="MyCTM" X="1136.547" Y="2370.179" Z="-126.337" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
            </If>
            <If Condition="DoQuest(41425)">
                <CustomBehavior File="MyCTM" X="1296.814" Y="2382.969" Z="-111.134" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
            </If>
        </While>
        <!-- 309 - 310 -->
        <If Condition="DoQuest(41409)">
            <CustomBehavior File="RunCode" Code="PrintStep(309,310)" />
        </If>
        <While Condition="DoQuest(41409)">
            <If Condition="!Me.IsOnTransport">
                <CustomBehavior File="MyCTM" X="1235.976" Y="2383.065" Z="-27.22905" />
                <CustomBehavior File="RunCode">
                    <![CDATA[
                        var turtle = Unit(104242);
                        turtle.Target();

                        while(!IsObjectiveComplete(1,41409))
                        {
                            Logging.Write(System.Windows.Media.Colors.Yellow, "[Zak]: Chasing Turtle");

                            Vector3 kLoc = Me.CurrentTarget.Location;

                            Navigator.MoveTo(kLoc);

                            await Coroutine.Sleep(1000);

                            Me.CurrentTarget.Interact();

                            await Coroutine.Sleep(3000);
                        }
                    ]]>
                </CustomBehavior>
            </If>
            <CustomBehavior File="Vehicles\NoControlVehicle" QuestId="41409" VehicleMountId="104242" TargetId="103613" TargetId2="103610" TargetId3="103611" AttackButton="1" OftenToUse="5000" NumOfTimes="500" VehicleId="104242" MaxRange="1000" />
        </While>
        <!-- 311 -->
        <If Condition="QuestDone(41606) || NeedsQuest(40364,41618)">
            <CustomBehavior File="RunCode" Code="PrintStep(311)" />
            <CustomBehavior File="MyCTM" X="1116.012" Y="2486.169" Z="-55.32464" />
            <CustomBehavior File="MyCTM" X="1101.486" Y="2499.922" Z="-100.9398" />
            <TurnIn Nav="Fly" QuestName="Finding Brytag" QuestId="41606" TurnInName="Brytag" TurnInId="104406" X="1101.486" Y="2499.922" Z="-100.9398" />
            <PickUp Nav="Fly" QuestName="Bubble Trouble" QuestId="40364" GiverName="Brytag" GiverId="104406" X="1101.486" Y="2499.922" Z="-100.9398" />
            <PickUp Nav="Fly" QuestName="The Seawarden" QuestId="41618" GiverName="Brytag" GiverId="104406" X="1101.486" Y="2499.922" Z="-100.9398" />
        </If>
        <!-- 312 -->
        <If Condition="DoQuest(40364) &amp;&amp; !IsObjectiveComplete(1,40364)">
            <CustomBehavior File="RunCode" Code="PrintStep(312)" />
            <CustomBehavior File="MyCTM" X="1156.773" Y="2489.087" Z="-113.2819" />
            <CustomBehavior File="InteractWith" QuestId="40364" MobId="248080" NumOfTimes="1" X="1156.773" Y="2489.087" Z="-113.2819" />
        </If>
        <!-- 313 -->
        <If Condition="DoQuest(41618) &amp;&amp; !IsObjectiveComplete(1,41618)">
            <CustomBehavior File="RunCode" Code="PrintStep(313)" />
            <CustomBehavior File="MyCTM" X="1028.103" Y="2495.825" Z="-9.728177" />
            <CustomBehavior File="MyCTM" X="1014.856" Y="2500.98" Z="-54.37667" />
            <CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[Zak]: Waiting for the seawarden, might take a minute&quot;);" />
            <CustomBehavior File="KillUntilComplete" MobIds="104459" TerminateWhen="IsObjectiveComplete(1, 41618)" X="1014.856" Y="2500.98" Z="-54.37667" />
        </If>
        <!-- 314 -->
        <If Condition="DoQuest(40364)">
            <CustomBehavior File="RunCode" Code="PrintStep(314)" />
        </If>
        <While Condition="DoQuest(40364) &amp;&amp; !IsObjectiveComplete(2,40364)">
            <CustomBehavior File="MyCTM" X="1028.103" Y="2495.825" Z="-9.728177" />
            <If Condition="!IsObjectiveComplete(2,40364)">
                <CustomBehavior File="MyCTM" X="964.7743" Y="2434.715" Z="-40.41428" />
                <CustomBehavior File="InteractWith" QuestId="40364" MobId="99825" NumOfTimes="1" X="964.7743" Y="2434.715" Z="-40.41428" />
            </If>
            <If Condition="!IsObjectiveComplete(2,40364)">
                <CustomBehavior File="MyCTM" X="1007.304" Y="2461.592" Z="-39.99683" />
                <CustomBehavior File="InteractWith" QuestId="40364" MobId="99825" NumOfTimes="1" X="1007.304" Y="2461.592" Z="-39.99683" />
            </If>
            <If Condition="!IsObjectiveComplete(2,40364)">
                <CustomBehavior File="MyCTM" X="1025.712" Y="2497.387" Z="-50.39842" />
                <CustomBehavior File="InteractWith" QuestId="40364" MobId="99825" NumOfTimes="1" X="1025.712" Y="2497.387" Z="-50.39842" />
            </If>
            <If Condition="!IsObjectiveComplete(2,40364)">
                <CustomBehavior File="MyCTM" X="1033.965" Y="2536.268" Z="-58.53989" />
                <CustomBehavior File="InteractWith" QuestId="40364" MobId="99825" NumOfTimes="1" X="1033.965" Y="2536.268" Z="-58.53989" />
            </If>
            <If Condition="!IsObjectiveComplete(2,40364)">
                <CustomBehavior File="MyCTM" X="1088.811" Y="2514.337" Z="-66.96291" />
                <CustomBehavior File="InteractWith" QuestId="40364" MobId="99825" NumOfTimes="1" X="1088.811" Y="2514.337" Z="-66.96291" />
            </If>
            <If Condition="!IsObjectiveComplete(2,40364)">
                <CustomBehavior File="MyCTM" X="1090.429" Y="2542.169" Z="-67.34298" />
                <CustomBehavior File="InteractWith" QuestId="40364" MobId="99825" NumOfTimes="1" X="1090.429" Y="2542.169" Z="-67.34298" />
            </If>
            <If Condition="!IsObjectiveComplete(2,40364)">
                <CustomBehavior File="MyCTM" X="1090.429" Y="2542.169" Z="-67.34298" />
                <CustomBehavior File="InteractWith" QuestId="40364" MobId="99825" NumOfTimes="1" X="1090.429" Y="2542.169" Z="-67.34298" />
            </If>
            <If Condition="!IsObjectiveComplete(2,40364)">
                <CustomBehavior File="MyCTM" X="1078.066" Y="2459.576" Z="-93.50523" />
                <CustomBehavior File="InteractWith" QuestId="40364" MobId="99825" NumOfTimes="1" X="1078.066" Y="2459.576" Z="-93.50523" />
            </If>
        </While>
        <!-- 315 -->
        <If Condition="QuestDone(40364) || QuestDone(41618)">
            <CustomBehavior File="RunCode" Code="PrintStep(315)" />
            <CustomBehavior File="MyCTM" X="1116.012" Y="2486.169" Z="-55.32464" />
            <CustomBehavior File="MyCTM" X="1101.486" Y="2499.922" Z="-100.9398" />
            <TurnIn Nav="Fly" QuestName="The Seawarden" QuestId="41618" TurnInName="Brytag" TurnInId="104406" X="1101.486" Y="2499.922" Z="-100.9398" />
            <TurnIn Nav="Fly" QuestName="Bubble Trouble" QuestId="40364" TurnInName="Brytag" TurnInId="104406" X="1101.486" Y="2499.922" Z="-100.9398" />
        </If>
        <!-- 316 -->
        <If Condition="QuestDone(41425) || QuestDone(41409)">
            <CustomBehavior File="RunCode" Code="PrintStep(316)" />
            <!-- Check if azuregale bay -->
            <If Condition="Me.SubZoneId == 7917">
                <CustomBehavior File="MyCTM" X="1102.069" Y="2499.355" Z="-46.23845" />
                <CustomBehavior File="MyCTM" X="1371.852" Y="2536.984" Z="-38.96476" />
                <CustomBehavior File="MyCTM" X="1478.752" Y="2625.397" Z="0.9377241" />
            </If>
            <TurnIn Nav="Fly" QuestName="Sunken Foes" QuestId="41425" TurnInName="Brandolf" TurnInId="102845" X="1622.397" Y="2733.718" Z="22.69972" />
            <TurnIn Nav="Fly" QuestName="Timing Is Everything" QuestId="41409" TurnInName="Brandolf" TurnInId="102845" X="1622.397" Y="2733.718" Z="22.69972" />
        </If>
        <!-- 317 -->
        <If Condition="HasQuest(41426) || HasQuest(41709) || NeedsQuest(40336)">
            <CustomBehavior File="RunCode" Code="PrintStep(317)" />
            <TurnIn Nav="Fly" QuestName="Against Their Will" QuestId="41426" TurnInName="Toryl" TurnInId="102410" X="1637.895" Y="2730.441" Z="22.71786" />
            <TurnIn Nav="Fly" QuestName="Breaking Down the Big Guns" QuestId="41709" TurnInName="Toryl" TurnInId="102410" X="1637.895" Y="2730.441" Z="22.71786" />
            <PickUp Nav="Fly" QuestName="Turning the Tidemistress" QuestId="40336" GiverName="Toryl" GiverId="102410" X="1637.895" Y="2730.441" Z="22.71786" />
        </If>
        <!-- 318 -->
        <If Condition="NeedsQuest(41001,41499)">
            <CustomBehavior File="RunCode" Code="PrintStep(318)" />
            <PickUp Nav="Fly" QuestName="Shatter the Sashj'tar" QuestId="41001" GiverName="Brandolf" GiverId="102845" X="1622.397" Y="2733.718" Z="22.69972" />
            <PickUp Nav="Fly" QuestName="Squid Out of Water" QuestId="41499" GiverName="Brandolf" GiverId="102845" X="1622.397" Y="2733.718" Z="22.69972" />
        </If>
        <!-- 319 -->
        <If Condition="(DoQuest(40336) || DoQuest(41001) || DoQuest(41499)) &amp;&amp; Me.MinimapZoneText != &quot;Sashj'tar Ruins&quot;">
            <CustomBehavior File="RunCode" Code="PrintStep(319)" />
            <MoveTo X="1445.025" Y="2143.352" Z="1.70567" />
            <CustomBehavior File="ForcedDismount" />
        </If>
        <!-- dismount to prevent pulling a ton of mobs -->
        <UseMount Value="false" />
        <If Condition="DoQuest(40336) &amp;&amp; !IsObjectiveComplete(1,40336)">
            <CustomBehavior File="InteractWith" QuestId="40336" MobId="104830" NumOfTimes="1" X="1290.31" Y="2086.315" Z="16.86522" />
            <CustomBehavior File="WaitTimer" WaitTime="5000" />
        </If>
        <!-- 320 -->
        <If Condition="DoQuest(40336) &amp;&amp; !IsObjectiveComplete(2,40336)">
            <CustomBehavior File="RunCode" Code="PrintStep(320)" />
            <If Condition="!Me.IsOnTransport">
                <CustomBehavior File="InteractWith" QuestId="40336" MobId="104821" NumOfTimes="1" X="1290.31" Y="2086.315" Z="16.86522" />
                <CustomBehavior File="WaitTimer" WaitTime="2000" />
            </If>
            <CustomBehavior File="RunCode">
                <![CDATA[
                    var mistress = Unit(104359);
                    mistress.Target();
                    mistress.Face();
                ]]>
            </CustomBehavior>
            <CustomBehavior File="RunCode" Code="Styx.Helpers.KeyboardManager.KeyUpDown((char)System.Windows.Forms.Keys.D1);" />
            <CustomBehavior File="WaitTimer" WaitTime="3000" />
            <CustomBehavior File="KillUntilComplete" MobIds="104359,104829" TerminateWhen="IsObjectiveComplete(2, 40336)" X="1290.31" Y="2086.315" Z="16.86522" />
        </If>
        <!-- 321 -->
        <If Condition="DoQuest(41499)">
            <CustomBehavior File="RunCode" Code="PrintStep(321)" />
            <CustomBehavior File="InteractWith" QuestId="41499" MobId="100179" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1,41499)">
                <HuntingGrounds>
                    <Hotspot X="1341.606" Y="2108.567" Z="17.21071" />
                    <Hotspot X="1277.049" Y="2035.984" Z="16.87943" />
                    <Hotspot X="1239.421" Y="2106.579" Z="11.27516" />
                    <Hotspot X="1167.091" Y="2072.183" Z="3.979312" />
                    <Hotspot X="1160.881" Y="2035.081" Z="1.41447" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 322 -->
        <If Condition="DoQuest(41001)">
            <CustomBehavior File="RunCode" Code="PrintStep(322)" />
            <CustomBehavior File="KillUntilComplete" QuestId="41001" MobIds="100999,100998" TerminateWhen="IsObjectiveComplete(1,41001)">
                <HuntingGrounds>
                    <Hotspot X="1341.606" Y="2108.567" Z="17.21071" />
                    <Hotspot X="1277.049" Y="2035.984" Z="16.87943" />
                    <Hotspot X="1239.421" Y="2106.579" Z="11.27516" />
                    <Hotspot X="1167.091" Y="2072.183" Z="3.979312" />
                    <Hotspot X="1160.881" Y="2035.081" Z="1.41447" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 323 -->
        <If Condition="HasQuest(41001) || HasQuest(41499)">
            <CustomBehavior File="RunCode" Code="PrintStep(323)" />
            <!-- TODO get subzoneid -->
            <If Condition="Me.MinimapZoneText == &quot;Sashj'tar Ruins&quot;">
                <MoveTo X="1445.025" Y="2143.352" Z="1.70567" />
            </If>
            <UseMount Value="true" />
            <TurnIn Nav="Fly" QuestName="Shatter the Sashj'tar" QuestId="41001" TurnInName="Brandolf" TurnInId="102845" X="1622.397" Y="2733.718" Z="22.69972" />
            <TurnIn Nav="Fly" QuestName="Squid Out of Water" QuestId="41499" TurnInName="Brandolf" TurnInId="102845" X="1622.397" Y="2733.718" Z="22.69972" />
        </If>
        <If Condition="HasQuest(40336)">
            <CustomBehavior File="RunCode" Code="PrintStep(324)" />
            <TurnIn Nav="Fly" QuestName="Turning the Tidemistress" QuestId="40336" TurnInName="Toryl" TurnInId="102410" X="1637.895" Y="2730.441" Z="22.71786" />
        </If>
        <UseMount Value="true" />
        <!-- END SWIMMING QUESTS! -->
        <!-- 325 -->
        <If Condition="HasQuest(40617) || NeedsQuest(41230)">
            <CustomBehavior File="RunCode" Code="PrintStep(325)" />
            <TurnIn Nav="Fly" QuestName="Turn Around, Nighteyes" QuestId="40617" TurnInName="Lilryia Dawnwind" TurnInId="100775" X="1631.908" Y="3227.767" Z="161.5218" />
            <PickUp Nav="Fly" QuestName="Trapping Evolved" QuestId="41230" GiverName="Lilryia Dawnwind" GiverId="100775" X="1631.908" Y="3227.767" Z="161.5218" />
        </If>
        <!-- 326 -->
        <If Condition=" NeedsQuest(41215)">
            <CustomBehavior File="RunCode" Code="PrintStep(326)" />
            <PickUp Nav="Fly" QuestName="They Become The Hunted" QuestId="41215" GiverName="Nighteyes" GiverId="106897" X="1631.908" Y="3227.767" Z="161.5218" />
        </If>
        <!-- dismount to prevent pulling a ton of mobs -->
        <UseMount Value="false" />
        <!-- 327 -->
        <If Condition="DoQuest(41230) &amp;&amp; !IsObjectiveComplete(1,41230)">
            <CustomBehavior File="RunCode" Code="PrintStep(327)" />
            <CustomBehavior File="InteractWith" QuestId="41230" MobId="247412" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1,41230)">
                <HuntingGrounds>
                    <Hotspot X="1738.568" Y="3313.037" Z="176.8676" />
                    <Hotspot X="1828.432" Y="3313.981" Z="188.6931" />
                    <Hotspot X="1832.023" Y="3206.916" Z="193.6547" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 328 -->
        <If Condition="DoQuest(41215) &amp;&amp; !IsObjectiveComplete(1,41215)">
            <CustomBehavior File="RunCode" Code="PrintStep(328)" />
            <CustomBehavior File="KillUntilComplete" MobIds="100778" TerminateWhen="IsObjectiveComplete(1, 41215)">
                <HuntingGrounds>
                    <Hotspot X="1738.568" Y="3313.037" Z="176.8676" />
                    <Hotspot X="1828.432" Y="3313.981" Z="188.6931" />
                    <Hotspot X="1832.023" Y="3206.916" Z="193.6547" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <UseMount Value="true" />
        <!-- 329 -->
        <If Condition="HasQuest(41230)">
            <CustomBehavior File="RunCode" Code="PrintStep(329)" />
            <TurnIn Nav="Fly" QuestName="Trapping Evolved" QuestId="41230" TurnInName="Lilryia Dawnwind" TurnInId="100775" X="1631.908" Y="3227.767" Z="161.5218" />
        </If>
        <!-- 330 -->
        <If Condition="HasQuest(41215)">
            <CustomBehavior File="RunCode" Code="PrintStep(330)" />
            <TurnIn Nav="Fly" QuestName="They Become The Hunted" QuestId="41215" TurnInName="Nighteyes" TurnInId="106897" X="1631.908" Y="3227.767" Z="161.5218" />
        </If>
        <!-- 331 -->
        <If Condition="NeedsQuest(43587)">
            <CustomBehavior File="RunCode" Code="PrintStep(331)" />
            <PickUp Nav="Fly" QuestName="Leyline Feed: Elor'shan" QuestId="43587" GiverName="Leyline Feed" GiverId="252258" X="2043.121" Y="3063.297" Z="188.2964" />
        </If>
        <!-- 332 -->
        <If Condition="HasQuest(43587) &amp;&amp; !HasAncientMana(250)">
            <CustomBehavior File="RunCode" Code="PrintStep(332)" />
            <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 250)" />
            <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
        </If>
        <!-- 333 -->
        <If Condition="HasQuest(43587)">
            <CustomBehavior File="RunCode" Code="PrintStep(333)" />
            <TurnIn Nav="Fly" QuestName="Leyline Feed: Elor'shan" QuestId="43587" TurnInName="Leyline Feed" TurnInId="252258" X="2043.121" Y="3063.297" Z="188.2964" />
        </If>
        <!-- 334 -->
        <If Condition="NeedsQuest(41877) &amp;&amp; IsThalyssraThirsty()">
            <If Condition="!HasAncientMana(50)">
                <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 50)" />
                <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
            </If>
            <CustomBehavior File="InteractWith" MobId="97140" X="1724.658" Y="4614.287" Z="123.7945" />
            <CustomBehavior File="RunMacro" Macro="/click GossipTitleButton1" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
        </If>
        <If Condition="NeedsQuest(41877)">
            <CustomBehavior File="RunCode" Code="PrintStep(334)" />
            <PickUp Nav="Fly" QuestName="Lady Lunastre" QuestId="41877" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1726.682" Y="4602.456" Z="123.803" />
        </If>
        <!-- 335 -->
        <If Condition="NeedsQuest(44495) &amp;&amp; IsValtroisThirsty()">
            <If Condition="!HasAncientMana(50)">
                <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 50)" />
                <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
            </If>
            <CustomBehavior File="InteractWith" MobId="103155" X="1731.536" Y="4606.796" Z="123.8035" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
        </If>
        <If Condition="NeedsQuest(44495)">
            <CustomBehavior File="RunCode" Code="PrintStep(335)" />
            <PickUp Nav="Fly" QuestName="Leyline Master" QuestId="44495" GiverName="Arcanist Valtrois" GiverId="103155" X="1726.682" Y="4602.456" Z="123.803" />
        </If>
        <!-- 336 -->
        <If Condition="HasQuest(44495)">
            <CustomBehavior File="RunCode" Code="PrintStep(336)" />
            <TurnIn Nav="Fly" QuestName="Leyline Master" QuestId="44495" TurnInName="Arcanist Valtrois" TurnInId="103155" X="1726.682" Y="4602.456" Z="123.803" />
        </If>
        <!-- 337 -->
        <CustomBehavior File="Hooks\DoWhen" UseWhen="ShouldCastMask()" LogExecution="true" ActivityName="apply_mask" StopMovingToConductActivity="true" AllowUseWhileMounted="true">
            <CustomBehavior File="RunCode" Code="CastMask()" />
            <CustomBehavior File="WaitTimer" WaitTime="4000" />
        </CustomBehavior>
        <CustomBehavior File="Hooks\Avoid" AvoidName="MaskDetectors" ObjectIds="105759, 99755, 113633, 107717, 107727, 113738, 114470, 107521, 105292" Radius="20" />
        <If Condition="DoQuest(41877)">
            <CustomBehavior File="RunCode" Code="PrintStep(337)" />
            <If Condition="!IsInCity()">
                <MoveTo X="1482.949" Y="4287.364" Z="113.0722" />
                <CustomBehavior File="ForcedDismount" />
            </If>
            <CustomBehavior File="InteractWith" QuestId="41877" MobId="107632" NumOfTimes="1" InteractByGossipOptions="1" X="1154.294" Y="4041.86" Z="85.41108" />
            <CustomBehavior File="WaitTimer" WaitTime="50000" />
        </If>
        <!-- 338 -->
        <If Condition="HasQuest(41877) || NeedsQuest(40746)">
            <CustomBehavior File="RunCode" Code="PrintStep(338)" />
            <TurnIn Nav="Fly" QuestName="Lady Lunastre" QuestId="41877" TurnInName="Ly'leth Lunastre" TurnInId="107632" X="1154.294" Y="4041.86" Z="85.41108" />
            <PickUp Nav="Fly" QuestName="One of the People" QuestId="40746" GiverName="Ly'leth Lunastre" GiverId="107632" X="1154.294" Y="4041.86" Z="85.41108" />
        </If>
        <!-- 339 -->
        <If Condition="HasQuest(40746) || NeedsQuest(41148)">
            <CustomBehavior File="RunCode" Code="PrintStep(339)" />
            <TurnIn Nav="Fly" QuestName="One of the People" QuestId="40746" TurnInName="Vanthir" TurnInId="107598" X="358.6021" Y="3975.843" Z="1.388276" />
            <PickUp Nav="Fly" QuestName="Dispensing Compassion" QuestId="41148" GiverName="Vanthir" GiverId="107598" X="358.6021" Y="3975.843" Z="1.388276" />
        </If>
        <!-- 340 - 343 -->
        <If Condition="DoQuest(41148)">
            <CustomBehavior File="RunCode" Code="PrintStep(340,341,342,343)" />
            <!-- i tried just using waypoints here and it was really buggy :( -->
            <MoveTo X="304.4232" Y="3981.072" Z="3.378614" />
            <CustomBehavior File="MyCTM" X="302.6725" Y="3982.812" Z="3.378596" />
            <CustomBehavior File="InteractWith" MobIds="108346" NumOfTimes="1" InteractByGossipOptions="1" CollectionDistance="5" />
            <MoveTo X="401.2148" Y="3942.28" Z="1.388763" />
            <CustomBehavior File="InteractWith" MobIds="108347" NumOfTimes="1" InteractByGossipOptions="1" CollectionDistance="5" />
            <MoveTo X="476.4376" Y="3993.969" Z="3.234008" />
            <CustomBehavior File="InteractWith" MobIds="108345" NumOfTimes="1" InteractByGossipOptions="1" CollectionDistance="5" />
            <MoveTo X="390.9731" Y="4067.862" Z="1.388191" />
            <CustomBehavior File="InteractWith" MobIds="108344" NumOfTimes="1" InteractByGossipOptions="1" CollectionDistance="5" />
        </If>
        <!-- 344 -->
        <If Condition="HasQuest(41148) || NeedsQuest(41878)">
            <CustomBehavior File="RunCode" Code="PrintStep(344)" />
            <TurnIn Nav="Fly" QuestName="Dispensing Compassion" QuestId="41148" TurnInName="Vanthir" TurnInId="107598" X="358.6021" Y="3975.843" Z="1.388276" />
            <PickUp Nav="Fly" QuestName="The Gondolier" QuestId="41878" GiverName="Vanthir" GiverId="107598" X="358.6021" Y="3975.843" Z="1.388276" />
        </If>
        <!-- 345 -->
        <If Condition="NeedsQuest(40947)">
            <CustomBehavior File="RunCode" Code="PrintStep(345)" />
            <PickUp Nav="Fly" QuestName="Special Delivery" QuestId="40947" GiverName="Silgryn" GiverId="108411" X="358.6021" Y="3975.843" Z="1.388276" />
        </If>
        <!-- 346 -->
        <If Condition="DoQuest(40947)">
            <CustomBehavior File="RunCode" Code="PrintStep(346)" />
        </If>
        <While Condition="DoQuest(40947)">
            <CustomBehavior File="ForcedMount" />
            <CustomBehavior File="InteractWith" NumOfTimes="1" MobState="Alive">
                <HuntingGrounds>
                    <Hotspot X="504.791" Y="3952.093" Z="1.493344" />
                    <Hotspot X="554.4365" Y="3891.466" Z="5.685683" />
                    <Hotspot X="668.2935" Y="3927.591" Z="5.685683" />
                    <Hotspot X="779.6024" Y="3992.183" Z="5.773875" />
                </HuntingGrounds>
                <PursuitList>
                    <PursueUnit Id="106919" Priority="600" />
                </PursuitList>
            </CustomBehavior>
            <CustomBehavior File="InteractWith" MobIds="106919" NumOfTimes="1" MobState="Dead"></CustomBehavior>
        </While>
        <!-- 347 -->
        <If Condition="DoQuest(41878)">
            <CustomBehavior File="RunCode" Code="PrintStep(347)" />
            <CustomBehavior File="InteractWith" MobIds="107225" NumOfTimes="1" InteractByGossipOptions="1" X="624.457" Y="3818.361" Z="0.6609841" />
        </If>
        <!-- 348 -->
        <If Condition="HasQuest(41878) || NeedsQuest(40727,40730)">
            <CustomBehavior File="RunCode" Code="PrintStep(348)" />
            <TurnIn Nav="Fly" QuestName="The Gondolier" QuestId="41878" TurnInName="Deline" TurnInId="107225" X="630.7161" Y="3819.96" Z="0.6614472" />
            <PickUp Nav="Fly" QuestName="All Along the Waterways" QuestId="40727" GiverName="Deline" GiverId="107225" X="630.7161" Y="3819.96" Z="0.6614472" />
            <PickUp Nav="Fly" QuestName="Redistribution" QuestId="40730" GiverName="Deline" GiverId="107225" X="630.7161" Y="3819.96" Z="0.6614472" />
        </If>
        <CustomBehavior File="Hooks\Avoid" AvoidName="MaskDetectors" Command="Remove" />
        <CustomBehavior File="Hooks\Avoid" AvoidName="MaskDetectors" ObjectIds="114468" Radius="20" />
        <!-- 349 -->
        <If Condition="DoQuest(40730)">
            <CustomBehavior File="RunCode" Code="PrintStep(349)" />
            <CustomBehavior File="InteractWith" MobIds="250240, 250239" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1,40730)">
                <HuntingGrounds>
                    <Hotspot X="504.791" Y="3952.093" Z="1.493344" />
                    <Hotspot X="554.4365" Y="3891.466" Z="5.685683" />
                    <Hotspot X="668.2935" Y="3927.591" Z="5.685683" />
                    <Hotspot X="779.6024" Y="3992.183" Z="5.773875" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <CustomBehavior File="Hooks\Avoid" AvoidName="MaskDetectors" Command="Remove" />
        <!-- avoid list without orbitist -->
        <CustomBehavior File="Hooks\Avoid" AvoidName="MaskDetectors" ObjectIds="99755, 113633, 107717, 107727, 113738, 107521, 105292" Radius="20" />
        <!-- 350 -->
        <!-- <CustomBehavior File="Hooks\DoWhen" ActivityName="apply_mask" Command="Remove" /> -->
        <If Condition="DoQuest(40727)">
            <CustomBehavior File="RunCode" Code="PrintStep(350)" />
            <!-- <MoveTo X="616.3396" Y="3848.406" Z="1.157803" /> -->
            <!-- <CustomBehavior File="RunCode" Code="Me.GetAuraById(202477).TryCancelAura()" /> -->
            <CustomBehavior File="KillUntilComplete" MobIds="106919, 114470, 114468" TerminateWhen="IsObjectiveComplete(1, 40727)">
                <HuntingGrounds>
                    <Hotspot X="627.1587" Y="3870.491" Z="5.682046" />
                    <Hotspot X="539.246" Y="3854.614" Z="5.685413" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- <CustomBehavior File="Hooks\DoWhen" UseWhen="ShouldCastMask()" LogExecution="true" ActivityName="apply_mask" StopMovingToConductActivity="true" AllowUseWhileMounted="true">
            <CustomBehavior File="RunCode" Code="CastMask()" />
            <CustomBehavior File="WaitTimer" WaitTime="4000" />
        </CustomBehavior> -->
        <!-- 351 -->
        <If Condition="HasQuest(40730)">
            <CustomBehavior File="RunCode" Code="PrintStep(351)" />
            <TurnIn Nav="Fly" QuestName="Redistribution" QuestId="40730" TurnInName="Deline" TurnInId="107225" X="630.7161" Y="3819.96" Z="0.6614472" />
        </If>
        <!-- 352 -->
        <If Condition="HasQuest(40947) || NeedsQuest(40745)">
            <CustomBehavior File="RunCode" Code="PrintStep(352)" />
            <TurnIn Nav="Fly" QuestName="Special Delivery" QuestId="40947" TurnInName="Silgryn" TurnInId="107997" X="358.6021" Y="3975.843" Z="1.388276" />
            <PickUp Nav="Fly" QuestName="Shift Change" QuestId="40745" GiverName="Silgryn" GiverId="107997" X="358.6021" Y="3975.843" Z="1.388276" />
        </If>
        <!-- 353 -->
        <If Condition="HasQuest(40727)">
            <CustomBehavior File="RunCode" Code="PrintStep(353)" />
            <TurnIn Nav="Fly" QuestName="All Along the Waterways" QuestId="40727" TurnInName="Vanthir" TurnInId="107598" X="358.6021" Y="3975.843" Z="1.388276" />
        </If>
        <!-- 354 - 356 -->
        <!-- detectors may randomly spawn on top of you during this, not a lot i can do -->
        <If Condition="DoQuest(40745) &amp;&amp; !IsObjectiveComplete(3,40745)">
            <If Condition="!IsObjectiveComplete(1,40745) || !IsObjectiveComplete(2,40745)">
                <CustomBehavior File="RunCode" Code="PrintStep(354,355,356)" />
                <CustomBehavior File="InteractWith" MobIds="107473" NumOfTimes="1" X="528.2327" Y="4086.119" Z="6.427046" />
                <CustomBehavior File="WaitTimer" WaitTime="12000" />
                <CustomBehavior File="RunMacro" Macro="/leavevehicle" />
                <RunTo X="564.2549" Y="4103.912" Z="6.394357" />
                <CustomBehavior File="WaitTimer" WaitTime="30000" />
                <RunTo X="583.4602" Y="4123.388" Z="4.843984" />
                <CustomBehavior File="WaitTimer" WaitTime="3000" />
                <RunTo X="601.0023" Y="4132.224" Z="1.504109" />
                <CustomBehavior File="WaitTimer" WaitTime="7000" />
                <RunTo X="642.8672" Y="4151.944" Z="1.493407" />
                <CustomBehavior File="WaitTimer" WaitTime="22000" />
                <RunTo X="699.1943" Y="4162.536" Z="1.493563" />
                <CustomBehavior File="WaitTimer" WaitTime="8000" />
                <RunTo X="736.7871" Y="4169.114" Z="1.823373" />
            </If>
        </If>
        <!-- 357 - 358 -->
        <If Condition="DoQuest(40745) &amp;&amp; !IsObjectiveComplete(3,40745)">
            <CustomBehavior File="RunCode" Code="PrintStep(357, 358)" />
            <CustomBehavior File="KillUntilComplete" MobIds="108616" TerminateWhen="HasItem(138147)">
                <HuntingGrounds>
                    <Hotspot X="743.4896" Y="4200.279" Z="3.578265" />
                </HuntingGrounds>
            </CustomBehavior>
            <CustomBehavior File="InteractWith" MobIds="250991" NumOfTimes="1" X="743.4896" Y="4200.279" Z="3.578265" />
        </If>
        <!-- 359 -->
        <If Condition="HasQuest(40745)">
            <CustomBehavior File="RunCode" Code="PrintStep(359)" />
            <!-- HB refused to turn in the quest the normal way -->
            <MoveTo X="746.4833" Y="4195.059" Z="3.25172" />
            <CustomBehavior File="MyCTM" X="742.7792" Y="4202.926" Z="3.578797" />
            <CustomBehavior File="InteractWith" MobIds="108063" NumOfTimes="1" CollectionDistance="5" X="743.4896" Y="4200.279" Z="3.578265" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
        </If>
        <If Condition="NeedsQuest(42722)">
            <!-- HB refused to get the quest the normal way -->
            <MoveTo X="746.4833" Y="4195.059" Z="3.25172" />
            <CustomBehavior File="MyCTM" X="742.7792" Y="4202.926" Z="3.578797" />
            <CustomBehavior File="InteractWith" MobIds="108063" NumOfTimes="1" CollectionDistance="5" X="743.4896" Y="4200.279" Z="3.578265" />
            <CustomBehavior File="RunMacro" Macro="/run AcceptQuest()" />
        </If>
        <!-- 360 -->
        <If Condition="DoQuest(42722)">
            <CustomBehavior File="RunCode" Code="PrintStep(360)" />
            <!-- TODO get subzoneid -->
            <If Condition="Me.MinimapZoneText != &quot;Terrace of Order&quot;">
                <CustomBehavior File="MyCTM" X="746.7241" Y="4194.674" Z="3.248303" />
            </If>
            <CustomBehavior File="KillUntilComplete" MobIds="108096" TerminateWhen="HasItem(138301) &amp;&amp; GetItemCount(138301) &gt;= 3">
                <HuntingGrounds>
                    <Hotspot X="921.1705" Y="4040.392" Z="1.35467" />
                    <Hotspot X="912.6882" Y="3963.212" Z="1.353993" />
                    <Hotspot X="950.3488" Y="4124.124" Z="1.422557" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <If Condition="DoQuest(42722) &amp;&amp; GetItemCount(138301) &gt;= 3">
            <CustomBehavior File="InteractWith" MobIds="251190" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1,42722)">
                <HuntingGrounds>
                    <Hotspot X="921.1705" Y="4040.392" Z="1.35467" />
                    <Hotspot X="912.6882" Y="3963.212" Z="1.353993" />
                    <Hotspot X="950.3488" Y="4124.124" Z="1.422557" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 361 -->
        <If Condition="QuestDone(42722)">
            <CustomBehavior File="RunCode" Code="PrintStep(361)" />
            <!-- <TurnIn Nav="Fly" QuestName="Friends in Cages" QuestId="42722" TurnInName="Korine" TurnInId="108063" /> -->
            <!-- HB refused to turn in the quest the normal way -->
            <MoveTo X="746.4833" Y="4195.059" Z="3.25172" />
            <CustomBehavior File="MyCTM" X="742.7792" Y="4202.926" Z="3.578797" />
            <CustomBehavior File="InteractWith" MobIds="108063" NumOfTimes="1" CollectionDistance="5" X="743.4896" Y="4200.279" Z="3.578265" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
        </If>
        <If Condition="NeedsQuest(42486)">
            <!-- HB refused to get the quest the normal way -->
            <MoveTo X="746.4833" Y="4195.059" Z="3.25172" />
            <CustomBehavior File="MyCTM" X="742.7792" Y="4202.926" Z="3.578797" />
            <CustomBehavior File="InteractWith" MobIds="108063" NumOfTimes="1" CollectionDistance="5" X="743.4896" Y="4200.279" Z="3.578265" />
            <CustomBehavior File="RunMacro" Macro="/run AcceptQuest()" />
        </If>
        <!-- 362 -->
        <If Condition="DoQuest(42486)">
            <CustomBehavior File="RunCode" Code="PrintStep(362)" />
            <CustomBehavior File="EscortGroup" QuestId="42486" EscortNpcId="108075" TerminateWhen="IsQuestCompleted(42486)" />
        </If>
        <!-- 363 -->
        <If Condition="HasQuest(42486)">
            <CustomBehavior File="RunCode" Code="PrintStep(363)" />
            <TurnIn Nav="Fly" QuestName="Little One Lost" QuestId="42486" TurnInName="Verene" TurnInId="107712" X="355.0298" Y="3976.344" Z="1.388358" />
        </If>
        <!-- 364 -->
        <If Condition="NeedsQuest(42487)">
            <CustomBehavior File="RunCode" Code="PrintStep(364)" />
            <PickUp Nav="Fly" QuestName="Friends On the Outside" QuestId="42487" GiverName="Vanthir" GiverId="107598" X="355.0298" Y="3976.344" Z="1.388358" />
        </If>
        <!-- 365 -->
        <!-- TODO this only has one step and nothing happens? -->
        <If Condition="NeedsQuest(44051)">
            <CustomBehavior File="RunCode" Code="PrintStep(365)" />
            <PickUp Nav="Fly" QuestName="Wasted Potential" QuestId="44051" GiverName="Rosaine" GiverId="111900" X="423.5779" Y="4007.669" Z="1.474621" />
        </If>
        <!-- 366 -->
        <If Condition="DoQuest(42487) &amp;&amp; !IsObjectiveComplete(1,42487)">
            <CustomBehavior File="RunCode" Code="PrintStep(366)" />
            <CustomBehavior File="InteractWith" MobIds="253392" NumOfTimes="1" X="432.0783" Y="4013.453" Z="1.388306" />
        </If>
        <!-- 367 -->
        <If Condition="DoQuest(42487) &amp;&amp; !IsObjectiveComplete(2,42487) &amp;&amp; IsInCity()">
            <CustomBehavior File="RunCode" Code="PrintStep(367)" />
            <CustomBehavior File="InteractWith" MobIds="260270" NumOfTimes="1" X="432.0783" Y="4013.453" Z="1.388306" />
        </If>
        <!-- 368 -->
        <If Condition="DoQuest(42487) &amp;&amp; !IsObjectiveComplete(2,42487)">
            <CustomBehavior File="RunCode" Code="PrintStep(368)" />
            <If Condition="IsThalyssraThirsty()">
                <If Condition="!HasAncientMana(50)">
                    <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 50)" />
                    <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
                </If>
                <CustomBehavior File="InteractWith" MobId="97140" X="1724.658" Y="4614.287" Z="123.7945" />
                <CustomBehavior File="RunMacro" Macro="/click GossipTitleButton1" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
            </If>
            <CustomBehavior File="InteractWith" MobId="97140" InteractByGossipOptions="1" X="1724.658" Y="4614.287" Z="123.7945" />
        </If>
        <!-- 369 -->
        <If Condition="HasQuest(42487) || NeedsQuest(42488)">
            <CustomBehavior File="RunCode" Code="PrintStep(369)" />
            <TurnIn Nav="Fly" QuestName="Friends On the Outside" QuestId="42487" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1724.658" Y="4614.287" Z="123.7945" />
            <PickUp Nav="Fly" QuestName="Thalyssra's Abode" QuestId="42488" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1724.658" Y="4614.287" Z="123.7945" />
        </If>
        <!-- 370 -->
        <If Condition="NeedsQuest(40401)">
            <CustomBehavior File="RunCode" Code="PrintStep(370)" />
            <PickUp Nav="Fly" QuestName="A Way Back In" QuestId="40401" GiverName="Iadreth" GiverId="100185" X="1365.822" Y="4748.715" Z="145.3117" />
        </If>
        <!-- 371 -->
        <If Condition="DoQuest(40401)">
            <CustomBehavior File="RunCode" Code="PrintStep(371)" />
            <CustomBehavior File="InteractWith" MobId="100192" InteractByGossipOptions="1" X="1199.91" Y="4358.712" Z="113.8451" />
        </If>
        <!-- 372 -->
        <If Condition="HasQuest(40401) || NeedsQuest(40469)">
            <CustomBehavior File="RunCode" Code="PrintStep(372)" />
            <TurnIn Nav="Fly" QuestName="A Way Back In" QuestId="40401" TurnInName="Astoril" TurnInId="100192" X="1199.91" Y="4358.712" Z="113.8451" />
            <PickUp Nav="Fly" QuestName="Final Preparations" QuestId="40469" GiverName="Astoril" GiverId="100192" X="1199.91" Y="4358.712" Z="113.8451" />
        </If>
        <!-- 373 -->
        <If Condition="DoQuest(40469)">
            <CustomBehavior File="RunCode" Code="PrintStep(373)" />
            <CustomBehavior File="InteractWith" MobIds="245507" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1,40469)">
                <HuntingGrounds>
                    <Hotspot X="1169.876" Y="4302.219" Z="111.5893" />
                    <Hotspot X="1268.899" Y="4293.187" Z="113.0719" />
                    <Hotspot X="932.1426" Y="4381.529" Z="111.7006" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 374 -->
        <If Condition="HasQuest(40469) || NeedsQuest(40424)">
            <CustomBehavior File="RunCode" Code="PrintStep(374)" />
            <TurnIn Nav="Fly" QuestName="Final Preparations" QuestId="40469" TurnInName="Iadreth" TurnInId="100185" X="1365.822" Y="4748.715" Z="145.3117" />
            <PickUp Nav="Fly" QuestName="A Desperate Journey" QuestId="40424" GiverName="Iadreth" GiverId="100185" X="1365.822" Y="4748.715" Z="145.3117" />
        </If>
        <CustomBehavior File="Hooks\Avoid" AvoidName="random_elite" ObjectIds="116943" Radius="40" />
        <CustomBehavior File="Hooks\DoWhen" ActivityName="apply_mask" Command="Remove" />
        <!-- 375 -->
        <If Condition="DoQuest(40424) &amp;&amp; !IsObjectiveComplete(1,40424)">
            <CustomBehavior File="RunCode" Code="PrintStep(375)" />
            <CustomBehavior File="KillUntilComplete" TerminateWhen="IsObjectiveComplete(1,40424)">
                <HuntingGrounds>
                    <Hotspot X="1262.639" Y="4709.029" Z="141.7006" />
                </HuntingGrounds>
                <PursuitList>
                    <PursueUnit Id="102016" PursueWhen="UNIT.Distance &lt; 30" />
                    <PursueUnit Id="113567" PursueWhen="UNIT.Distance &lt; 30" />
                </PursuitList>
            </CustomBehavior>
        </If>
        <!-- 376 -->
        <If Condition="DoQuest(40424) &amp;&amp; !IsObjectiveComplete(2,40424)">
            <CustomBehavior File="RunCode" Code="PrintStep(376)" />
            <CustomBehavior File="KillUntilComplete" TerminateWhen="IsObjectiveComplete(2,40424)">
                <HuntingGrounds>
                    <Hotspot X="1210.706" Y="4648.623" Z="126.7926" />
                </HuntingGrounds>
                <PursuitList>
                    <PursueUnit Id="102016" PursueWhen="UNIT.Distance &lt; 30" />
                    <PursueUnit Id="113567" PursueWhen="UNIT.Distance &lt; 30" />
                </PursuitList>
            </CustomBehavior>
        </If>
        <!-- 377 -->
        <If Condition="DoQuest(40424) &amp;&amp; !IsObjectiveComplete(3,40424)">
            <CustomBehavior File="RunCode" Code="PrintStep(377)" />
        </If>
        <!-- sometimes you have to run in and out for it to trigger... -->
        <While Condition="DoQuest(40424) &amp;&amp; !IsObjectiveComplete(3,40424)">
            <MoveTo X="1160.603" Y="4561.093" Z="119.5891" />
            <CustomBehavior File="WaitTimer" WaitTime="6000" TerminateWhen="IsQuestCompleted(40424)" />
            <If Condition="!IsQuestCompleted(40424)">
                <MoveTo X="1173.611" Y="4586.134" Z="119.9475" />
                <CustomBehavior File="WaitTimer" WaitTime="6000" TerminateWhen="IsQuestCompleted(40424)" />
            </If>
        </While>
        <CustomBehavior File="Hooks\Avoid" AvoidName="MaskDetectors" Command="Remove" />
        <CustomBehavior File="Hooks\Avoid" AvoidName="random_elite" Command="Remove" />
        <!-- 378 -->
        <If Condition="HasQuest(40424)">
            <CustomBehavior File="RunCode" Code="PrintStep(378)" />
            <TurnIn Nav="Fly" QuestName="A Desperate Journey" QuestId="40424" TurnInName="Astoril" TurnInId="100301" X="1162.4" Y="4558.388" Z="119.5889" />
        </If>
        <!-- pre-farm mana -->
        <If Condition="(HasQuest(41575) || NeedsQuest(41575)) &amp;&amp; !HasAncientMana(100)">
            <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 100)" />
            <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
        </If>
        <!-- 379 -->
        <If Condition="NeedsQuest(40470)">
            <CustomBehavior File="RunCode" Code="PrintStep(379)" />
            <PickUp Nav="Fly" QuestName="Quality of Life" QuestId="40470" GiverName="Iadreth" GiverId="100331" X="1162.4" Y="4558.388" Z="119.5889" />
        </If>
        <!-- 380 - 381 -->
        <If Condition="DoQuest(40470)">
            <CustomBehavior File="RunCode" Code="PrintStep(380,381)" />
            <!-- an elaborate way to walk onto a telepad -->
            <If Condition="!IsObjectiveComplete(1,40470)">
                <CustomBehavior File="WaitTimer" WaitTime="24000" />
                <MoveTo X="1189.876" Y="4552.788" Z="122.3002" />
                <CustomBehavior File="ForcedDismount" />
                <CustomBehavior File="RunCode">
                    <![CDATA[
                    var tar = Unit(107028);
                    tar.Face();
                ]]>
                </CustomBehavior>
                <CustomBehavior File="WaitTimer" WaitTime="2000" />
                <CustomBehavior File="Misc\RunLua" Lua="MoveForwardStart();" WaitTime="900" />
                <CustomBehavior File="Misc\RunLua" Lua="MoveForwardStop();" WaitTime="100" />
            </If>
            <CustomBehavior File="KillUntilComplete" MobIds="100301" TerminateWhen="IsObjectiveComplete(2,40470)">
                <HuntingGrounds>
                    <Hotspot X="616.1226" Y="4548.856" Z="-111.5326" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 382 -->
        <If Condition="NeedsQuest(41575)">
            <CustomBehavior File="RunCode" Code="PrintStep(382)" />
            <PickUp Nav="Fly" QuestName="Felsoul Teleporter Online!" QuestId="41575" GiverName="Unpowered Telemancy Beacon" GiverId="252107" X="622.8325" Y="4481.75" Z="-111.5352" />
        </If>
        <!-- 383 -->
        <If Condition="HasQuest(41575) &amp;&amp; !HasAncientMana(100)">
            <CustomBehavior File="RunCode" Code="PrintStep(383)" />
            <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 100)" />
            <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
        </If>
        <!-- 384 -->
        <If Condition="HasQuest(41575)">
            <CustomBehavior File="RunCode" Code="PrintStep(384)" />
            <TurnIn Nav="Fly" QuestName="Felsoul Teleporter Online!" QuestId="41575" TurnInName="Unpowered Telemancy Beacon" TurnInId="252107" X="622.8325" Y="4481.75" Z="-111.5352" />
        </If>
        <!-- if we've just finished this quest and not the next and we're still in felsoul hold, use the portal -->
        <If Condition="IsQuestCompleted(41575) &amp;&amp; !IsQuestCompleted(40470) &amp;&amp; Me.SubZoneId == 7844">
            <CustomBehavior File="InteractWith" MobIds="260263" NumOfTimes="1" X="622.1436" Y="4480.874" Z="-111.5409" />
        </If>
        <!-- 385 -->
        <If Condition="HasQuest(40470) &amp;&amp; IsObjectiveComplete(2,40470)">
            <CustomBehavior File="RunCode" Code="PrintStep(385)" />
            <If Condition="IsThalyssraThirsty()">
                <If Condition="!HasAncientMana(50)">
                    <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 50)" />
                    <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
                </If>
                <CustomBehavior File="InteractWith" MobId="97140" X="1724.658" Y="4614.287" Z="123.7945" />
                <CustomBehavior File="RunMacro" Macro="/click GossipTitleButton1" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
            </If>
            <CustomBehavior File="InteractWith" MobIds="97140" NumOfTimes="1" X="1721.308" Y="4613.505" Z="123.8009" />
        </If>
        <!-- 386 -->
        <If Condition="HasQuest(40470)">
            <CustomBehavior File="RunCode" Code="PrintStep(386)" />
            <TurnIn Nav="Fly" QuestName="Quality of Life" QuestId="40470" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1721.308" Y="4613.505" Z="123.8009" />
        </If>
        <!-- 387 - 393 -->
        <!-- guide wants to do the scenario but i dont want to mess with it here. for now -->
        <If Condition="NeedsQuest(42489)">
            <CustomBehavior File="UserDialog" AllowBotStop="True" SoundCue="Exclamation" SoundCueInterval="150" ExpiryTime="300" ExpiryAction="InputEnabled_Continue" Text="Steps 387 to 393 are to do Building an Army. Which is a scenario. If you would like to run it stop now and run it by manually in the reputation folder. Otherwise the bot will skip to 394." />
        </If>
        <!-- 394 -->
        <If Condition="NeedsQuest(42489)">
            <CustomBehavior File="RunCode" Code="PrintStep(394)" />
            <MoveTo X="1134.477" Y="2869.507" Z="44.28946" />
            <CustomBehavior File="ForcedDismount" />
        </If>
        <UseMount Value="false" />
        <If Condition="NeedsQuest(42489)">
            <PickUp Nav="Fly" QuestName="Thalyssra's Drawers" QuestId="42489" GiverName="Armoire" GiverId="251032" X="1121.544" Y="3009.178" Z="6.86612" />
        </If>
        <!-- 395 -->
        <If Condition="DoQuest(42489) &amp;&amp; !IsObjectiveComplete(1,42489)">
            <CustomBehavior File="RunCode" Code="PrintStep(395)" />
            <CustomBehavior File="InteractWith" QuestId="42489" MobId="251046" NumOfTimes="1">
                <HuntingGrounds>
                    <Hotspot X="1099.294" Y="2975.288" Z="6.198305" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 396 -->
        <If Condition="DoQuest(42489) &amp;&amp; !IsObjectiveComplete(2,42489)">
            <CustomBehavior File="RunCode" Code="PrintStep(396)" />
            <CustomBehavior File="InteractWith" QuestId="42489" MobId="251034" NumOfTimes="1">
                <HuntingGrounds>
                    <Hotspot X="1045.421" Y="3001.41" Z="2.953944" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 397 -->
        <If Condition="DoQuest(42489) &amp;&amp; !IsObjectiveComplete(3,42489)">
            <CustomBehavior File="RunCode" Code="PrintStep(397)" />
            <CustomBehavior File="InteractWith" QuestId="42489" MobId="251035" NumOfTimes="1">
                <HuntingGrounds>
                    <Hotspot X="1153.447" Y="3040.209" Z="5.441119" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 398 -->
        <If Condition="DoQuest(42488)">
            <CustomBehavior File="RunCode" Code="PrintStep(398)" />
            <CustomBehavior File="KillUntilComplete" MobIds="108190" TerminateWhen="GetItemCount(138392) &gt;= 3">
                <HuntingGrounds>
                    <Hotspot X="1153.447" Y="3040.209" Z="5.441119" />
                </HuntingGrounds>
            </CustomBehavior>
            <If Condition="GetItemCount(138392) &gt;= 3">
                <CustomBehavior File="UseItem" ItemId="138392" />
            </If>
        </If>
        <UseMount Value="true" />
        <CustomBehavior File="Hooks\DoWhen" UseWhen="ShouldCastMask()" LogExecution="true" ActivityName="apply_mask" StopMovingToConductActivity="true" AllowUseWhileMounted="true">
            <CustomBehavior File="RunCode" Code="CastMask()" />
            <CustomBehavior File="WaitTimer" WaitTime="4000" />
        </CustomBehavior>
        <!-- 399 -->
        <If Condition="QuestDone(42489) &amp;&amp; QuestDone(42488) &amp;&amp; IsThalyssraThirsty()">
            <If Condition="!HasAncientMana(50)">
                <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 50)" />
                <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
            </If>
            <CustomBehavior File="InteractWith" MobId="97140" X="1724.658" Y="4614.287" Z="123.7945" />
            <CustomBehavior File="RunMacro" Macro="/click GossipTitleButton1" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
        </If>
        <If Condition="HasQuest(42489) || HasQuest(42488)">
            <CustomBehavior File="RunCode" Code="PrintStep(399)" />
            <TurnIn Nav="Fly" QuestName="Thalyssra's Drawers" QuestId="42489" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1721.308" Y="4613.505" Z="123.8009" />
            <TurnIn Nav="Fly" QuestName="Thalyssra's Abode" QuestId="42488" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1721.308" Y="4613.505" Z="123.8009" />
        </If>
        <!-- 400 -->
        <If Condition="NeedsQuest(40266,40744)">
            <CustomBehavior File="RunCode" Code="PrintStep(400)" />
            <CustomBehavior File="InteractWith" MobId="254129" NumOfTimes="1" X="1783.168" Y="4640.48" Z="124.789" />
            <PickUp Nav="Fly" QuestName="The Lost Advisor" QuestId="40266" GiverName="Thaedris Feathersong" GiverId="99065" X="1937.913" Y="4128.488" Z="266.2768" />
            <PickUp Nav="Fly" QuestName="An Ancient Recipe" QuestId="40744" GiverName="Thaedris Feathersong" GiverId="99065" X="1937.913" Y="4128.488" Z="266.2768" />
        </If>
        <!-- 401 -->
        <If Condition="DoQuest(40266)">
            <CustomBehavior File="RunCode" Code="PrintStep(401)" />
        </If>
        <While Condition="DoQuest(40266)">
            <MoveTo X="1955.3" Y="4090.386" Z="263.6335" />
            <CustomBehavior File="InteractWith" QuestId="40266" MobId="245186" NumOfTimes="1" InteractBlacklistTimeInSeconds="1000">
                <HuntingGrounds>
                    <Hotspot X="1981.782" Y="4070.541" Z="263.5798" />
                </HuntingGrounds>
            </CustomBehavior>
        </While>
        <!-- 402 -->
        <If Condition="DoQuest(40744)">
            <CustomBehavior File="RunCode" Code="PrintStep(402)" />
        </If>
        <While Condition="DoQuest(40744)">
            <CustomBehavior File="KillUntilComplete" MobIds="113573, 98306" TerminateWhen="IsObjectiveComplete(1,40744)">
                <HuntingGrounds>
                    <Hotspot X="1953.855" Y="4182.607" Z="252.0313" />
                    <Hotspot X="1972.402" Y="4074.865" Z="263.6337" />
                    <Hotspot X="1919.736" Y="3966.884" Z="265.3144" />
                </HuntingGrounds>
            </CustomBehavior>
        </While>
        <!-- 403 -->
        <If Condition="HasQuest(40744) || HasQuest(40266) || NeedsQuest(40227)">
            <CustomBehavior File="RunCode" Code="PrintStep(403)" />
            <TurnIn Nav="Fly" QuestName="An Ancient Recipe" QuestId="40744" TurnInName="Thaedris Feathersong" TurnInId="99093" X="1824.016" Y="3929.723" Z="272.0049" />
            <TurnIn Nav="Fly" QuestName="The Lost Advisor" QuestId="40266" TurnInName="Thaedris Feathersong" TurnInId="99093" X="1824.016" Y="3929.723" Z="272.0049" />
            <PickUp Nav="Fly" QuestName="Bad Intentions" QuestId="40227" GiverName="Thaedris Feathersong" GiverId="99093" X="1824.016" Y="3929.723" Z="272.0049" />
        </If>
        <!-- 404 -->
        <If Condition="DoQuest(40227)">
            <CustomBehavior File="RunCode" Code="PrintStep(404)" />
            <CustomBehavior File="InteractWith" QuestId="40227" MobId="99093" NumOfTimes="1" InteractByGossipOptions="1" X="1824.016" Y="3929.723" Z="272.0049" />
        </If>
        <!-- 405 -->
        <If Condition="HasQuest(40227) || NeedsQuest(40300)">
            <CustomBehavior File="RunCode" Code="PrintStep(405)" />
            <TurnIn Nav="Fly" QuestName="Bad Intentions" QuestId="40227" TurnInName="Thaedris Feathersong" TurnInId="99093" X="1824.016" Y="3929.723" Z="272.0049" />
            <PickUp Nav="Fly" QuestName="Tools of the Trade" QuestId="40300" GiverName="Thaedris Feathersong" GiverId="99093" X="1824.016" Y="3929.723" Z="272.0049" />
        </If>
        <!-- 406 - 407 -->
        <If Condition="DoQuest(40300)">
            <If Condition="!IsObjectiveComplete(1,40300)">
                <CustomBehavior File="RunCode" Code="PrintStep(406)" />
                <CustomBehavior File="InteractWith" QuestId="40300" MobId="245681" NumOfTimes="1">
                    <HuntingGrounds>
                        <Hotspot X="2001.061" Y="3864.436" Z="265.7645" />
                    </HuntingGrounds>
                </CustomBehavior>
            </If>
            <If Condition="!IsObjectiveComplete(2,40300)">
                <CustomBehavior File="RunCode" Code="PrintStep(407)" />
                <CustomBehavior File="InteractWith" QuestId="40300" MobId="245682" NumOfTimes="1">
                    <HuntingGrounds>
                        <Hotspot X="2165.194" Y="3990.482" Z="285.1466" />
                    </HuntingGrounds>
                </CustomBehavior>
            </If>
        </If>
        <!-- 408 -->
        <If Condition="NeedsQuest(40308)">
            <CustomBehavior File="RunCode" Code="PrintStep(408)" />
            <PickUp Nav="Fly" QuestName="Fragments of Memory" QuestId="40308" GiverName="Shattered Burial Urn" GiverId="245688" X="2180.171" Y="3931.131" Z="285.1753" />
        </If>
        <!-- 409 -->
        <If Condition="DoQuest(40300)">
            <CustomBehavior File="RunCode" Code="PrintStep(409)" />
            <If Condition="!IsObjectiveComplete(3,40300)">
                <CustomBehavior File="InteractWith" QuestId="40300" MobId="247339" NumOfTimes="1">
                    <HuntingGrounds>
                        <Hotspot X="2260.457" Y="3765.863" Z="276.4616" />
                    </HuntingGrounds>
                </CustomBehavior>
            </If>
        </If>
        <!-- 410 -->
        <If Condition="DoQuest(40308)">
            <CustomBehavior File="RunCode" Code="PrintStep(410)" />
            <CustomBehavior File="KillUntilComplete" MobIds="101577, 101580, 101581" TerminateWhen="IsObjectiveComplete(1,40308)">
                <HuntingGrounds>
                    <Hotspot X="2231.044" Y="3845.981" Z="272.8451" />
                    <Hotspot X="2260.457" Y="3765.863" Z="276.4616" />
                    <Hotspot X="2293.826" Y="3800.436" Z="284.5994" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 411 -->
        <If Condition="HasQuest(40300) || HasQuest(40308) || NeedsQuest(40306,40578)">
            <CustomBehavior File="RunCode" Code="PrintStep(411)" />
            <TurnIn Nav="Fly" QuestName="Tools of the Trade" QuestId="40300" TurnInName="Thaedris Feathersong" TurnInId="99483" X="2204.25" Y="4029.721" Z="266.2486" />
            <TurnIn Nav="Fly" QuestName="Fragments of Memory" QuestId="40308" TurnInName="Thaedris Feathersong" TurnInId="99483" X="2204.25" Y="4029.721" Z="266.2486" />
            <PickUp Nav="Fly" QuestName="The Last Chapter" QuestId="40306" GiverName="Thaedris Feathersong" GiverId="99483" X="2204.25" Y="4029.721" Z="266.2486" />
            <PickUp Nav="Fly" QuestName="Paying Respects" QuestId="40578" GiverName="Thaedris Feathersong" GiverId="99483" X="2204.25" Y="4029.721" Z="266.2486" />
        </If>
        <!-- 412 -->
        <While Condition="DoQuest(40306)">
            <CustomBehavior File="RunCode" Code="PrintStep(412)" />
            <CustomBehavior File="InteractWith" QuestId="40306" MobId="245236" NumOfTimes="1">
                <HuntingGrounds>
                    <Hotspot X="2252.697" Y="4214.764" Z="274.1958" />
                </HuntingGrounds>
            </CustomBehavior>
        </While>
        <!-- 413 -->
        <If Condition="DoQuest(40578)">
            <CustomBehavior File="RunCode" Code="PrintStep(413)" />
            <CustomBehavior File="KillUntilComplete" MobIds="97732, 97729" TerminateWhen="IsObjectiveComplete(1,40578)">
                <HuntingGrounds>
                    <Hotspot X="2228.927" Y="4200.428" Z="259.7561" />
                    <Hotspot X="2141.745" Y="4146.204" Z="254.2535" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 414 -->
        <If Condition="HasQuest(40306) || HasQuest(40578) || NeedsQuest(40315)">
            <CustomBehavior File="RunCode" Code="PrintStep(414)" />
            <TurnIn Nav="Fly" QuestName="The Last Chapter" QuestId="40306" TurnInName="Thaedris Feathersong" TurnInId="99575" X="2305.626" Y="4155.99" Z="295.1306" />
            <TurnIn Nav="Fly" QuestName="Paying Respects" QuestId="40578" TurnInName="Thaedris Feathersong" TurnInId="99575" X="2305.626" Y="4155.99" Z="295.1306" />
            <If Condition="NeedsQuest(40315)">
                <CustomBehavior File="InteractWith" MobId="99575" NumOfTimes="1" X="1824.016" Y="3929.723" Z="272.0049" />
                <CustomBehavior File="RunMacro" Macro="/run AcceptQuest()" />
            </If>
        </If>
        <!-- 415 -->
        <If Condition="DoQuest(40315)">
            <CustomBehavior File="RunCode" Code="PrintStep(415)" />
            <CustomBehavior File="InteractWith" QuestId="40315" MobId="99575" NumOfTimes="1" InteractByGossipOptions="1" X="1824.016" Y="3929.723" Z="272.0049" />
        </If>
        <!-- 416 -->
        <If Condition="HasQuest(40315) || NeedsQuest(40319)">
            <CustomBehavior File="RunCode" Code="PrintStep(416)" />
            <TurnIn Nav="Fly" QuestName="End of the Line" QuestId="40315" TurnInName="Thaedris Feathersong" TurnInId="99575" X="1824.016" Y="3929.723" Z="272.0049" />
            <PickUp Nav="Fly" QuestName="The Final Ingredient" QuestId="40319" GiverName="Thaedris Feathersong" GiverId="99575" X="1824.016" Y="3929.723" Z="272.0049" />
        </If>
        <!-- 417 -->
        <If Condition="DoQuest(40319)">
            <CustomBehavior File="RunCode" Code="PrintStep(417)" />
            <CustomBehavior File="KillUntilComplete" MobIds="97750" TerminateWhen="IsObjectiveComplete(1,40319)">
                <HuntingGrounds>
                    <Hotspot X="2331.418" Y="4029.525" Z="294.5592" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 418 -->
        <If Condition="HasQuest(40319) || NeedsQuest(40321)">
            <CustomBehavior File="RunCode" Code="PrintStep(418)" />
            <TurnIn Nav="Fly" QuestName="The Final Ingredient" QuestId="40319" TurnInName="Thaedris Feathersong" TurnInId="99575" X="1824.016" Y="3929.723" Z="272.0049" />
            <PickUp Nav="Fly" QuestName="Feathersong's Redemption" QuestId="40321" GiverName="Thaedris Feathersong" GiverId="99575" X="1824.016" Y="3929.723" Z="272.0049" />
        </If>
        <!-- 419 -->
        <If Condition="DoQuest(40321)">
            <CustomBehavior File="RunCode" Code="PrintStep(419)" />
            <CustomBehavior File="CombatUseItemOnV2" QuestId="40321" ItemId="130260" ItemAppliesAuraId="AssumeItemUseAlwaysSucceeds" MobId="99593" UseWhenMobHasHealthPercent="100" MaxRangeToUseItem="15" UseItemStrategy="UseItemOncePerTarget" RecallPetAtMobPercentHealth="0">
                <HuntingGrounds>
                    <Hotspot X="2589.755" Y="4169.936" Z="340.3653" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 420 -->
        <If Condition="HasQuest(40321)">
            <CustomBehavior File="RunCode" Code="PrintStep(420)" />
            <TurnIn Nav="Fly" QuestName="Feathersong's Redemption" QuestId="40321" TurnInName="Thaedris Feathersong" TurnInId="100779" X="2567.609" Y="4161.703" Z="336.2392" />
        </If>
        <!-- 421 -->
        <If Condition="NeedsQuest(40297)">
            <CustomBehavior File="RunCode" Code="PrintStep(421)" />
            <PickUp Nav="Fly" QuestName="Lyana Darksorrow" QuestId="40297" GiverName="Lyana Darksorrow" GiverId="98801" X="1255.429" Y="4946.362" Z="69.86123" />
        </If>
        <!-- Felsoul Hold Quests -->
        <!-- TODO prefarm mana? -->
        <!-- 422 -->
        <If Condition="DoQuest(40297)">
            <CustomBehavior File="RunCode" Code="PrintStep(422)" />
            <CustomBehavior File="InteractWith" QuestId="40297" MobId="99470" NumOfTimes="1" X="1255.996" Y="4948.305" Z="69.17934" />
        </If>
        <!-- 423 -->
        <If Condition="HasQuest(40297) || NeedsQuest(40307,40898)">
            <CustomBehavior File="RunCode" Code="PrintStep(423)" />
            <TurnIn Nav="Fly" QuestName="Lyana Darksorrow" QuestId="40297" TurnInName="Lyana Darksorrow" TurnInId="99514" X="1255.996" Y="4948.305" Z="69.17934" />
            <PickUp Nav="Fly" QuestName="Glaive Circumstances" QuestId="40307" GiverName="Lyana Darksorrow" GiverId="99514" X="1255.996" Y="4948.305" Z="69.17934" />
            <PickUp Nav="Fly" QuestName="Fresh Meat" QuestId="40898" GiverName="Lyana Darksorrow" GiverId="99514" X="1255.996" Y="4948.305" Z="69.17934" />
        </If>
        <!-- 424 - 425 -->
        <!-- there can be mobs around the poison pool to skin, turn it off for a minute to avoid death -->
        <CustomBehavior File="UserSettings" SkinMobs="false" />
        <If Condition="DoQuest(40307)">
            <If Condition="DistFromFelsoulHoldIsland() &lt; 15">
                <CustomBehavior File="MyCTM" X="1188.683" Y="5143.317" Z="56.44718" />
            </If>
            <UseMount Value="false" />
            <If Condition="!IsObjectiveComplete(2,40307)">
                <CustomBehavior File="RunCode" Code="PrintStep(424)" />
                <CustomBehavior File="InteractWith" QuestId="40307" MobId="245245" NumOfTimes="1" X="1225.726" Y="5148.667" Z="56.89205" />
            </If>
            <UseMount Value="true" />
            <If Condition="!IsObjectiveComplete(1,40307)">
                <CustomBehavior File="RunCode" Code="PrintStep(425)" />
                <!-- <CustomBehavior File="MyCTM" X="1189.306" Y="5142.74" Z="55.93295" /> -->
                <CustomBehavior File="KillUntilComplete" MobIds="100595" TerminateWhen="IsObjectiveComplete(1,40307)">
                    <HuntingGrounds>
                        <Hotspot X="1057.823" Y="5288.306" Z="75.05817" />
                    </HuntingGrounds>
                </CustomBehavior>
            </If>
        </If>
        <CustomBehavior File="UserSettings" SkinMobs="true" />
        <!-- 426 -->
        <If Condition="!IsObjectiveComplete(1,40898)">
            <CustomBehavior File="RunCode" Code="PrintStep(426)" />
            <!-- <CustomBehavior File="MyCTM" X="1189.306" Y="5142.74" Z="55.93295" /> -->
            <CustomBehavior File="KillUntilComplete" MobIds="101868" TerminateWhen="IsObjectiveComplete(1,40898)">
                <HuntingGrounds>
                    <Hotspot X="1163.796" Y="5195.795" Z="78.11154" />
                    <Hotspot X="1141.654" Y="5076.333" Z="58.12973" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 427 -->
        <If Condition="HasQuest(40307) || HasQuest(40898) || NeedsQuest(40901)">
            <CustomBehavior File="RunCode" Code="PrintStep(427)" />
            <TurnIn Nav="Fly" QuestName="Glaive Circumstances" QuestId="40307" TurnInName="Lyana Darksorrow" TurnInId="99514" X="1255.996" Y="4948.305" Z="69.17934" />
            <TurnIn Nav="Fly" QuestName="Fresh Meat" QuestId="40898" TurnInName="Lyana Darksorrow" TurnInId="99514" X="1255.996" Y="4948.305" Z="69.17934" />
            <PickUp Nav="Fly" QuestName="Grimwing the Devourer" QuestId="40901" GiverName="Lyana Darksorrow" GiverId="99514" X="1255.996" Y="4948.305" Z="69.17934" />
        </If>
        <!-- 428 -->
        <If Condition="DoQuest(40901)">
            <CustomBehavior File="RunCode" Code="PrintStep(428)" />
            <MoveTo X="1273.912" Y="5231.249" Z="93.53309" />
            <CustomBehavior File="ForcedDismount" />
            <CustomBehavior File="UseItem" ItemId="133756" />
            <CustomBehavior File="KillUntilComplete" MobIds="102292" TerminateWhen="IsObjectiveComplete(1,40901)">
                <HuntingGrounds>
                    <Hotspot X="1273.912" Y="5231.249" Z="93.53309" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 429 -->
        <If Condition="HasQuest(40901) || NeedsQuest(40328,40929)">
            <CustomBehavior File="RunCode" Code="PrintStep(429)" />
            <TurnIn Nav="Fly" QuestName="Grimwing the Devourer" QuestId="40901" TurnInName="Lyana Darksorrow" TurnInId="99890" X="879.246" Y="4990.934" Z="25.92789" />
            <PickUp Nav="Fly" QuestName="A Fate Worse Than Dying" QuestId="40328" GiverName="Lyana Darksorrow" GiverId="99890" X="879.246" Y="4990.934" Z="25.92789" />
            <PickUp Nav="Fly" QuestName="Symbols of Power" QuestId="40929" GiverName="Lyana Darksorrow" GiverId="99890" X="879.246" Y="4990.934" Z="25.92789" />
        </If>
        <UseMount Value="false" />
        <CustomBehavior File="ForcedDismount" />
        <!-- 430 -->
        <If Condition="DoQuest(40328)">
            <CustomBehavior File="RunCode" Code="PrintStep(430)" />
        </If>
        <While Condition="DoQuest(40328)">
            <MoveTo X="907.4639" Y="4713.876" Z="43.51472" />
            <CustomBehavior File="WaitTimer" WaitTime="1000" />
            <CustomBehavior File="InteractWith" QuestId="40328" MobId="246568" NumOfTimes="1" CollectionDistance="21.0" Range="21.0" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="907.4639" Y="4713.876" Z="43.51472" />
            <MoveTo X="956.3354" Y="4699.007" Z="43.90011" />
            <CustomBehavior File="WaitTimer" WaitTime="1000" />
            <CustomBehavior File="InteractWith" QuestId="40328" MobId="246568" NumOfTimes="1" CollectionDistance="21.0" Range="21.0" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="956.3354" Y="4699.007" Z="43.90011" />
            <MoveTo X="919.2921" Y="4649.644" Z="38.64106" />
            <CustomBehavior File="WaitTimer" WaitTime="1000" />
            <CustomBehavior File="InteractWith" QuestId="40328" MobId="246568" NumOfTimes="1" CollectionDistance="21.0" Range="21.0" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="919.2921" Y="4649.644" Z="38.64106" />
            <MoveTo X="1006.53" Y="4739.956" Z="39.0179" />
            <CustomBehavior File="WaitTimer" WaitTime="1000" />
            <CustomBehavior File="InteractWith" QuestId="40328" MobId="246568" NumOfTimes="1" CollectionDistance="21.0" Range="21.0" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="1006.53" Y="4739.956" Z="39.0179" />
            <MoveTo X="900.4448" Y="4754.698" Z="41.06585" />
            <CustomBehavior File="WaitTimer" WaitTime="1000" />
            <CustomBehavior File="InteractWith" QuestId="40328" MobId="246568" NumOfTimes="1" CollectionDistance="21.0" Range="21.0" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="900.4448" Y="4754.698" Z="41.06585" />
            <MoveTo X="933.193" Y="4766.787" Z="66.32096" />
            <CustomBehavior File="WaitTimer" WaitTime="1000" />
            <CustomBehavior File="InteractWith" QuestId="40328" MobId="246568" NumOfTimes="1" CollectionDistance="21.0" Range="21.0" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="933.193" Y="4766.787" Z="66.32096" />
            <MoveTo X="957.9017" Y="4763.552" Z="66.29777" />
            <CustomBehavior File="WaitTimer" WaitTime="1000" />
            <CustomBehavior File="InteractWith" QuestId="40328" MobId="246568" NumOfTimes="1" CollectionDistance="21.0" Range="21.0" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="957.9017" Y="4763.552" Z="66.29777" />
            <MoveTo X="894.1814" Y="4730.729" Z="67.04298" />
            <CustomBehavior File="WaitTimer" WaitTime="1000" />
            <CustomBehavior File="InteractWith" QuestId="40328" MobId="246568" NumOfTimes="1" CollectionDistance="19.0" Range="19.0" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="894.1814" Y="4730.729" Z="67.04298" />
            <MoveTo X="893.9567" Y="4693.953" Z="66.92442" />
            <CustomBehavior File="WaitTimer" WaitTime="1000" />
            <CustomBehavior File="InteractWith" QuestId="40328" MobId="246568" NumOfTimes="1" CollectionDistance="19.0" Range="19.0" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="893.9567" Y="4693.953" Z="66.92442" />
        </While>
        <!-- 431 -->
        <While Condition="DoQuest(40929)">
            <CustomBehavior File="RunCode" Code="PrintStep(431)" />
            <CustomBehavior File="KillUntilComplete" MobIds="99762,101878,106339,102898,110805" TerminateWhen="IsObjectiveComplete(1,40929)">
                <HuntingGrounds>
                    <Hotspot X="894.2945" Y="4713.803" Z="66.02782" />
                </HuntingGrounds>
            </CustomBehavior>
        </While>
        <UseMount Value="true" />
        <!-- 432 -->
        <If Condition="HasQuest(40929) || HasQuest(40328) || NeedsQuest(41097,41098)">
            <CustomBehavior File="RunCode" Code="PrintStep(432)" />
            <TurnIn Nav="Fly" QuestName="Symbols of Power" QuestId="40929" TurnInName="Lyana Darksorrow" TurnInId="99890" X="879.246" Y="4990.934" Z="25.92789" />
            <TurnIn Nav="Fly" QuestName="A Fate Worse Than Dying" QuestId="40328" TurnInName="Lyana Darksorrow" TurnInId="99890" X="879.246" Y="4990.934" Z="25.92789" />
            <PickUp Nav="Fly" QuestName="Shard of Vorgos" QuestId="41097" GiverName="Lyana Darksorrow" GiverId="99890" X="879.246" Y="4990.934" Z="25.92789" />
            <PickUp Nav="Fly" QuestName="Shard of Kozak" QuestId="41098" GiverName="Lyana Darksorrow" GiverId="99890" X="879.246" Y="4990.934" Z="25.92789" />
        </If>
        <!-- 433 -->
        <If Condition="NeedsQuest(41139)">
            <CustomBehavior File="RunCode" Code="PrintStep(433)" />
            <PickUp Nav="Fly" QuestName="The Key Is Around Here Somewhere..." QuestId="41139" GiverName="Angus Stormbrew" GiverId="103204" X="387.9645" Y="5079.631" Z="-87.42442" />
        </If>
        <!-- 434 -->
        <If Condition="DoQuest(41139)">
            <CustomBehavior File="RunCode" Code="PrintStep(434)" />
            <CustomBehavior File="InteractWith" QuestId="41139" MobId="247063" NumOfTimes="500" ProactiveCombatStrategy="ClearMobsThatWillAggro">
                <HuntingGrounds>
                    <Hotspot X="386.083" Y="5078.913" Z="-87.1555" />
                    <Hotspot X="407.3662" Y="5030.951" Z="-88.56811" />
                    <Hotspot X="459.8196" Y="5037.458" Z="-89.20588" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 435 -->
        <If Condition="HasQuest(41139) || NeedsQuest(41140)">
            <CustomBehavior File="RunCode" Code="PrintStep(435)" />
            <TurnIn Nav="Fly" QuestName="The Key Is Around Here Somewhere..." QuestId="41139" TurnInName="Angus Stormbrew" TurnInId="103204" X="387.9645" Y="5079.631" Z="-87.42442" />
            <PickUp Nav="Fly" QuestName="Search and Rescue!" QuestId="41140" GiverName="Angus Stormbrew" GiverId="103204" X="387.9645" Y="5079.631" Z="-87.42442" />
        </If>
        <!-- 436 -->
        <If Condition="DoQuest(41140)">
            <CustomBehavior File="RunCode" Code="PrintStep(436)" />
            <CustomBehavior File="InteractWith" QuestId="41140" QuestObjectiveIndex="1" MobId="247062" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="387.9645" Y="5079.631" Z="-87.42442" />
            <CustomBehavior File="RunCode" Code="PrintStep(438)" />
            <CustomBehavior File="InteractWith" QuestId="41140" QuestObjectiveIndex="3" MobId="247291" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="259.7566" Y="5147.722" Z="-86.47305" />
        </If>
        <!-- 437 -->
        <If Condition="NeedsQuest(43594)">
            <CustomBehavior File="RunCode" Code="PrintStep(439)" />
            <PickUp Nav="Fly" QuestName="Leyline Feed: Halls of the Eclipse" QuestId="43594" GiverName="Leyline Feed" GiverId="252264" X="249.9548" Y="5145.342" Z="-86.97169" />
        </If>
        <!-- 440 -->
        <If Condition="DoQuest(43594)  &amp;&amp; !HasAncientMana(250)">
            <CustomBehavior File="RunCode" Code="PrintStep(440)" />
            <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 250)" />
            <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
        </If>
        <!-- 441 -->
        <If Condition="HasQuest(43594)">
            <CustomBehavior File="RunCode" Code="PrintStep(441)" />
            <TurnIn Nav="Fly" QuestName="Leyline Feed: Halls of the Eclipse" QuestId="43594" TurnInName="Leyline Feed" TurnInId="252264" X="249.9548" Y="5145.342" Z="-86.97169" />
        </If>
        <!-- 442 -->
        <If Condition="DoQuest(41098)">
            <CustomBehavior File="RunCode" Code="PrintStep(442)" />
            <CustomBehavior File="KillUntilComplete" MobIds="99485" TerminateWhen="IsObjectiveComplete(1,41098)">
                <HuntingGrounds>
                    <Hotspot X="259.7926" Y="5180.165" Z="-86.48199" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 443 -->
        <If Condition="DoQuest(41140)">
            <CustomBehavior File="RunCode" Code="PrintStep(443)" />
            <CustomBehavior File="InteractWith" QuestId="41140" QuestObjectiveIndex="4" MobId="247398" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="154.2228" Y="5132.499" Z="-116.4004" />
            <CustomBehavior File="RunCode" Code="PrintStep(444)" />
            <CustomBehavior File="InteractWith" QuestId="41140" QuestObjectiveIndex="5" MobId="247292" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="255.1553" Y="5152.27" Z="-86.57502" />
        </If>
        <!-- 445 -->
        <If Condition="HasQuest(41140)">
            <CustomBehavior File="RunCode" Code="PrintStep(445)" />
            <TurnIn Nav="Fly" QuestName="Search and Rescue!" QuestId="41140" TurnInName="Selthaes Starsong" TurnInId="102365" X="255.1553" Y="5152.27" Z="-86.57502" />
        </If>
        <!-- 446 -->
        <If Condition="NeedsQuest(41222)">
            <CustomBehavior File="RunCode" Code="PrintStep(446)" />
            <PickUp Nav="Fly" QuestName="Into The Pit!" QuestId="41222" GiverName="Angus Stormbrew" GiverId="103437" />
        </If>
        <!-- 447 -->
        <If Condition="HasQuest(41098)">
            <CustomBehavior File="RunCode" Code="PrintStep(447)" />
            <TurnIn Nav="Fly" QuestName="Shard of Kozak" QuestId="41098" TurnInName="Portal Activation Altar" TurnInId="246885" X="294.8321" Y="4925.355" Z="-83.89065" />
        </If>
        <!-- 448 -->
        <If Condition="DoQuest(41097)">
            <CustomBehavior File="RunCode" Code="PrintStep(448)" />
            <!-- had trouble walking right to it for some reason -->
            <MoveTo X="656.692" Y="4502.051" Z="-131.7907" />
            <CustomBehavior File="KillUntilComplete" MobIds="103089" TerminateWhen="IsObjectiveComplete(1,41097)">
                <HuntingGrounds>
                    <Hotspot X="681.1089" Y="4498.025" Z="-120.2052" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 449 -->
        <If Condition="HasQuest(41097)">
            <CustomBehavior File="RunCode" Code="PrintStep(449)" />
            <!-- had trouble going down the stairs for some reason -->
            <If Condition="Me.SubZoneId == 7844">
                <CustomBehavior File="MyCTM" X="660.0058" Y="4501.963" Z="-131.7905" />
            </If>
            <TurnIn Nav="Fly" QuestName="Shard of Vorgos" QuestId="41097" TurnInName="Portal Activation Altar" TurnInId="246884" X="294.8321" Y="4925.355" Z="-83.89065" />
        </If>
        <!-- 450 -->
        <If Condition="NeedsQuest(40412)">
            <CustomBehavior File="RunCode" Code="PrintStep(450)" />
            <PickUp Nav="Fly" QuestName="Azoran Must Die" QuestId="40412" GiverName="Lyana Darksorrow" GiverId="100823" X="294.8321" Y="4925.355" Z="-83.89065" />
        </If>
        <!-- 451 - 452 -->
        <If Condition="DoQuest(40412) &amp;&amp; !IsObjectiveComplete(1,40412)">
            <CustomBehavior File="RunCode" Code="PrintStep(451)" />
            <If Condition="Me.SubZoneId == 7844">
                <CustomBehavior File="InteractWith" QuestId="40412" MobId="247027" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="302.2647" Y="4935.062" Z="-83.89333" />
            </If>
            <CustomBehavior File="RunCode" Code="PrintStep(452)" />
            <CustomBehavior File="KillUntilComplete" MobIds="100019" TerminateWhen="IsObjectiveComplete(1,40412)">
                <HuntingGrounds>
                    <Hotspot X="707.5012" Y="4824.322" Z="-65.15475" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 453 -->
        <If Condition="QuestDone(40412) &amp;&amp; Me.SubZoneId == 8369">
            <CustomBehavior File="RunCode" Code="PrintStep(453)" />
            <CustomBehavior File="InteractWith" MobId="247029" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="665.0742" Y="4827.471" Z="-89.9126" />
        </If>
        <!-- 454 -->
        <If Condition="HasQuest(40412)">
            <CustomBehavior File="RunCode" Code="PrintStep(454)" />
            <TurnIn Nav="Fly" QuestName="Azoran Must Die" QuestId="40412" TurnInName="Lyana Darksorrow" TurnInId="100878" />
        </If>
        <!-- 455 -->
        <If Condition="DoQuest(41222)">
            <CustomBehavior File="RunCode" Code="PrintStep(455)" />
            <MoveTo X="710.5515" Y="4746.496" Z="-193.784" />
        </If>
        <!-- 456 -->
        <If Condition="HasQuest(41222) || NeedsQuest(41214)">
            <CustomBehavior File="RunCode" Code="PrintStep(456)" />
            <TurnIn Nav="Fly" QuestName="Into The Pit!" QuestId="41222" TurnInName="Angus Stormbrew" TurnInId="103437" X="710.5515" Y="4746.496" Z="-193.784" />
            <PickUp Nav="Fly" QuestName="Parts Unknown" QuestId="41214" GiverName="Angus Stormbrew" GiverId="103437" X="710.5515" Y="4746.496" Z="-193.784" />
        </If>
        <!-- 457 - 462 -->
        <If Condition="DoQuest(41214)">
            <CustomBehavior File="RunCode" Code="PrintStep(457)" />
            <CustomBehavior File="InteractWith" MobId="247389" QuestId="41214" QuestObjectiveIndex="1" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="708.1723" Y="4751.759" Z="-194.0068" />
            <CustomBehavior File="RunCode" Code="PrintStep(458)" />
            <CustomBehavior File="InteractWith" MobId="247393" QuestId="41214" QuestObjectiveIndex="2" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="714.3679" Y="4707.842" Z="-203.0887" />
            <CustomBehavior File="RunCode" Code="PrintStep(459)" />
            <CustomBehavior File="InteractWith" MobId="247394" QuestId="41214" QuestObjectiveIndex="3" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="763.2656" Y="4674.016" Z="-210.7676" />
            <CustomBehavior File="RunCode" Code="PrintStep(460)" />
            <CustomBehavior File="InteractWith" MobId="247395" QuestId="41214" QuestObjectiveIndex="4" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="767.9184" Y="4593.873" Z="-202.6894" />
            <CustomBehavior File="RunCode" Code="PrintStep(461)" />
            <!-- there is a hill that moveto has a problem with here -->
            <If Condition="!IsObjectiveComplete(5,41214)">
                <CustomBehavior File="MyCTM" X="759.5448" Y="4605.535" Z="-202.6931" />
                <CustomBehavior File="MyCTM" X="804.5924" Y="4633.766" Z="-194.3151" />
            </If>
            <CustomBehavior File="InteractWith" MobId="247392" QuestId="41214" QuestObjectiveIndex="5" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="804.5924" Y="4633.766" Z="-194.3151" />
            <CustomBehavior File="RunCode" Code="PrintStep(462)" />
            <CustomBehavior File="InteractWith" MobId="247390" QuestId="41214" QuestObjectiveIndex="6" NumOfTimes="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="826.684" Y="4672.645" Z="-179.3425" />
        </If>
        <!-- 463 -->
        <If Condition="HasQuest(41214) || NeedsQuest(41309)">
            <CustomBehavior File="RunCode" Code="PrintStep(463)" />
            <TurnIn Nav="Fly" QuestName="Parts Unknown" QuestId="41214" TurnInName="Angus Stormbrew" TurnInId="103437" X="824.0563" Y="4668.925" Z="-180.2363" />
            <PickUp Nav="Fly" QuestName="Mangelrath" QuestId="41309" GiverName="Angus Stormbrew" GiverId="103437" X="824.0563" Y="4668.925" Z="-180.2363" />
        </If>
        <!-- 464 - 465 -->
        <If Condition="DoQuest(41309)">
            <CustomBehavior File="RunCode" Code="PrintStep(464)" />
            <CustomBehavior File="KillUntilComplete" MobIds="103671" TerminateWhen="IsObjectiveComplete(1,41309)">
                <HuntingGrounds>
                    <Hotspot X="824.0563" Y="4668.925" Z="-180.2363" />
                </HuntingGrounds>
            </CustomBehavior>
            <CustomBehavior File="RunCode" Code="PrintStep(465)" />
            <CustomBehavior File="InteractWith" MobId="103852" QuestId="41309" QuestObjectiveIndex="2" NumOfTimes="1" InteractByGossipOptions="1" ProactiveCombatStrategy="ClearMobsThatWillAggro" X="823.6934" Y="4702.49" Z="-179.0435" />
        </If>
        <!-- 467 -->
        <If Condition="QuestDone(41309) &amp;&amp; Me.SubZoneId == 8055">
            <CustomBehavior File="MyCTM" X="761.6248" Y="4670.727" Z="-210.7676" />
        </If>
        <If Condition="HasQuest(41309)">
            <CustomBehavior File="RunCode" Code="PrintStep(467)" />
            <TurnIn Nav="Fly" QuestName="Mangelrath" QuestId="41309" TurnInName="Brambley Morrison" TurnInId="104161" X="761.6248" Y="4670.727" Z="-210.7676" />
        </If>
        <!-- HONORED NOW REQUIRED -->
        <!-- 468 -->
        <If Condition="!IsAtleastHonored()">
            <CustomBehavior File="RunCode" Code="PrintStep(468)" />
            <CustomBehavior File="UserDialog" AllowBotStop="True" SoundCue="Exclamation" SoundCueInterval="5" ExpiryAction="InputEnabled_Continue" Text="You must be atleast honored with The Nightfallen to continue." />
            <CustomBehavior File="Halt" />
        </If>
        <!-- 469 -->
        <If Condition="HasQuest(44561) || NeedsQuest(42828,44562)">
            <CustomBehavior File="RunCode" Code="PrintStep(469)" />
            <TurnIn Nav="Fly" QuestName="Seed of Hope" QuestId="44561" TurnInName="Valewalker Farodin" TurnInId="107126" X="1715.662" Y="4625.09" Z="123.9462" />
            <PickUp Nav="Fly" QuestName="Moths to a Flame" QuestId="42828" GiverName="Valewalker Farodin" GiverId="107126" X="1715.662" Y="4625.09" Z="123.9462" />
            <PickUp Nav="Fly" QuestName="Growing Strong" QuestId="44562" GiverName="Valewalker Farodin" GiverId="107126" X="1715.662" Y="4625.09" Z="123.9462" />
        </If>
        <!-- 470 -->
        <If Condition="DoQuest(42828)">
            <CustomBehavior File="RunCode" Code="PrintStep(470)" />
            <CustomBehavior File="InteractWith" QuestId="42828" NumOfTimes="500" ProactiveCombatStrategy="ClearMobsThatWillAggro">
                <HuntingGrounds>
                    <Hotspot X="1715.662" Y="4625.09" Z="123.9462" />
                </HuntingGrounds>
                <PursuitList>
                    <PursueUnit Id="109158" />
                </PursuitList>
            </CustomBehavior>
        </If>
        <!-- 471 -->
        <If Condition="HasQuest(42828)">
            <CustomBehavior File="RunCode" Code="PrintStep(471)" />
            <TurnIn Nav="Fly" QuestName="Moths to a Flame" QuestId="42828" TurnInName="Valewalker Farodin" TurnInId="107126" X="1715.662" Y="4625.09" Z="123.9462" />
        </If>
        <!-- 472 -->
        <If Condition="NeedsQuest(42829) &amp;&amp; IsThalyssraThirsty()">
            <If Condition="!HasAncientMana(50)">
                <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N] Zygor - Suramar - 469&quot;, 50)" />
                <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
            </If>
            <CustomBehavior File="InteractWith" MobId="97140" X="1724.658" Y="4614.287" Z="123.7945" />
            <CustomBehavior File="RunMacro" Macro="/click GossipTitleButton1" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
            <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
        </If>
        <If Condition="NeedsQuest(42829)">
            <CustomBehavior File="RunCode" Code="PrintStep(472)" />
            <PickUp Nav="Fly" QuestName="Make an Entrance" QuestId="42829" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1715.662" Y="4625.09" Z="123.9462" />
        </If>
        <!-- 473 -->
        <If Condition="NeedsQuest(41216) &amp;&amp; Me.SubZoneId == SUBZONE_ID_SHAL_ARAN">
            <CustomBehavior File="InteractWith" NumOfTimes="1" MobIds="254143" X="1786.192" Y="4620.642" Z="123.9933" />
        </If>
        <If Condition="NeedsQuest(41216)">
            <CustomBehavior File="RunCode" Code="PrintStep(473)" />
            <MoveTo X="1372.218" Y="3812.731" Z="21.11643" />
            <CustomBehavior File="MyCTM" X="1351.879" Y="3842.024" Z="13.69992" />
            <PickUp Nav="Fly" QuestName="Survival of the Fittest" QuestId="41216" GiverName="Nighteyes" GiverId="110987" />
        </If>
        <CustomBehavior File="Hooks\DoWhen" ActivityName="apply_mask" Command="Remove" />
        <!-- 474 -->
        <If Condition="DoQuest(41216)">
            <CustomBehavior File="RunCode" Code="PrintStep(474)" />
            <CustomBehavior File="InteractWith" QuestId="41216" NumOfTimes="500" InteractByUsingItemId="134119" ProactiveCombatStrategy="ClearMobsThatWillAggro" WaitTime="6000">
                <HuntingGrounds>
                    <Hotspot X="1372.218" Y="3812.731" Z="21.11643" />
                    <Hotspot X="1485.477" Y="3827.797" Z="15.44154" />
                </HuntingGrounds>
                <PursuitList>
                    <PursueUnit Id="105653" />
                    <PursueUnit Id="105656" />
                    <PursueUnit Id="99638" />
                    <PursueUnit Id="105640" />
                    <PursueUnit Id="105654" />
                    <PursueUnit Id="105644" />
                    <PursueUnit Id="103631" />
                    <PursueUnit Id="104837" />
                    <PursueUnit Id="105655" />
                </PursuitList>
            </CustomBehavior>
        </If>
        <CustomBehavior File="Hooks\DoWhen" UseWhen="ShouldCastMask()" LogExecution="true" ActivityName="apply_mask" StopMovingToConductActivity="true" AllowUseWhileMounted="true">
            <CustomBehavior File="RunCode" Code="CastMask()" />
            <CustomBehavior File="WaitTimer" WaitTime="4000" />
        </CustomBehavior>
        <!-- 475 -->
        <If Condition="HasQuest(41216) || NeedsQuest(41231)">
            <CustomBehavior File="RunCode" Code="PrintStep(475)" />
            <TurnIn Nav="Fly" QuestName="Survival of the Fittest" QuestId="41216" TurnInName="Nighteyes" TurnInId="111019" X="1513.069" Y="3994.252" Z="-12.2995" />
            <PickUp Nav="Fly" QuestName="Apex Predator" QuestId="41231" GiverName="Nighteyes" GiverId="111019" X="1513.069" Y="3994.252" Z="-12.2995" />
        </If>
        <!-- 476 -->
        <If Condition="DoQuest(41231)">
            <CustomBehavior File="RunCode" Code="PrintStep(476)" />
            <CustomBehavior File="KillUntilComplete" TerminateWhen="IsObjectiveComplete(1,41231)">
                <HuntingGrounds>
                    <Hotspot X="1470.083" Y="4066.207" Z="-13.86744" />
                </HuntingGrounds>
                <PursuitList>
                    <PursueUnit Id="103677" />
                </PursuitList>
            </CustomBehavior>
        </If>
        <!-- 477 -->
        <If Condition="HasQuest(41231) || NeedsQuest(43582)">
            <CustomBehavior File="RunCode" Code="PrintStep(477)" />
            <TurnIn Nav="Fly" QuestName="Apex Predator" QuestId="41231" TurnInName="Nighteyes" TurnInId="111019" X="1513.069" Y="3994.252" Z="-12.2995" />
            <PickUp Nav="Fly" QuestName="Shalassic Park" QuestId="43582" GiverName="Nighteyes" GiverId="111019" X="1513.069" Y="3994.252" Z="-12.2995" />
        </If>
        <!-- 478 - 480 -->
        <If Condition="DoQuest(43582)">
            <CustomBehavior File="RunCode" Code="PrintStep(478)" />
            <If Condition="!IsObjectiveComplete(1,43582)">
                <CustomBehavior File="InteractWith" MobId="111062" X="1481.71" Y="4049.166" Z="-14.48639" TerminateWhen="Me.InVehicle" />
            </If>
            <DisableBehavior Name="Combat" />
            <CustomBehavior File="RunCode" Code="PrintStep(479)" />
            <If Condition="!IsObjectiveComplete(2,43582)">
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1516.029, 3961.502, 5.249563), false);" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1500.292, 3910.733, 19.28840), false);" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1498.144, 3869.376, 31.73428), false);" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1486.712, 3856.559, 30.98180), false);" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1485.412, 3825.464, 30.87040), false);" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1462.756, 3808.687, 30.95982), false);" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1371.434, 3766.487, 36.21667), false);" />
            </If>
            <CustomBehavior File="RunCode" Code="PrintStep(480)" />
            <While Condition="!IsObjectiveComplete(3,43582)">
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1306.700, 3727.239, 16.72994));" TerminateWhen="IsObjectiveComplete(3,43582)" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1309.095, 3663.132, 27.17959));" TerminateWhen="IsObjectiveComplete(3,43582)" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1293.345, 3603.784, 35.45182));" TerminateWhen="IsObjectiveComplete(3,43582)" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1288.865, 3633.881, 35.57856));" TerminateWhen="IsObjectiveComplete(3,43582)" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1295.761, 3579.178, 35.45150));" TerminateWhen="IsObjectiveComplete(3,43582)" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1348.853, 3543.749, 35.45167));" TerminateWhen="IsObjectiveComplete(3,43582)" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1308.398, 3506.934, 35.51929));" TerminateWhen="IsObjectiveComplete(3,43582)" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1348.853, 3543.749, 35.45167));" TerminateWhen="IsObjectiveComplete(3,43582)" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1295.761, 3579.178, 35.45150));" TerminateWhen="IsObjectiveComplete(3,43582)" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1288.865, 3633.881, 35.57856));" TerminateWhen="IsObjectiveComplete(3,43582)" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1293.345, 3603.784, 35.45182));" TerminateWhen="IsObjectiveComplete(3,43582)" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1309.095, 3663.132, 27.17959));" TerminateWhen="IsObjectiveComplete(3,43582)" />
                <CustomBehavior File="RunCode" Code="await VehicleMove(new WoWPoint(1306.700, 3727.239, 16.72994));" TerminateWhen="IsObjectiveComplete(3,43582)" />
            </While>
            <EnableBehavior Name="Combat" />
        </If>
        <!-- 481 -->
        <If Condition="QuestDone(43582)">
            <CustomBehavior File="RunCode" Code="PrintStep(481)" />
            <MoveTo X="1372.218" Y="3812.731" Z="21.11643" />
            <CustomBehavior File="MyCTM" X="1351.879" Y="3842.024" Z="13.69992" />
            <TurnIn Nav="Fly" QuestName="Shalassic Park" QuestId="43582" TurnInName="Nighteyes" TurnInId="110987" />
        </If>
        <If Condition="NeedsQuest(41107) &amp;&amp; Me.SubZoneId == 8351">
            <MoveTo X="1214.059" Y="3886.588" Z="18.29058" />
            <CustomBehavior File="Misc\RunLua" Lua="MoveForwardStart();" WaitTime="900" />
            <CustomBehavior File="Misc\RunLua" Lua="MoveForwardStop();" WaitTime="100" />
            <CustomBehavior File="WaitTimer" WaitTime="5000" />
        </If>
        <!-- 482 -->
        <If Condition="NeedsQuest(41107,41256)">
            <CustomBehavior File="RunCode" Code="PrintStep(482)" />
            <PickUp Nav="Fly" QuestName="Bad Apples" QuestId="41107" GiverName="Keelay Moongrow" GiverId="103131" X="1356.974" Y="4035.571" Z="113.246" />
            <PickUp Nav="Fly" QuestName="Blast of Spice Fish" QuestId="41256" GiverName="Keelay Moongrow" GiverId="103131" X="1356.974" Y="4035.571" Z="113.246" />
        </If>
        <!-- 483 - 485 -->
        <If Condition="DoQuest(42829)">
            <If Condition="!IsObjectiveComplete(1,42829)">
                <CustomBehavior File="RunCode" Code="PrintStep(483)" />
                <CustomBehavior File="InteractWith" QuestId="42829" InteractByGossipOptions="1" MobId="109144" NumOfTimes="1" PreInteractMountStrategy="Dismount" X="1513.64" Y="3823.192" Z="114.9037" />
                <CustomBehavior File="WaitTimer" WaitTime="5000" />
            </If>
            <If Condition="!IsObjectiveComplete(2,42829)">
                <CustomBehavior File="RunCode" Code="PrintStep(484)" />
                <CustomBehavior File="InteractWith" QuestId="42829" MobId="109114" NumOfTimes="1" PreInteractMountStrategy="Dismount" X="1513.64" Y="3823.192" Z="114.9037" />
                <CustomBehavior File="WaitTimer" WaitTime="45000" />
            </If>
            <If Condition="!IsObjectiveComplete(3,42829)">
                <CustomBehavior File="RunCode" Code="PrintStep(485)" />
                <CustomBehavior File="InteractWith" QuestId="42829" MobId="108872" NumOfTimes="1" InteractByGossipOptions="1" PreInteractMountStrategy="Dismount" X="1514.659" Y="3629.984" Z="122.8405" />
                <CustomBehavior File="WaitTimer" WaitTime="5000" />
            </If>
        </If>
        <!-- 486 -->
        <If Condition="HasQuest(42829) || NeedsQuest(42832)">
            <CustomBehavior File="RunCode" Code="PrintStep(486)" />
            <TurnIn Nav="Fly" QuestName="Make an Entrance" QuestId="42829" TurnInName="Margaux" TurnInId="108872" X="1514.659" Y="3629.984" Z="122.8405" />
            <PickUp Nav="Fly" QuestName="The Fruit of Our Efforts" QuestId="42832" GiverName="Margaux" GiverId="108872" X="1514.659" Y="3629.984" Z="122.8405" />
        </If>
        <!-- 487 - 489 -->
        <If Condition="DoQuest(42832)">
            <CustomBehavior File="RunCode" Code="PrintStep(487,488,489)" />
            <CustomBehavior File="InteractWith" QuestId="42832" MobIds="251499,251506,251507" NumOfTimes="3" PreInteractMountStrategy="Dismount" X="1523.954" Y="3549.183" Z="136.5532" WaitTime="8000" />
        </If>
        <!-- 490 -->
        <If Condition="HasQuest(42832) || NeedsQuest(42833)">
            <CustomBehavior File="RunCode" Code="PrintStep(490)" />
            <TurnIn Nav="Fly" QuestName="The Fruit of Our Efforts" QuestId="42832" TurnInName="Margaux" TurnInId="108872" X="1523.954" Y="3549.183" Z="136.5532" />
            <PickUp Nav="Fly" QuestName="How It's Made: Arcwine" QuestId="42833" GiverName="Margaux" GiverId="108872" X="1523.954" Y="3549.183" Z="136.5532" />
        </If>
        <!-- 491 - 494 -->
        <If Condition="DoQuest(42833)">
            <If Condition="!IsObjectiveComplete(1,42833)">
                <CustomBehavior File="RunCode" Code="PrintStep(491)" />
                <CustomBehavior File="InteractWith" QuestId="42833" InteractByGossipOptions="1,1" MobId="109223" NumOfTimes="1" PreInteractMountStrategy="Dismount" X="1469.043" Y="3551.549" Z="132.8791" />
            </If>
            <If Condition="!IsObjectiveComplete(2,42833)">
                <CustomBehavior File="RunCode" Code="PrintStep(492)" />
                <CustomBehavior File="InteractWith" QuestId="42833" InteractByGossipOptions="1,1" MobId="109223" NumOfTimes="1" PreInteractMountStrategy="Dismount" X="1441.927" Y="3483.277" Z="133.1465" />
            </If>
            <If Condition="!IsObjectiveComplete(3,42833)">
                <CustomBehavior File="RunCode" Code="PrintStep(493,494)" />
                <CustomBehavior File="InteractWith" QuestId="42833" InteractByGossipOptions="1,1" MobId="109223" NumOfTimes="1" PreInteractMountStrategy="Dismount" X="1390.182" Y="3430.714" Z="132.8788" />
                <CustomBehavior File="WaitTimer" WaitTime="45000" />
            </If>
        </If>
        <!-- 495 -->
        <If Condition="HasQuest(42833) || NeedsQuest(42834)">
            <CustomBehavior File="RunCode" Code="PrintStep(495)" />
            <TurnIn Nav="Fly" QuestName="How It's Made: Arcwine" QuestId="42833" TurnInName="Sylverin" TurnInId="108870" X="1477.832" Y="3425.004" Z="132.8178" />
            <PickUp Nav="Fly" QuestName="Intense Concentration" QuestId="42834" GiverName="Sylverin" GiverId="108870" X="1477.832" Y="3425.004" Z="132.8178" />
        </If>
        <!-- 496 - 498 -->
        <If Condition="DoQuest(42834)">
            <If Condition="!IsObjectiveComplete(1,42834)">
                <CustomBehavior File="RunCode" Code="PrintStep(496)" />
                <CustomBehavior File="InteractWith" QuestId="42834" MobId="251556" NumOfTimes="1" PreInteractMountStrategy="Dismount" X="1477.832" Y="3425.004" Z="132.8178" />
            </If>
            <CustomBehavior File="RunCode" Code="PrintStep(497)" />
            <UseMount Value="false" />
            <!-- this is just a terrible way to do this, but i cant find how to get the ground effect id? -->
            <While Condition="!IsObjectiveComplete(2,42834)">
                <MoveTo X="1458.159" Y="3443.252" Z="130.8239" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
                <MoveTo X="1442.431" Y="3448.478" Z="130.8239" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
                <MoveTo X="1454.094" Y="3459.467" Z="130.8239" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
                <MoveTo X="1455.988" Y="3472.963" Z="130.8239" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
                <MoveTo X="1462.65" Y="3466.574" Z="130.8239" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
                <MoveTo X="1477.055" Y="3464.512" Z="130.8239" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
                <MoveTo X="1487.374" Y="3474.033" Z="130.8239" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
            </While>
            <If Condition="!IsObjectiveComplete(3,42834)">
                <CustomBehavior File="RunCode" Code="PrintStep(498)" />
                <CustomBehavior File="InteractWith" QuestId="42834" MobId="251565" NumOfTimes="1" PreInteractMountStrategy="Dismount" X="1477.832" Y="3425.004" Z="132.8178" />
            </If>
            <UseMount Value="true" />
        </If>
        <!-- 499 -->
        <If Condition="HasQuest(42834) || NeedsQuest(42835)">
            <CustomBehavior File="RunCode" Code="PrintStep(499)" />
            <TurnIn Nav="Fly" QuestName="Intense Concentration" QuestId="42834" TurnInName="Sylverin" TurnInId="108870" X="1477.832" Y="3425.004" Z="132.8178" />
            <PickUp Nav="Fly" QuestName="The Old Fashioned Way" QuestId="42835" GiverName="Sylverin" GiverId="108870" X="1477.832" Y="3425.004" Z="132.8178" />
        </If>
        <!-- 500 - 501 -->
        <If Condition="DoQuest(42835)">
            <If Condition="!IsObjectiveComplete(1,42835)">
                <CustomBehavior File="RunCode" Code="PrintStep(500)" />
                <CustomBehavior File="InteractWith" QuestId="42835" MobId="108872" NumOfTimes="1" PreInteractMountStrategy="Dismount" InteractByGossipOptions="1" X="1355.248" Y="3289.176" Z="132.8778" />
                <CustomBehavior File="WaitTimer" WaitTime="2000" />
            </If>
            <CustomBehavior File="RunCode" Code="PrintStep(501)" />
            <CustomBehavior File="RunCode" Code="await MakeWine();" />
        </If>
        <!-- 502 -->
        <If Condition="HasQuest(42835) || NeedsQuest(42837)">
            <CustomBehavior File="RunCode" Code="PrintStep(502)" />
            <TurnIn Nav="Fly" QuestName="The Old Fashioned Way" QuestId="42835" TurnInName="Margaux" TurnInId="108872" X="1355.248" Y="3289.176" Z="132.8778" />
            <PickUp Nav="Fly" QuestName="Balance to Spare" QuestId="42837" GiverName="Margaux" GiverId="108872" X="1355.248" Y="3289.176" Z="132.8778" />
        </If>
        <!-- 503 -->
        <If Condition="NeedsQuest(42836)">
            <CustomBehavior File="RunCode" Code="PrintStep(503)" />
            <PickUp Nav="Fly" QuestName="Silkwing Sabotage" QuestId="42836" GiverName="Sylverin" GiverId="112653" X="1371.193" Y="3257.562" Z="132.8846" />
        </If>
        <!-- 504 -->
        <If Condition="DoQuest(42837)">
            <CustomBehavior File="RunCode" Code="PrintStep(504)" />
            <CustomBehavior File="InteractWith" QuestId="42837" NumOfTimes="500" ProactiveCombatStrategy="ClearMobsThatWillAggro">
                <HuntingGrounds>
                    <Hotspot X="1367.29" Y="3227.853" Z="130.8203" />
                    <Hotspot X="1333.545" Y="3151.549" Z="132.9341" />
                    <Hotspot X="1246.529" Y="3136.601" Z="130.8201" />
                    <Hotspot X="1269.603" Y="3217.064" Z="130.8205" />
                    <Hotspot X="1341.403" Y="3253.043" Z="130.8881" />
                </HuntingGrounds>
                <PursuitList>
                    <PursueUnit Id="109023" />
                </PursuitList>
            </CustomBehavior>
        </If>
        <!-- 505 -->
        <If Condition="DoQuest(42836)">
            <CustomBehavior File="RunCode" Code="PrintStep(505)" />
            <CustomBehavior File="KillUntilComplete" TerminateWhen="IsObjectiveComplete(1,42836)">
                <HuntingGrounds>
                    <Hotspot X="1367.29" Y="3227.853" Z="130.8203" />
                    <Hotspot X="1333.545" Y="3151.549" Z="132.9341" />
                    <Hotspot X="1246.529" Y="3136.601" Z="130.8201" />
                    <Hotspot X="1269.603" Y="3217.064" Z="130.8205" />
                    <Hotspot X="1341.403" Y="3253.043" Z="130.8881" />
                </HuntingGrounds>
                <PursuitList>
                    <PursueUnit Id="109180" />
                </PursuitList>
            </CustomBehavior>
        </If>
        <!-- 506 -->
        <If Condition="QuestDone(42837) || QuestDone(42836) || NeedsQuest(42838)">
            <MoveTo X="1388.067" Y="3266.223" Z="132.8777" />
            <CustomBehavior File="ForcedDismount" />
            <CustomBehavior File="MyCTM" X="1403.816" Y="3252.064" Z="134.8037" />
        </If>
        <!-- 506 -->
        <If Condition="HasQuest(42837) || HasQuest(42836) || NeedsQuest(42838)">
            <CustomBehavior File="RunCode" Code="PrintStep(506)" />
            <TurnIn Nav="Fly" QuestName="Balance to Spare" QuestId="42837" TurnInName="Sylverin" TurnInId="108870" X="1402.432" Y="3253.044" Z="134.7884" />
            <TurnIn Nav="Fly" QuestName="Silkwing Sabotage" QuestId="42836" TurnInName="Sylverin" TurnInId="108870" X="1402.432" Y="3253.044" Z="134.7884" />
            <If Condition="NeedsQuest(42838)">
                <PickUp Nav="Fly" QuestName="Reversal" QuestId="42838" GiverName="Sylverin" GiverId="108870" X="1402.432" Y="3253.044" Z="134.7884" />
                <CustomBehavior File="WaitTimer" WaitTime="40000" />
            </If>
            <While Condition="DoQuest(42838)">
                <CustomBehavior File="MyCTM" X="1388.067" Y="3266.223" Z="132.8777" />
                <MoveTo X="1428.815" Y="3302.345" Z="132.6766" />
            </While>
        </If>
        <!-- 507 -->
        <If Condition="QuestDone(42838) || NeedsQuest(44084)">
            <CustomBehavior File="RunCode" Code="PrintStep(507)" />
            <MoveTo X="1388.067" Y="3266.223" Z="132.8777" />
            <CustomBehavior File="ForcedDismount" />
            <CustomBehavior File="MyCTM" X="1403.816" Y="3252.064" Z="134.8037" />
        </If>
        <If Condition="HasQuest(42838) || NeedsQuest(44084)">
            <TurnIn Nav="Fly" QuestName="Reversal" QuestId="42838" TurnInName="Sylverin" TurnInId="108870" X="1402.432" Y="3253.044" Z="134.7884" />
            <If Condition="NeedsQuest(44084)">
                <PickUp Nav="Fly" QuestName="Vengeance for Margaux" QuestId="44084" GiverName="Sylverin" GiverId="108870" X="1402.432" Y="3253.044" Z="134.7884" />
                <CustomBehavior File="MyCTM" X="1388.067" Y="3266.223" Z="132.8777" />
            </If>
        </If>
        <!-- 508 - 510-->
        <If Condition="DoQuest(44084)">
            <CustomBehavior File="RunCode" Code="PrintStep(508)" />
            <CustomBehavior File="KillUntilComplete" TerminateWhen="IsObjectiveComplete(1,44084)">
                <HuntingGrounds>
                    <Hotspot X="1381.946" Y="3275.877" Z="132.8779" />
                    <Hotspot X="1428.619" Y="3316.798" Z="132.6652" />
                    <Hotspot X="1470.629" Y="3403.613" Z="131.5479" />
                    <Hotspot X="1445.192" Y="3468.13" Z="130.8234" />
                </HuntingGrounds>
                <PursuitList>
                    <PursueUnit Id="108875" />
                    <PursueUnit Id="108871" />
                </PursuitList>
            </CustomBehavior>
            <If Condition="!IsObjectiveComplete(2,44084)">
                <CustomBehavior File="RunCode" Code="PrintStep(509,510)" />
                <DisableBehavior Name="Combat" />
                <MoveTo X="1215.259" Y="3109.413" Z="132.8846" />
                <CustomBehavior File="RunCode" Code="StyxWoW.Me.SetFacing(new WoWPoint(1209.2, 3105.023, 133.1468));" />
                <CustomBehavior File="Misc\RunLua" Lua="MoveForwardStart();" WaitTime="900" />
                <CustomBehavior File="Misc\RunLua" Lua="MoveForwardStop();" WaitTime="100" />
            </If>
        </If>
        <EnableBehavior Name="Combat" />
        <!-- 511 -->
        <If Condition="HasQuest(44084) || NeedsQuest(42839)">
            <CustomBehavior File="RunCode" Code="PrintStep(511)" />
            <TurnIn Nav="Fly" QuestName="Vengeance for Margaux" QuestId="44084" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1721.559" Y="4616.276" Z="123.9464" />
            <PickUp Nav="Fly" QuestName="Seek the Unsavory" QuestId="42839" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1721.559" Y="4616.276" Z="123.9464" />
        </If>
        <!-- 512 -->
        <If Condition="DoQuest(41256)">
            <CustomBehavior File="RunCode" Code="PrintStep(512)" />
            <CustomBehavior File="KillUntilComplete" MobIds="105014" TerminateWhen="IsObjectiveComplete(1,41256)">
                <HuntingGrounds>
                    <Hotspot X="1448.793" Y="4568.941" Z="121.6638" />
                    <Hotspot X="1321.765" Y="4515.043" Z="117.0051" />
                    <Hotspot X="1269.71" Y="4509.012" Z="116.9641" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 513 -->
        <If Condition="DoQuest(41107)">
            <CustomBehavior File="RunCode" Code="PrintStep(513)" />
            <CustomBehavior File="InteractWith" QuestId="41107" NumOfTimes="500" ProactiveCombatStrategy="ClearMobsThatWillAggro">
                <HuntingGrounds>
                    <Hotspot X="1448.793" Y="4568.941" Z="121.6638" />
                    <Hotspot X="1321.765" Y="4515.043" Z="117.0051" />
                    <Hotspot X="1269.71" Y="4509.012" Z="116.9641" />
                </HuntingGrounds>
                <PursuitList>
                    <PursueGameObject Id="247023" />
                </PursuitList>
            </CustomBehavior>
        </If>
        <!-- 514 -->
        <If Condition="HasQuest(41107) || HasQuest(41256) || NeedsQuest(41258)">
            <CustomBehavior File="RunCode" Code="PrintStep(514)" />
            <TurnIn Nav="Fly" QuestName="Bad Apples" QuestId="41107" TurnInName="Keelay Moongrow" TurnInId="103131" X="1356.974" Y="4035.571" Z="113.246" />
            <TurnIn Nav="Fly" QuestName="Blast of Spice Fish" QuestId="41256" TurnInName="Keelay Moongrow" TurnInId="103131" X="1356.974" Y="4035.571" Z="113.246" />
            <PickUp Nav="Fly" QuestName="Fruit of the Doom" QuestId="41258" GiverName="Keelay Moongrow" GiverId="103131" X="1356.974" Y="4035.571" Z="113.246" />
        </If>
        <!-- 515 - 517 -->
        <If Condition="DoQuest(41258)">
            <CustomBehavior File="RunCode" Code="PrintStep(515,516,517)" />
            <CustomBehavior File="InteractWith" QuestId="41258" NumOfTimes="500" ProactiveCombatStrategy="ClearMobsThatWillAggro">
                <HuntingGrounds>
                    <Hotspot X="1353.395" Y="4038.376" Z="114.3628" />
                    <Hotspot X="1383.284" Y="4052.54" Z="111.5764" />
                    <Hotspot X="1453.127" Y="3921.701" Z="113.0718" />
                </HuntingGrounds>
                <PursuitList>
                    <PursueUnit Id="103005" />
                </PursuitList>
            </CustomBehavior>
        </If>
        <!-- 518 -->
        <If Condition="HasQuest(41258)">
            <CustomBehavior File="RunCode" Code="PrintStep(518)" />
            <TurnIn Nav="Fly" QuestName="Fruit of the Doom" QuestId="41258" TurnInName="Keelay Moongrow" TurnInId="103131" X="1356.974" Y="4035.571" Z="113.246" />
        </If>
        <!-- pre-farm some mana for later -->
        <If Condition="!IsQuestCompleted(42840)  &amp;&amp; !HasAncientMana(800)">
            <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N] Zygor - Suramar - 469&quot;, 800)" />
            <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
        </If>
        <!-- 519 -->
        <If Condition="HasQuest(42839) || NeedsQuest(43969)">
            <CustomBehavior File="RunCode" Code="PrintStep(519)" />
            <TurnIn Nav="Fly" QuestName="Seek the Unsavory" QuestId="42839" TurnInName="Vanthir" TurnInId="107598" X="358.6021" Y="3975.843" Z="1.388276" />
            <PickUp Nav="Fly" QuestName="Hired Help" QuestId="43969" GiverName="Vanthir" GiverId="107598" X="358.6021" Y="3975.843" Z="1.388276" />
        </If>
        <!-- 520 -->
        <If Condition="DoQuest(43969)">
            <CustomBehavior File="RunCode" Code="PrintStep(520)" />
            <CustomBehavior File="InteractWith" QuestId="43969" MobId="107253" NumOfTimes="1" PreInteractMountStrategy="Dismount" InteractByGossipOptions="1" X="728.9383" Y="3943.648" Z="5.685581" />
            <CustomBehavior File="InteractWith" QuestId="43969" MobId="107253" NumOfTimes="1" PreInteractMountStrategy="Dismount" InteractByGossipOptions="1" X="728.9383" Y="3943.648" Z="5.685581" WaitTime="4000" />
            <CustomBehavior File="WaitTimer" WaitTime="8000" />
        </If>
        <!-- 521 -->
        <If Condition="HasQuest(43969) || NeedsQuest(42840)">
            <CustomBehavior File="RunCode" Code="PrintStep(521)" />
            <TurnIn Nav="Fly" QuestName="Hired Help" QuestId="43969" TurnInName="Arluin" TurnInId="107253" X="728.9383" Y="3943.648" Z="5.685581" />
            <PickUp Nav="Fly" QuestName="If Words Don't Work..." QuestId="42840" GiverName="Arluin" GiverId="107253" X="728.9383" Y="3943.648" Z="5.685581" />
        </If>
        <!-- 522 -->
        <If Condition="DoQuest(42840)">
            <CustomBehavior File="RunCode" Code="PrintStep(522)" />
            <CustomBehavior File="InteractWith" QuestId="42840" MobId="107253" NumOfTimes="1" PreInteractMountStrategy="Dismount" X="728.9383" Y="3943.648" Z="5.685581" />
            <CustomBehavior File="RunMacro" Macro="/click GossipTitleButton3" />
            <CustomBehavior File="RunMacro" Macro="/click StaticPopup1Button1" />
        </If>
        <!-- 522 -->
        <If Condition="HasQuest(42840) || NeedsQuest(42841,43352)">
            <CustomBehavior File="RunCode" Code="PrintStep(522)" />
            <TurnIn Nav="Fly" QuestName="If Words Don't Work..." QuestId="42840" TurnInName="Arluin" TurnInId="107253" X="728.9383" Y="3943.648" Z="5.685581" />
            <PickUp Nav="Fly" QuestName="A Big Score" QuestId="42841" GiverName="Arluin" GiverId="107253" X="728.9383" Y="3943.648" Z="5.685581" />
            <PickUp Nav="Fly" QuestName="Asset Security" QuestId="43352" GiverName="Arluin" GiverId="107253" X="728.9383" Y="3943.648" Z="5.685581" />
        </If>
        <!-- 523 - 524 -->
        <If Condition="DoQuest(43352)">
            <If Condition="!IsObjectiveComplete(1,43352)">
                <CustomBehavior File="RunCode" Code="PrintStep(523)" />
                <CustomBehavior File="InteractWith" QuestId="43352" MobId="110419" NumOfTimes="1" PreInteractMountStrategy="Dismount" X="654.4089" Y="4128.802" Z="1.493812" />
            </If>
            <If Condition="!IsObjectiveComplete(2,43352)">
                <CustomBehavior File="RunCode" Code="PrintStep(524)" />
                <!-- walk from the landing to the kill target -->
                <DisableBehavior Name="Combat" />
                <CustomBehavior File="MyCTM" X="684.3331" Y="4141.635" Z="31.55171" />
                <CustomBehavior File="MyCTM" X="686.1141" Y="4153.976" Z="30.20317" />
                <CustomBehavior File="MyCTM" X="692.4055" Y="4170.374" Z="30.17895" />
                <CustomBehavior File="RunCode" Code="StyxWoW.Me.SetFacing(new WoWPoint(689.9739, 4189.923, 32.56955))" />
                <CustomBehavior File="Misc\RunLua" Lua="MoveForwardStart();" WaitTime="150" />
                <CustomBehavior File="Misc\RunLua" Lua="JumpOrAscendStart();" WaitTime="150" />
                <CustomBehavior File="Misc\RunLua" Lua="MoveForwardStop();" WaitTime="1000" />
                <CustomBehavior File="Misc\RunLua" Lua="MoveForwardStart();" WaitTime="150" />
                <CustomBehavior File="Misc\RunLua" Lua="JumpOrAscendStart();" WaitTime="150" />
                <CustomBehavior File="Misc\RunLua" Lua="MoveForwardStop();" WaitTime="150" />
                <EnableBehavior Name="Combat" />
                <CustomBehavior File="KillUntilComplete" TerminateWhen="IsObjectiveComplete(2,43352)">
                    <HuntingGrounds>
                        <Hotspot X="689.9739" Y="4189.923" Z="32.56929" />
                    </HuntingGrounds>
                    <PursuitList>
                        <PursueUnit Id="110415" />
                    </PursuitList>
                </CustomBehavior>
                <!-- leave the platform -->
                <CustomBehavior File="MyCTM" X="693.3759" Y="4161.584" Z="30.19845" />
                <CustomBehavior File="RunCode" Code="StyxWoW.Me.SetFacing(new WoWPoint(756.0891, 4167.954, 1.493856))" />
                <CustomBehavior File="WaitTimer" WaitTime="1000" />
                <CustomBehavior File="Misc\RunLua" Lua="MoveForwardStart();" WaitTime="4000" />
                <CustomBehavior File="Misc\RunLua" Lua="MoveForwardStop();" WaitTime="150" />
            </If>
        </If>
        <!-- 526 -->
        <If Condition="DoQuest(42841)">
            <CustomBehavior File="RunCode" Code="PrintStep(526)" />
            <MoveTo X="1442.481" Y="4008.396" Z="113.0712" />
            <CustomBehavior File="InteractWith" QuestId="42841" MobId="251626" NumOfTimes="1" PreInteractMountStrategy="Dismount" X="1454.863" Y="3694.355" Z="115.0098" />
        </If>
        <!-- 527 -->
        <If Condition="HasQuest(42841) || HasQuest(43352) || NeedsQuest(42792)">
            <CustomBehavior File="RunCode" Code="PrintStep(527)" />
            <TurnIn Nav="Fly" QuestName="A Big Score" QuestId="42841" TurnInName="Arluin" TurnInId="107253" X="728.9383" Y="3943.648" Z="5.685581" />
            <TurnIn Nav="Fly" QuestName="Asset Security" QuestId="43352" TurnInName="Arluin" TurnInId="107253" X="728.9383" Y="3943.648" Z="5.685581" />
            <PickUp Nav="Fly" QuestName="Make Your Mark" QuestId="42792" GiverName="Arluin" GiverId="107253" X="728.9383" Y="3943.648" Z="5.685581" />
        </If>
        <!-- 528 - 531 -->
        <If Condition="DoQuest(42792)">
            <If Condition="!IsObjectiveComplete(2,42792)">
                <CustomBehavior File="RunCode" Code="PrintStep(528)" />
                <MoveTo X="814.5476" Y="4014.616" Z="1.49327" />
                <CustomBehavior File="InteractWith" QuestId="42792" MobId="107349" NumOfTimes="1" PreInteractMountStrategy="Dismount" InteractByGossipOptions="1" QuestObjectiveIndex="2" X="814.5476" Y="4014.616" Z="1.49327" />
            </If>
            <CustomBehavior File="RunCode" Code="PrintStep(529)" />
            <CustomBehavior File="InteractWith" QuestId="42792" MobId="107348" NumOfTimes="1" PreInteractMountStrategy="Dismount" InteractByGossipOptions="1" QuestObjectiveIndex="3" X="586.0084" Y="4015.937" Z="1.732223" />
            <CustomBehavior File="RunCode" Code="PrintStep(530)" />
            <CustomBehavior File="InteractWith" QuestId="42792" MobId="107350" NumOfTimes="1" PreInteractMountStrategy="Dismount" InteractByGossipOptions="1" QuestObjectiveIndex="1" X="570.5559" Y="3894.306" Z="5.685245" />
            <If Condition="!IsObjectiveComplete(4,42792)">
                <CustomBehavior File="RunCode" Code="PrintStep(531)" />
                <MoveTo X="798.0915" Y="4109.268" Z="2.184122" />
                <CustomBehavior File="MyCTM" X="779.8745" Y="4110.563" Z="2.991638" />
                <CustomBehavior File="RunCode" Code="Me.GetAuraById(202477).TryCancelAura()" />
                <CustomBehavior File="KillUntilComplete" TerminateWhen="IsObjectiveComplete(4,42792)">
                    <HuntingGrounds>
                        <Hotspot X="786.1823" Y="4109.854" Z="2.992425" />
                    </HuntingGrounds>
                    <PursuitList>
                        <PursueUnit Id="107333" />
                    </PursuitList>
                </CustomBehavior>
                <CustomBehavior File="MyCTM" X="800.9719" Y="4109.26" Z="1.493231" />
            </If>
        </If>
        <!-- 532 -->
        <If Condition="HasQuest(42792) || NeedsQuest(44052)">
            <CustomBehavior File="RunCode" Code="PrintStep(532)" />
            <!-- finishes Why Cant I Hold All This Mana? achievement -->
            <TurnIn Nav="Fly" QuestName="Make Your Mark" QuestId="42792" TurnInName="Vanthir" TurnInId="107598" X="358.6021" Y="3975.843" Z="1.388276" />
            <PickUp Nav="Fly" QuestName="And They Will Tremble" QuestId="44052" GiverName="Vanthir" GiverId="107598" X="358.6021" Y="3975.843" Z="1.388276" />
        </If>
        <!-- 533 -->
        <If Condition="HasQuest(44052)">
            <CustomBehavior File="RunCode" Code="PrintStep(533)" />
            <If Condition="Me.SubZoneId == SUBZONE_ID_STAR_CALLER_RETREAT || Me.SubZoneId == SUBZONE_ID_THE_WANING_CRESCENT">
                <CustomBehavior File="InteractWith" MobId="260269" NumOfTimes="1" PreInteractMountStrategy="Dismount" X="426.3297" Y="4010.224" Z="1.388369" />
            </If>
            <!-- now 8/11 story progress -->
            <TurnIn Nav="Fly" QuestName="And They Will Tremble" QuestId="44052" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1715.662" Y="4625.09" Z="123.9462" />
        </If>
        <!-- Needs 8000 in honored to continue -->
        <If Condition="NightfallenRepAmt() &lt; 17000">
            <CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[Zak]: 8000 rep in honored required to continue, loading rep profile&quot;);" />
            <CustomBehavior File="LoadProfile" ProfileName="reputation\[N] The Nightfallen Rep" RememberProfile="true" />
        </If>
        <!-- stop profile on death -->
        <CustomBehavior File="Hooks\DoWhen" ActivityName="stopondeath" AllowExecutionWhileNotAlive="true" AllowUseDuringCombat="true" LogExecution="true" UseWhen="!Me.IsAlive">
            <CustomBehavior File="Halt" />
        </CustomBehavior>
        <!-- 535 -->
        <If Condition="NeedsQuest(43309)">
            <CustomBehavior File="RunCode" Code="PrintStep(535)" />
            <If Condition="IsThalyssraThirsty()">
                <If Condition="!HasAncientMana(50)">
                    <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N] Zygor - Suramar - 469&quot;, 50)" />
                    <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
                </If>
                <CustomBehavior File="InteractWith" MobId="97140" X="1724.658" Y="4614.287" Z="123.7945" />
                <CustomBehavior File="RunMacro" Macro="/click GossipTitleButton1" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
            </If>
            <PickUp Nav="Fly" QuestName="The Perfect Opportunity" QuestId="43309" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1720.647" Y="4612.587" Z="123.8076" />
        </If>
        <!-- 536 - 537 -->
        <If Condition="HasQuest(43309) || NeedsQuest(43310)">
            <If Condition="Me.SubZoneId == SUBZONE_ID_SHAL_ARAN">
                <CustomBehavior File="RunCode" Code="PrintStep(536)" />
                <CustomBehavior File="InteractWith" MobId="254137" X="1787.23" Y="4630.941" Z="124.1549" />
            </If>
            <CustomBehavior File="RunCode" Code="PrintStep(537)" />
            <TurnIn Nav="Fly" QuestName="The Perfect Opportunity" QuestId="43309" TurnInName="Ly'leth Lunastre" TurnInId="107632" X="373.6976" Y="3998.14" Z="3.232426" />
            <PickUp Nav="Fly" QuestName="Either With Us" QuestId="43310" GiverName="Ly'leth Lunastre" GiverId="107632" X="373.6976" Y="3998.14" Z="3.232426" />
        </If>
        <!-- 538 -->
        <If Condition="NeedsQuest(43311)">
            <CustomBehavior File="RunCode" Code="PrintStep(538)" />
            <PickUp Nav="Fly" QuestName="Or Against Us" QuestId="43311" GiverName="Vanthir" GiverId="107598" X="373.6976" Y="3998.14" Z="3.232426" />
        </If>
        <!-- 539 -->
        <If Condition="DoQuest(43311)">
            <If Condition="!IsObjectiveComplete(1,43311)">
                <CustomBehavior File="RunCode" Code="PrintStep(539)" />
                <CustomBehavior File="InteractWith" QuestId="43311" MobId="107253" NumOfTimes="1" PreInteractMountStrategy="Dismount" InteractByGossipOptions="1" QuestObjectiveIndex="1" X="730.1185" Y="3941.716" Z="5.686221" />
            </If>
            <If Condition="!IsObjectiveComplete(2,43311)">
                <CustomBehavior File="RunCode" Code="PrintStep(540)" />
                <If Condition="!HasAncientMana(1200)">
                    <!-- leave the city before we try to farm -->
                    <If Condition="HasItem(141605) &amp;&amp; Me.BagItems.FirstOrDefault(h =&gt; h.Entry == 141605).CooldownTimeLeft.TotalMilliseconds == 0">
                        <CustomBehavior File="UseItem" ItemId="141605" WaitTime="2000" />
                    </If>
                    <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;&quot;, 1200)" />
                    <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
                </If>
                <CustomBehavior File="InteractWith" QuestId="43311" MobId="107253" NumOfTimes="1" PreInteractMountStrategy="Dismount" X="730.1185" Y="3941.716" Z="5.686221" />
                <CustomBehavior File="RunMacro" Macro="/click GossipTitleButton3" />
                <CustomBehavior File="RunMacro" Macro="/click StaticPopup1Button1" />
            </If>
        </If>
        <!-- 541 -->
        <If Condition="HasQuest(43311) || NeedsQuest(43315)">
            <CustomBehavior File="RunCode" Code="PrintStep(541)" />
            <TurnIn Nav="Fly" QuestName="Or Against Us" QuestId="43311" TurnInName="Arluin" TurnInId="107253" X="729.6091" Y="3943.091" Z="5.685436" />
            <PickUp Nav="Fly" QuestName="Death Becomes Him" QuestId="43315" GiverName="Arluin" GiverId="107253" X="729.6091" Y="3943.091" Z="5.685436" />
        </If>
        <!-- 542 -->
        <If Condition="DoQuest(43315)">
            <CustomBehavior File="RunCode" Code="PrintStep(542)" />
            <MoveTo X="1211.213" Y="3579.748" Z="1.762102" />
            <CustomBehavior File="KillUntilComplete" TerminateWhen="IsObjectiveComplete(1,43315)">
                <HuntingGrounds>
                    <Hotspot X="1199.082" Y="3519.6" Z="1.803605" />
                </HuntingGrounds>
                <PursuitList>
                    <PursueUnit Id="110365" />
                </PursuitList>
            </CustomBehavior>
        </If>
        <!-- 543 -->
        <If Condition="HasQuest(43315) || NeedsQuest(43313)">
            <CustomBehavior File="RunCode" Code="PrintStep(543)" />
            <TurnIn Nav="Fly" QuestName="Death Becomes Him" QuestId="43315" TurnInName="Arluin" TurnInId="107253" X="1194.502" Y="3487.682" Z="1.740284" />
            <PickUp Nav="Fly" QuestName="Rumor Has It" QuestId="43313" GiverName="Arluin" GiverId="107253" X="1194.502" Y="3487.682" Z="1.740284" />
            <!-- <TurnIn Nav="Fly" QuestName="Rumor Has It" QuestId="43313" TurnInName="Ly'leth Lunastre" TurnInId="107632" /> -->
        </If>
        <!-- 544 -->
        <If Condition="HasQuest(43310) || NeedsQuest(43312)">
            <CustomBehavior File="RunCode" Code="PrintStep(544)" />
            <TurnIn Nav="Fly" QuestName="Either With Us" QuestId="43310" TurnInName="Aurore" TurnInId="110679" X="1315.905" Y="3463.821" Z="32.61687" />
            <PickUp Nav="Fly" QuestName="Thinly Veiled Threats" QuestId="43312" GiverName="Aurore" GiverId="110679" X="1315.905" Y="3463.821" Z="32.61687" />
        </If>
        <If Condition="HasQuest(43312) || HasQuest(43313)">
            <CustomBehavior File="UserDialog" AllowBotStop="True" SoundCue="Exclamation" SoundCueInterval="5" ExpiryAction="InputEnabled_Continue" Text="The next quest is a group quest, you might have a hard time solo. It can be done solo manually fairly easily, its hard to script staying at a certain range of the detectors." />
        </If>
        <If Condition="DoQuest(43312) &amp;&amp;
            Me.ZoneId == 7637 &amp;&amp;
            Me.SubZoneId != SUBZONE_ID_SHAL_ARAN &amp;&amp;
            Me.IsOutdoors &amp;&amp;
            Me.SubZoneId != SUBZONE_ID_STAR_CALLER_RETREAT &amp;&amp;
            Me.SubZoneId != SUBZONE_ID_THE_WANING_CRESCENT &amp;&amp;
            Me.SubZoneId != SUBZONE_ID_EVERMOON_TERRACE &amp;&amp;
            Me.SubZoneId != SUBZONE_ID_MOONLIT_LANDING &amp;&amp;
            Me.SubZoneId != SUBZONE_ID_EVERMOON_COMMONS">
            <!-- leave the city to use the portal -->
            <If Condition="HasItem(141605) &amp;&amp; Me.BagItems.FirstOrDefault(h =&gt; h.Entry == 141605).CooldownTimeLeft.TotalMilliseconds == 0">
                <CustomBehavior File="UseItem" ItemId="141605" WaitTime="2000" />
            </If>
        </If>
        <If Condition="DoQuest(43312) &amp;&amp; !IsInCity()">
            <CustomBehavior File="InteractWith" MobId="254137" X="1787.23" Y="4630.941" Z="124.1549" />
        </If>
        <!-- 545 -->
        <If Condition="DoQuest(43312)">
            <CustomBehavior File="RunCode" Code="PrintStep(545)" />
            <MoveTo X="475.9494" Y="3751.56" Z="1.509977" />
            <CustomBehavior File="MyCTM" X="475.5648" Y="3728.699" Z="-1.545569" />
            <MoveTo X="872.3771" Y="3424.908" Z="-2.717356" />
            <MoveTo X="901.3271" Y="3430.272" Z="0.02131471" />
            <CustomBehavior File="InteractWith" MobId="110680" X="903.4386" Y="3434.494" Z="2.734623" />
            <MoveTo X="932.8204" Y="3472.92" Z="-1.551228" />
        </If>
        <!-- 546 -->
        <If Condition="DoQuest(43313) &amp;&amp; DistFrom546() &gt; 15.0 &amp;&amp; Settings.Instance.Status43313 == 0">
            <CustomBehavior File="RunCode" Code="PrintStep(546)" />
            <MoveTo X="1037.288" Y="3684.348" Z="-1.580568" />
            <MoveTo X="1179.773" Y="3730.572" Z="-1.552486" />
            <MoveTo X="1228.264" Y="3675.452" Z="-1.532632" />
            <MoveTo X="1214.85" Y="3520.404" Z="-1.551271" />
            <CustomBehavior File="MyCTM" X="1198.865" Y="3514.126" Z="1.804" />
            <MoveTo X="1157.795" Y="3421.917" Z="16.94091" />
        </If>
        <If Condition="DoQuest(43313) &amp;&amp; Settings.Instance.Status43313 == 0">
            <CustomBehavior File="MyCTM" X="1024.954" Y="3398.716" Z="21.60832" />
            <CustomBehavior File="InteractWith" MobId="110875" InteractByGossipOptions="1" X="1021.601" Y="3397.102" Z="21.58341" WaitForNpcs="false" />
            <CustomBehavior File="RunCode" Code="Settings.Instance.Status43313 = 1" />
            <CustomBehavior File="RunCode" Code="Settings.Instance.Save()" />
        </If>
        <!-- 547 -->
        <If Condition="DoQuest(43313) &amp;&amp; Settings.Instance.Status43313 == 1">
            <CustomBehavior File="RunCode" Code="PrintStep(547)" />
            <MoveTo X="1128.569" Y="3208.397" Z="20.00025" />
            <CustomBehavior File="InteractWith" MobId="110876" InteractByGossipOptions="1" X="1128.737" Y="3207.99" Z="20.00055" WaitForNpcs="false" />
            <CustomBehavior File="RunCode" Code="Settings.Instance.Status43313 = 2" />
            <CustomBehavior File="RunCode" Code="Settings.Instance.Save()" />
        </If>
        <!-- 548 -->
        <If Condition="DoQuest(43313) &amp;&amp; Settings.Instance.Status43313 == 2">
            <CustomBehavior File="RunCode" Code="PrintStep(548)" />
            <MoveTo X="1291.822" Y="3369.546" Z="21.49471" />
            <CustomBehavior File="InteractWith" MobId="110874" InteractByGossipOptions="1" X="1291.73" Y="3369.066" Z="21.49526" WaitForNpcs="false" />
            <CustomBehavior File="RunCode" Code="Settings.Instance.Status43313 = 3" />
            <CustomBehavior File="RunCode" Code="Settings.Instance.Save()" />
            <MoveTo X="1284.959" Y="3366.449" Z="21.37137" />
            <!-- leave the city to use the portal -->
            <If Condition="HasItem(141605) &amp;&amp; Me.BagItems.FirstOrDefault(h =&gt; h.Entry == 141605).CooldownTimeLeft.TotalMilliseconds == 0">
                <CustomBehavior File="UseItem" ItemId="141605" WaitTime="2000" />
            </If>
            <MoveTo X="1787.23" Y="4630.941" Z="124.1549" />
            <CustomBehavior File="InteractWith" MobId="254137" X="1787.23" Y="4630.941" Z="124.1549" />
        </If>
        <!-- 549 -->
        <If Condition="HasQuest(43313)">
            <CustomBehavior File="RunCode" Code="PrintStep(549)" />
            <TurnIn Nav="Fly" QuestName="Rumor Has It" QuestId="43313" TurnInName="Ly'leth Lunastre" TurnInId="107632" X="373.6976" Y="3998.14" Z="3.232426" />
        </If>
        <!-- 550 -->
        <If Condition="HasQuest(43312) || NeedsQuest(44040)">
            <CustomBehavior File="RunCode" Code="PrintStep(550)" />
            <CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[Zak]: you will probably die doing 550, sorry :(&quot;);" />
            <TurnIn Nav="Fly" QuestName="Thinly Veiled Threats" QuestId="43312" TurnInName="Aurore" TurnInId="110679" X="1315.905" Y="3463.821" Z="32.61687" />
            <PickUp Nav="Fly" QuestName="Vote of Confidence" QuestId="44040" GiverName="Aurore" GiverId="110679" X="1315.905" Y="3463.821" Z="32.61687" />
        </If>
        <!-- 551 -->
        <If Condition="HasQuest(44040) || NeedsQuest(43317)">
            <CustomBehavior File="RunCode" Code="PrintStep(551)" />
            <TurnIn Nav="Fly" QuestName="Vote of Confidence" QuestId="44040" TurnInName="Ly'leth Lunastre" TurnInId="107632" X="373.6976" Y="3998.14" Z="3.232426" />
            <PickUp Nav="Fly" QuestName="In the Bag" QuestId="43317" GiverName="Ly'leth Lunastre" GiverId="107632" X="373.6976" Y="3998.14" Z="3.232426" />
        </If>
        <!-- 552 -->
        <If Condition="HasQuest(43317)">
            <CustomBehavior File="RunCode" Code="PrintStep(552)" />
            <MoveTo X="1054.312" Y="4105.599" Z="18.42327" />
            <CustomBehavior File="MyCTM" X="1064.174" Y="4122.098" Z="19.49036" />
        </If>
        <!-- 553 -->
        <If Condition="HasQuest(43317) || NeedsQuest(43318)">
            <CustomBehavior File="RunCode" Code="PrintStep(553)" />
            <TurnIn Nav="Fly" QuestName="In the Bag" QuestId="43317" TurnInName="Ly'leth Lunastre" TurnInId="107632" X="1143.462" Y="4259.345" Z="21.32314" />
            <PickUp Nav="Fly" QuestName="Ly'leth's Champion" QuestId="43318" GiverName="Ly'leth Lunastre" GiverId="107632" X="1143.462" Y="4259.345" Z="21.32314" />
        </If>
        <!-- 554 -->
        <If Condition="DoQuest(43318)">
            <If Condition="!IsObjectiveComplete(1,43318)">
                <CustomBehavior File="RunCode" Code="PrintStep(554)" />
                <CustomBehavior File="InteractWith" MobId="107632" InteractByGossipOptions="1" X="1143.462" Y="4259.345" Z="21.32314" />
                <CustomBehavior File="WaitTimer" WaitTime="20000" />
            </If>
            <If Condition="!IsObjectiveComplete(2,43318)">
                <CustomBehavior File="RunCode" Code="PrintStep(556)" />
                <If Condition="Me.InVehicle">
                    <CustomBehavior File="RunCode" Type="Definition">
                        <![CDATA[
                        async Task VehicleMove2(WoWPoint moveTo)
                        {
                            while (Me.Location.Distance(moveTo) >= 5)
                            {
                                Navigator.MoveTo(moveTo);
                                await CombatAwareness2();
                                await Coroutine.Yield();
                            }
                        }

                        async Task VehicleKill2(uint unitId)
                        {
                            WoWUnit killMe = Unit(unitId);
                            if (killMe == null || Blacklist.Contains(killMe, BlacklistFlags.Combat)) return;

                            while (killMe != null && killMe.IsAlive)
                            {
                                while (Me.Location.Distance(killMe.Location) >= 39)
                                {
                                    Navigator.MoveTo(killMe.Location);
                                    await CombatAwareness2();
                                    await Coroutine.Yield();
                                }

                                if (killMe.IsAlive)
                                {
                                    await VehicleCombat2(killMe);
                                    await Coroutine.Yield();
                                }
                                await Coroutine.Yield();
                            }
                        }

                        async Task VehicleCombat2(WoWUnit vehicleKill)
                        {
                            WoWUnit vehicle = ObjectManager.GetObjectsOfType<WoWUnit>().FirstOrDefault(u => u.Entry == 110681);
                            if (Me.CurrentTarget != vehicleKill)
                            {
                                vehicleKill.Target();
                            }
                            if( Me.CurrentTarget.Distance > 5.0 ){
                                await Coroutine.Yield();
                                return;
                            }
                            if( vehicle.IsCasting || vehicle.IsChanneling ){
                                await Coroutine.Yield();
                                return;
                            }
                            await CommonCoroutines.StopMoving();
                            StyxWoW.Me.SetFacing(vehicleKill.Location);
                            await Coroutine.Sleep(150);
                            if( vehicleKill.IsCasting && vehicleKill.CanInterruptCurrentSpellCast ){
                                Styx.Helpers.KeyboardManager.KeyUpDown((char)System.Windows.Forms.Keys.D3);
                            }
                            if( Me.HealthPercent < 50.0 ){
                                Styx.Helpers.KeyboardManager.KeyUpDown((char)System.Windows.Forms.Keys.D4);
                            }
                            Styx.Helpers.KeyboardManager.KeyUpDown((char)System.Windows.Forms.Keys.D1);
                            Styx.Helpers.KeyboardManager.KeyUpDown((char)System.Windows.Forms.Keys.D2);
                            await Coroutine.Sleep(1050);
                        }

                        async Task CombatAwareness2()
                        {
                            WoWUnit vehicleId = ObjectManager.GetObjectsOfType<WoWUnit>().FirstOrDefault(u => u.Entry == 110681);
                            var killArray = ObjectManager.GetObjectsOfType<WoWUnit>().Where(u => u.CurrentTarget == vehicleId);

                            if (killArray == null) return;

                            foreach (WoWUnit killMe in killArray)
                            {
                                await VehicleCombat2(killMe);
                                await Coroutine.Yield();
                            }
                        }
                    ]]>
                    </CustomBehavior>
                    <CustomBehavior File="RunCode" QuestId="43318" QuestObjectiveIndex="2" Code="await VehicleMove2(new WoWPoint(1111.839, 4206.534, 179.352));" />
                    <CustomBehavior File="RunCode" QuestId="43318" QuestObjectiveIndex="2" Code="await VehicleKill2(110354);" />
                </If>
            </If>
        </If>
        <!-- 557 -->
        <If Condition="HasQuest(43318)">
            <CustomBehavior File="RunCode" Code="PrintStep(557)" />
            <TurnIn Nav="Fly" QuestName="Ly'leth's Champion" QuestId="43318" TurnInName="Ly'leth Lunastre" TurnInId="107632" X="1143.82" Y="4255.53" Z="21.32565" />
        </If>
        <!-- 9/11 -->
        <!-- 558 -->
        <If Condition="NeedsQuest(44053)">
            <CustomBehavior File="RunCode" Code="PrintStep(558)" />
            <PickUp Nav="Fly" QuestName="Friends With Benefits" QuestId="44053" GiverName="Lunastre Attendant" GiverId="111903" X="376.6967" Y="4002.271" Z="3.16" />
        </If>
        <!-- 559 -->
        <If Condition="HasQuest(44053) || NeedsQuest(42490, 43314)">
            <CustomBehavior File="RunCode" Code="PrintStep(559)" />
            <TurnIn Nav="Fly" QuestName="Friends With Benefits" QuestId="44053" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1716.547" Y="4633.391" Z="124.0054" />
            <If Condition="IsThalyssraThirsty()">
                <If Condition="!HasAncientMana(50)">
                    <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;&quot;, 50)" />
                    <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
                </If>
                <CustomBehavior File="InteractWith" MobId="97140" X="1724.658" Y="4614.287" Z="123.7945" />
                <CustomBehavior File="RunMacro" Macro="/click GossipTitleButton1" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
            </If>
            <PickUp Nav="Fly" QuestName="The Arcway: Opening the Arcway" QuestId="42490" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1724.658" Y="4614.287" Z="123.7945" />
            <PickUp Nav="Fly" QuestName="Court of Stars: Beware the Fury of a Patient Elf" QuestId="43314" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1724.658" Y="4614.287" Z="123.7945" />
        </If>
        <!-- 560 -->
        <If Condition="NeedsQuest(42491)">
            <CustomBehavior File="RunCode" Code="PrintStep(560)" />
            <If Condition="IsValtroisThirsty()">
                <If Condition="!HasAncientMana(50)">
                    <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;&quot;, 50)" />
                    <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
                </If>
                <CustomBehavior File="InteractWith" MobId="103155" X="1731.536" Y="4606.796" Z="123.8035" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
            </If>
            <PickUp Nav="Fly" QuestName="The Arcway: Long Buried Knowledge" QuestId="42491" GiverName="Arcanist Valtrois" GiverId="103155" X="1737.737" Y="4603.282" Z="96.28349" />
        </If>
        <!-- 561 -->
        <If Condition="DoQuest(42491) || DoQuest(42490)">
            <CustomBehavior File="RunCode" Code="PrintStep(561)" />
            <CustomBehavior File="UserDialog" AllowBotStop="True" SoundCue="Exclamation" SoundCueInterval="5" ExpiryAction="InputEnabled_Continue" Text="The next step (561) requires you to complete the mythic only dungeon The Arcway." />
            <CustomBehavior File="Halt" />
        </If>
        <!-- 564 -->
        <If Condition="HasQuest(42490)">
            <CustomBehavior File="RunCode" Code="PrintStep(564)" />
            <TurnIn Nav="Fly" QuestName="The Arcway: Opening the Arcway" QuestId="42490" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1737.737" Y="4603.282" Z="96.28349" />
        </If>
        <!-- 565 -->
        <If Condition="HasQuest(42491)">
            <CustomBehavior File="RunCode" Code="PrintStep(565)" />
            <TurnIn Nav="Fly" QuestName="The Arcway: Long Buried Knowledge" QuestId="42491" TurnInName="Arcanist Valtrois" TurnInId="103155" X="1737.737" Y="4603.282" Z="96.28349" />
        </If>
        <!-- 566 -->
        <If Condition="DoQuest(43314)">
            <CustomBehavior File="RunCode" Code="PrintStep(566)" />
            <CustomBehavior File="UserDialog" AllowBotStop="True" SoundCue="Exclamation" SoundCueInterval="5" ExpiryAction="InputEnabled_Continue" Text="The next step (561) requires you to complete the mythic only dungeon Court of Stars" />
            <CustomBehavior File="Halt" />
        </If>
        <!-- 568 -->
        <If Condition="HasQuest(43314)">
            <CustomBehavior File="RunCode" Code="PrintStep(568)" />
            <TurnIn Nav="Fly" QuestName="Court of Stars: Beware the Fury of a Patient Elf" QuestId="43314" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1724.658" Y="4614.287" Z="123.7945" />
        </If>
        <!-- REVERED NOW REQUIRED -->
        <!-- 569 -->
        <If Condition="!IsAtleastRevered()">
            <CustomBehavior File="RunCode" Code="PrintStep(569)" />
            <CustomBehavior File="UserDialog" AllowBotStop="True" SoundCue="Exclamation" SoundCueInterval="5" ExpiryAction="InputEnabled_Continue" Text="You must be atleast revered with The Nightfallen to continue." />
            <CustomBehavior File="Halt" />
        </If>
        <!-- 570 -->
        <If Condition="HasQuest(44562) || NeedsQuest(44563)">
            <CustomBehavior File="RunCode" Code="PrintStep(570)" />
            <TurnIn Nav="Fly" QuestName="Growing Strong" QuestId="44562" TurnInName="Valewalker Farodin" TurnInId="107126" X="1715.989" Y="4627.524" Z="123.9469" />
            <PickUp Nav="Fly" QuestName="Redemption for the Fallen" QuestId="44563" GiverName="Valewalker Farodin" GiverId="107126" />
        </If>
        <!-- 571 -->
        <If Condition="NightfallenRepAmt() &lt; 28000">
            <CustomBehavior File="RunCode" Code="PrintStep(571)" />
            <CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[Zak]: 7000 rep in revered required to continue, loading rep profile&quot;);" />
            <CustomBehavior File="LoadProfile" ProfileName="reputation\[N] The Nightfallen Rep" RememberProfile="true" />
        </If>
        <!-- 572 -->
        <If Condition="NeedsQuest(44152)">
            <CustomBehavior File="RunCode" Code="PrintStep(572)" />
            <PickUp Nav="Fly" QuestName="A Growing Crisis" QuestId="44152" GiverName="Valewalker Farodin" GiverId="107126" X="1714.355" Y="4633.261" Z="124.0064" />
        </If>
        <!-- 573 - 574 -->
        <If Condition="HasQuest(44152) || NeedsQuest(43361,43360)">
            <CustomBehavior File="RunCode" Code="PrintStep(573,574)" />
            <CustomBehavior File="InteractWith" MobId="254133" X="1760.368" Y="4661.349" Z="123.993" />
            <TurnIn Nav="Fly" QuestName="A Growing Crisis" QuestId="44152" TurnInName="Valewalker Farodin" TurnInId="112967" X="2363.79" Y="5439.44" Z="16.06" />
            <PickUp Nav="Fly" QuestName="Fragments of Disaster" QuestId="43361" GiverName="Valewalker Farodin" GiverId="112967" X="2363.79" Y="5439.44" Z="16.06" />
            <PickUp Nav="Fly" QuestName="The Shardmaidens" QuestId="43360" GiverName="Valewalker Farodin" GiverId="112967" X="2363.79" Y="5439.44" Z="16.06" />
        </If>
        <!-- 575 -->
        <If Condition="DoQuest(43361)">
            <CustomBehavior File="RunCode" Code="PrintStep(575)" />
            <CustomBehavior File="InteractWith" MobId="252010" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(1, 43361)">
                <HuntingGrounds>
                    <Hotspot X="2252.155" Y="5454.917" Z="3.617991" />
                    <Hotspot X="2199.503" Y="5448.917" Z="1.65228" />
                    <Hotspot X="2164.963" Y="5490.646" Z="1.652236" />
                    <Hotspot X="2210.54" Y="5504.208" Z="1.652255" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 576 -->
        <If Condition="DoQuest(43360)">
            <CustomBehavior File="RunCode" Code="PrintStep(576)" />
            <CustomBehavior File="KillUntilComplete" MobIds="105554" QuestId="43360" QuestObjectiveIndex="1">
                <HuntingGrounds>
                    <Hotspot X="2252.155" Y="5454.917" Z="3.617991" />
                    <Hotspot X="2199.503" Y="5448.917" Z="1.65228" />
                    <Hotspot X="2164.963" Y="5490.646" Z="1.652236" />
                    <Hotspot X="2210.54" Y="5504.208" Z="1.652255" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 577 -->
        <If Condition="DoQuest(43361)">
            <CustomBehavior File="RunCode" Code="PrintStep(577)" />
            <MoveTo X="2362.608" Y="5437.295" Z="15.84388" />
        </If>
        <!-- 578 -->
        <If Condition="HasQuest(43361) || HasQuest(43360) || NeedsQuest(44156)">
            <CustomBehavior File="RunCode" Code="PrintStep(578)" />
            <TurnIn Nav="Fly" QuestName="Fragments of Disaster" QuestId="43361" TurnInName="Valewalker Farodin" TurnInId="112967" X="2362.608" Y="5437.295" Z="15.84388" />
            <TurnIn Nav="Fly" QuestName="The Shardmaidens" QuestId="43360" TurnInName="Valewalker Farodin" TurnInId="112967" X="2362.608" Y="5437.295" Z="15.84388" />
            <PickUp Nav="Fly" QuestName="Another Arcan'dor Closes..." QuestId="44156" GiverName="Valewalker Farodin" GiverId="112967" X="2362.608" Y="5437.295" Z="15.84388" />
        </If>
        <!-- 579 -->
        <If Condition="HasQuest(44156) &amp;&amp; Me.SubZoneId == 8163">
            <CustomBehavior File="RunCode" Code="PrintStep(579)" />
            <CustomBehavior File="InteractWith" MobId="260251" X="2362.608" Y="5437.295" Z="15.84388" />
        </If>
        <!-- 580 -->
        <If Condition="HasQuest(44156) || NeedsQuest(43362)">
            <CustomBehavior File="RunCode" Code="PrintStep(580)" />
            <TurnIn Nav="Fly" QuestName="Another Arcan'dor Closes..." QuestId="44156" TurnInName="Valewalker Farodin" TurnInId="107126" X="1713.57" Y="4632.306" Z="124.0053" />
            <PickUp Nav="Fly" QuestName="The Emerald Nightmare: The Stuff of Dreams" QuestId="43362" GiverName="Valewalker Farodin" GiverId="107126" X="1713.57" Y="4632.306" Z="124.0053" />
        </If>
        <!-- 581 -->
        <If Condition="NeedsQuest(40125)">
            <CustomBehavior File="RunCode" Code="PrintStep(581)" />
            <If Condition="IsThalyssraThirsty()">
                <If Condition="!HasAncientMana(50)">
                    <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;&quot;, 50)" />
                    <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
                </If>
                <CustomBehavior File="InteractWith" MobId="97140" X="1724.658" Y="4614.287" Z="123.7945" />
                <CustomBehavior File="RunMacro" Macro="/click GossipTitleButton1" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
            </If>
            <PickUp Nav="Fly" QuestName="Branch of the Arcan'dor" QuestId="40125" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1713.57" Y="4632.306" Z="124.0053" />
        </If>
        <!-- 582 -->
        <If Condition="HasQuest(40125)">
            <CustomBehavior File="RunCode" Code="PrintStep(582)" />
            <TurnIn Nav="Fly" QuestName="Branch of the Arcan'dor" QuestId="40125" TurnInName="First Arcanist Thalyssra" TurnInId="97140" X="1713.57" Y="4632.306" Z="124.0053" />
        </If>
        <!-- 583 -->
        <If Condition="DoQuest(43362)">
            <CustomBehavior File="RunCode" Code="PrintStep(583)" />
            <CustomBehavior File="UserDialog" AllowBotStop="True" SoundCue="Exclamation" SoundCueInterval="5" ExpiryAction="InputEnabled_Continue" Text="The next steps require you to run the Emerald Nightmare raid. Beyond the scope of this script." />
            <CustomBehavior File="Halt" />
        </If>
        <!-- 587 -->
        <If Condition="HasQuest(43362)">
            <CustomBehavior File="RunCode" Code="PrintStep(587)" />
            <TurnIn Nav="Fly" QuestName="The Emerald Nightmare: The Stuff of Dreams" QuestId="43362" TurnInName="Valewalker Farodin" TurnInId="107126" X="1713.57" Y="4632.306" Z="124.0053" />
        </If>
        <!-- 588 -->
        <!-- Needs 8000 in honored to continue -->
        <If Condition="NightfallenRepAmt() &lt; 41000">
            <CustomBehavior File="RunCode" Code="PrintStep(588)" />
            <CustomBehavior File="RunCode" Code="Logging.Write(System.Windows.Media.Colors.Yellow, &quot;[Zak]: 20,000 rep in revered required to continue, loading rep profile&quot;);" />
            <CustomBehavior File="LoadProfile" ProfileName="reputation\[N] The Nightfallen Rep" RememberProfile="true" />
        </If>
        <!-- 589 -->
        <If Condition="NeedsQuest(43502)">
            <CustomBehavior File="RunCode" Code="PrintStep(589)" />
            <PickUp Nav="Fly" QuestName="A Change of Seasons" QuestId="43502" GiverName="Valewalker Farodin" GiverId="107126" X="1722.464" Y="4615.493" Z="123.8015" />
        </If>
        <!-- 590 -->
        <If Condition="HasQuest(43502) || NeedsQuest(43562)">
            <CustomBehavior File="RunCode" Code="PrintStep(590)" />
            <If Condition="IsValtroisThirsty()">
                <If Condition="!HasAncientMana(50)">
                    <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 50)" />
                    <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
                </If>
                <CustomBehavior File="InteractWith" MobId="103155" X="1731.536" Y="4606.796" Z="123.8035" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
            </If>
            <TurnIn Nav="Fly" QuestName="A Change of Seasons" QuestId="43502" TurnInName="Arcanist Valtrois" TurnInId="103155" X="1737.695" Y="4603.249" Z="96.28294" />
            <PickUp Nav="Fly" QuestName="Giving It All We've Got" QuestId="43562" GiverName="Arcanist Valtrois" GiverId="103155" X="1737.695" Y="4603.249" Z="96.28294" />
        </If>
        <!-- 591-597 -->
        <!-- these were already done earlier in the guide -->
        <!-- 598 -->
        <If Condition="DoQuest(43562)">
            <CustomBehavior File="RunCode" Code="PrintStep(598)" />
            <!-- feed -->
            <If Condition="IsValtroisThirsty()">
                <If Condition="!HasAncientMana(50)">
                    <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 50)" />
                    <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
                </If>
                <CustomBehavior File="InteractWith" MobId="103155" X="1731.536" Y="4606.796" Z="123.8035" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
            </If>
            <!-- quest -->
            <CustomBehavior File="InteractWith" MobId="103155" InteractByGossipOptions="1" X="1737.695" Y="4603.249" Z="96.28294" />
        </If>
        <!-- 599 -->
        <If Condition="HasQuest(43562) || NeedsQuest(43563,43564)">
            <CustomBehavior File="RunCode" Code="PrintStep(599)" />
            <TurnIn Nav="Fly" QuestName="Giving It All We've Got" QuestId="43562" TurnInName="Arcanist Valtrois" TurnInId="103155" X="1737.695" Y="4603.249" Z="96.28294" />
            <PickUp Nav="Fly" QuestName="Ephemeral Manastorm Projector" QuestId="43563" GiverName="Arcanist Valtrois" GiverId="103155" X="1737.695" Y="4603.249" Z="96.28294" />
            <PickUp Nav="Fly" QuestName="Flow Control" QuestId="43564" GiverName="Arcanist Valtrois" GiverId="103155" X="1737.695" Y="4603.249" Z="96.28294" />
        </If>
        <!-- 600 -->
        <If Condition="NeedsQuest(43565)">
            <CustomBehavior File="RunCode" Code="PrintStep(600)" />
            <!-- feed -->
            <If Condition="IsOculethThirsty()">
                <If Condition="!HasAncientMana(50)">
                    <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 50)" />
                    <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
                </If>
                <CustomBehavior File="InteractWith" MobId="98548" X="1773.629" Y="4626.259" Z="123.9869" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
            </If>
            <!-- quest -->
            <PickUp Nav="Fly" QuestName="Bring Home the Beacon" QuestId="43565" GiverName="Chief Telemancer Oculeth" GiverId="98548" X="1737.695" Y="4603.249" Z="96.28294" />
        </If>
        <!-- 601 - 603 -->
        <If Condition="DoQuest(43565)">
            <!-- take the portal -->
            <If Condition="Me.SubZoneId == 7928">
                <CustomBehavior File="InteractWith" MobId="254137" X="1784.063" Y="4630.213" Z="123.9923" />
            </If>
            <If Condition="!IsObjectiveComplete(1,43565)">
                <CustomBehavior File="RunCode" Code="PrintStep(601)" />
                <MoveTo X="659.0435" Y="3924.568" Z="5.685922" />
            </If>
            <While Condition="!IsObjectiveComplete(1,43565)">
                <CustomBehavior File="UseItem" ItemId="140257" />
            </While>
            <If Condition="!IsObjectiveComplete(2,43565)">
                <CustomBehavior File="RunCode" Code="PrintStep(602)" />
                <MoveTo X="624.675" Y="3917.662" Z="5.685746" />
            </If>
            <While Condition="!IsObjectiveComplete(2,43565)">
                <CustomBehavior File="UseItem" ItemId="140257" />
            </While>
            <If Condition="!IsObjectiveComplete(3,43565)">
                <CustomBehavior File="RunCode" Code="PrintStep(603)" />
                <MoveTo X="357.1834" Y="3835.144" Z="1.493718" />
            </If>
            <While Condition="!IsObjectiveComplete(3,43565)">
                <CustomBehavior File="UseItem" ItemId="140257" />
            </While>
        </If>
        <!-- 604 - 605 -->
        <If Condition="DoQuest(43564) &amp;&amp; !IsObjectiveComplete(1,43564) &amp;&amp; !IsObjectiveComplete(2,43564)">
            <If Condition="!IsObjectiveComplete(1,43564)">
                <CustomBehavior File="RunCode" Code="PrintStep(604)" />
                <CustomBehavior File="InteractWith" MobId="252776" X="626.1741" Y="4118.832" Z="1.493733" />
            </If>
            <If Condition="!IsObjectiveComplete(2,43564)">
                <CustomBehavior File="RunCode" Code="PrintStep(605)" />
                <CustomBehavior File="InteractWith" MobId="252779" X="1125.279" Y="3893.982" Z="1.305297" />
            </If>
        </If>
        <!-- 606 -->
        <If Condition="DoQuest(43563)">
            <CustomBehavior File="UserDialog" AllowBotStop="True" SoundCue="Exclamation" SoundCueInterval="5" ExpiryAction="InputEnabled_Continue" Text="The next step requires you to kill elite mobs. If you're not pretty well geared you may need help." />
            <CustomBehavior File="Hooks\DoWhen" ActivityName="apply_mask" Command="Remove" />
            <CustomBehavior File="RunCode" Code="PrintStep(606)" />
            <MoveTo X="1153.572" Y="3725.675" Z="-1.524498" />
            <CustomBehavior File="RunCode" Code="Me.GetAuraById(202477).TryCancelAura()" />
            <UseMount Value="false" />
            <CustomBehavior File="KillUntilComplete" MobIds="109670" QuestId="43563" QuestObjectiveIndex="1">
                <HuntingGrounds>
                    <Hotspot X="1163.101" Y="3676.35" Z="0.8867201" />
                    <Hotspot X="1095.154" Y="3661.217" Z="0.7877431" />
                </HuntingGrounds>
            </CustomBehavior>
            <UseMount Value="true" />
            <CustomBehavior File="Hooks\DoWhen" LogExecution="true" AllowExecutionWhileNotAlive="false" ActivityName="apply_mask" UseWhen="ShouldCastMask()" StopMovingToConductActivity="true" AllowUseWhileMounted="true">
                <CustomBehavior File="RunCode" Code="await CastMask()" />
            </CustomBehavior>
            <MoveTo X="1031.707" Y="3711.045" Z="-2.586127" />
        </If>
        <!-- 607 -->
        <If Condition="DoQuest(43564)">
            <CustomBehavior File="RunCode" Code="PrintStep(607)" />
            <CustomBehavior File="UserDialog" AllowBotStop="True" SoundCue="Exclamation" SoundCueInterval="5" ExpiryAction="InputEnabled_Continue" Text="The next step requires you to run through a bunch of elite mobs, you might die." />
            <If Condition="!IsObjectiveComplete(3,43564)">
                <CustomBehavior File="RunCode" Code="PrintStep(607)" />
                <CustomBehavior File="InteractWith" MobId="252783" IgnoreCombat="true" X="1248.596" Y="3331.287" Z="20.1206" />
            </If>
            <If Condition="HasItem(141605) &amp;&amp; Me.BagItems.FirstOrDefault(h =&gt; h.Entry == 141605).CooldownTimeLeft.TotalMilliseconds == 0">
                <CustomBehavior File="UseItem" ItemId="141605" WaitTime="2000" />
            </If>
        </If>
        <!-- 608 -->
        <If Condition="HasQuest(43563) || HasQuest(43564)">
            <CustomBehavior File="RunCode" Code="PrintStep(608)" />
            <!-- feed -->
            <If Condition="IsValtroisThirsty()">
                <If Condition="!HasAncientMana(50)">
                    <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 50)" />
                    <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
                </If>
                <CustomBehavior File="InteractWith" MobId="103155" X="1731.536" Y="4606.796" Z="123.8035" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
            </If>
            <!-- quest -->
            <TurnIn Nav="Fly" QuestName="Ephemeral Manastorm Projector" QuestId="43563" TurnInName="Arcanist Valtrois" TurnInId="103155" X="1737.695" Y="4603.249" Z="96.28294" />
            <TurnIn Nav="Fly" QuestName="Flow Control" QuestId="43564" TurnInName="Arcanist Valtrois" TurnInId="103155" X="1737.695" Y="4603.249" Z="96.28294" />
        </If>
        <!-- 609 -->
        <If Condition="HasQuest(43565)">
            <CustomBehavior File="RunCode" Code="PrintStep(609)" />
            <!-- feed -->
            <If Condition="IsOculethThirsty()">
                <If Condition="!HasAncientMana(50)">
                    <CustomBehavior File="RunCode" Code="PrepManaFarm(&quot;../[N]Zakrn_Zygor_Suramar&quot;, 50)" />
                    <CustomBehavior File="LoadProfile" ProfileName="gather/[N]-Ancient-Mana" RememberProfile="true" />
                </If>
                <CustomBehavior File="InteractWith" MobId="98548" X="1773.629" Y="4626.259" Z="123.9869" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteButton" />
                <CustomBehavior File="RunMacro" Macro="/click QuestFrameCompleteQuestButton" />
            </If>
            <!-- quest -->
            <TurnIn Nav="Fly" QuestName="Bring Home the Beacon" QuestId="43565" TurnInName="Chief Telemancer Oculeth" TurnInId="98548" X="1737.695" Y="4603.249" Z="96.28294" />
        </If>
        <!-- 610 -->
        <If Condition="((int)Me.GetReputationLevelWith(1859)) &lt; 7">
            <CustomBehavior File="RunCode" Code="PrintStep(610)" />
            <CustomBehavior File="UserDialog" AllowBotStop="True" SoundCue="Exclamation" SoundCueInterval="5" ExpiryAction="InputEnabled_Continue" Text="You must be exalted with The Nightfallen to continue." />
            <CustomBehavior File="Halt" />
        </If>
        <!-- 611 -->
        <If Condition="HasQuest(44563)">
            <CustomBehavior File="RunCode" Code="PrintStep(611)" />
            <TurnIn Nav="Fly" QuestName="Redemption for the Fallen" QuestId="44563" TurnInName="Valewalker Farodin" TurnInId="107126" X="1731.433" Y="4600.34" Z="123.9466" />
        </If>
        <!-- 612 -->
        <If Condition="NeedsQuest(43567)">
            <CustomBehavior File="RunCode" Code="PrintStep(612)" />
            <PickUp Nav="Fly" QuestName="All In" QuestId="43567" GiverName="First Arcanist Thalyssra" GiverId="97140" X="1731.433" Y="4600.34" Z="123.9466" />
            <CustomBehavior File="WaitTimer" WaitTime="55000" />
        </If>
        <!-- 613 - 614 -->
        <If Condition="DoQuest(43567)">
            <!-- SCENARIO -->
            <If Condition="StageNumber() == 1">
                <CustomBehavior File="KillUntilComplete" MobIds="113191" TerminateWhen="StageNumber() != 1">
                    <HuntingGrounds>
                        <Hotspot X="3168.986" Y="5074.731" Z="623.2028" />
                        <Hotspot X="3199.137" Y="4980.621" Z="624.0922" />
                    </HuntingGrounds>
                </CustomBehavior>
            </If>
            <While Condition="StageNumber() == 2 || StageNumber() == 3">
                <MoveTo X="3213.082" Y="4920.253" Z="619.2164" />
                <CustomBehavior File="WaitTimer" WaitTime="2000" />
            </While>
            <If Condition="StageNumber() == 4">
                <CustomBehavior File="InteractWith" MobId="113426" X="3122.951" Y="4899.215" Z="617.7654" />
            </If>
            <While Condition="StageNumber() == 5">
                <MoveTo X="3144.727" Y="4884.331" Z="617.7654" />
                <CustomBehavior File="WaitTimer" WaitTime="2000" />
            </While>
            <CustomBehavior File="WaitTimer" WaitTime="10000" />
            <CustomBehavior File="InteractWith" MobId="113062" X="1665" Y="4734.806" Z="138.9329" />
            <MoveTo X="1717.735" Y="4623.107" Z="123.9469" />
        </If>
        <!-- 623 -->
        <If Condition="HasQuest(43567) || NeedsQuest(43568)">
            <CustomBehavior File="RunCode" Code="PrintStep(623)" />
            <TurnIn Nav="Fly" QuestName="All In" QuestId="43567" TurnInName="Valewalker Farodin" TurnInId="107126" X="1717.735" Y="4623.107" Z="123.9469" />
            <PickUp Nav="Fly" QuestName="Arcan'dor, Gift of the Ancient Magi" QuestId="43568" GiverName="Valewalker Farodin" GiverId="107126" X="1717.735" Y="4623.107" Z="123.9469" />
        </If>
        <!-- 624 - 626 -->
        <While Condition="DoQuest(43568)">
            <If Condition="!IsObjectiveComplete(1,43568)">
                <CustomBehavior File="RunCode" Code="PrintStep(624)" />
                <CustomBehavior File="InteractWith" MobId="253081" X="1714.926" Y="4631.274" Z="124.0065" />
                <CustomBehavior File="InteractWith" MobId="112147" InteractByGossipOptions="1" X="1714.926" Y="4631.274" Z="124.0065" WaitTime="20000" />
            </If>
            <If Condition="!IsObjectiveComplete(2,43568)">
                <CustomBehavior File="RunCode" Code="PrintStep(625)" />
                <CustomBehavior File="InteractWith" MobId="253081" X="1714.926" Y="4631.274" Z="124.0065" />
                <CustomBehavior File="InteractWith" MobId="112145" InteractByGossipOptions="1" X="1714.926" Y="4631.274" Z="124.0065" WaitTime="20000" />
            </If>
            <If Condition="!IsObjectiveComplete(3,43568)">
                <CustomBehavior File="RunCode" Code="PrintStep(626)" />
                <CustomBehavior File="InteractWith" MobId="253081" X="1714.926" Y="4631.274" Z="124.0065" />
                <CustomBehavior File="InteractWith" MobId="112146" InteractByGossipOptions="1" X="1714.926" Y="4631.274" Z="124.0065" WaitTime="20000" />
            </If>
        </While>
        <!-- 627 -->
        <!-- this will give you 11/11 -->
        <If Condition="HasQuest(43568)">
            <CustomBehavior File="RunCode" Code="PrintStep(627)" />
            <TurnIn Nav="Fly" QuestName="Arcan'dor, Gift of the Ancient Magi" QuestId="43568" TurnInName="First Arcanist Thalyssra" TurnInId="112146" X="1717.735" Y="4623.107" Z="123.9469" />
        </If>
        <!-- 628 -->
        <If Condition="NeedsQuest(43569)">
            <CustomBehavior File="RunCode" Code="PrintStep(628)" />
            <PickUp Nav="Fly" QuestName="Arluin's Request" QuestId="43569" GiverName="Vanthir" GiverId="107598" X="1717.735" Y="4623.107" Z="123.9469" />
        </If>
        <!-- 629 - 630 -->
        <While Condition="DoQuest(43569)">
            <CustomBehavior File="RunCode" Code="PrintStep(629)" />
            <If Condition="IsInCity() == false">
                <CustomBehavior File="InteractWith" MobId="254143" X="1784.888" Y="4622.173" Z="123.9933" />
            </If>
            <MoveTo X="972.9822" Y="3981.734" Z="1.709785" />
            <CustomBehavior File="InteractWith" MobId="110698" InteractByGossipOptions="1" X="972.9822" Y="3981.734" Z="1.709785" TerminateWhen="DoQuest(43569) == false" />
        </While>
        <!-- 631 -->
        <If Condition="HasQuest(43569)">
            <CustomBehavior File="RunCode" Code="PrintStep(631)" />
            <TurnIn Nav="Fly" QuestName="Arluin's Request" QuestId="43569" TurnInName="Arluelle" TurnInId="110698" X="972.9822" Y="3981.734" Z="1.709785" />
        </If>
        <!-- 632 -->
        <If Condition="NeedsQuest(45260)">
            <CustomBehavior File="RunCode" Code="PrintStep(632)" />
            <PickUp Nav="Fly" QuestName="One Day at a Time" QuestId="45260" GiverName="First Arcanist Thalyssra" GiverId="115736" X="1714.032" Y="4634.08" Z="124.0054" />
        </If>
        <!-- 633 -->
        <If Condition="DoQuest(45260)">
            <CustomBehavior File="RunCode" Code="PrintStep(633)" />
            <MoveTo X="1687.115" Y="4578.417" Z="123.9948" />
            <CustomBehavior File="RunCode" Code="Unit(111902).Target()" />
            <CustomBehavior File="UseItem" ItemId="143597" NumOfTimes="1" />
        </If>
        <!-- 634 -->
        <If Condition="HasQuest(45260) || NeedsQuest(38649)">
            <CustomBehavior File="RunCode" Code="PrintStep(634)" />
            <TurnIn Nav="Fly" QuestName="One Day at a Time" QuestId="45260" TurnInName="First Arcanist Thalyssra" TurnInId="115736" X="1714.032" Y="4634.08" Z="124.0054" />
            <PickUp Nav="Fly" QuestName="Silence in the City" QuestId="38649" GiverName="First Arcanist Thalyssra" GiverId="115736" X="1714.032" Y="4634.08" Z="124.0054" />
        </If>
        <!-- 635 -->
        <If Condition="HasQuest(38649) || NeedsQuest(38695)">
            <CustomBehavior File="RunCode" Code="PrintStep(635)" />
            <TurnIn Nav="Fly" QuestName="Silence in the City" QuestId="38649" TurnInName="Chief Telemancer Oculeth" TurnInId="115710" X="1714.032" Y="4634.08" Z="124.0054" />
            <PickUp Nav="Fly" QuestName="Crackdown" QuestId="38695" GiverName="Chief Telemancer Oculeth" GiverId="115710" X="1714.032" Y="4634.08" Z="124.0054" />
            <CustomBehavior File="WaitTimer" WaitTime="10000" />
        </If>
        <!-- 636 - 638 -->
        <If Condition="DoQuest(38695)">
            <If Condition="IsObjectiveComplete(1,38695) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(636)" />
                <MoveTo X="1789.177" Y="4632.076" Z="124.0141" />
                <CustomBehavior File="WaitTimer" WaitTime="35000" />
            </If>
            <If Condition="IsObjectiveComplete(2,38695) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(637)" />
                <CustomBehavior File="InteractWith" MobId="265509" X="433.2028" Y="4011.973" Z="1.38826" />
            </If>
            <If Condition="IsObjectiveComplete(3,38695) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(638)" />
                <MoveTo X="348.516" Y="3970.926" Z="1.38876" />
            </If>
        </If>
        <!-- 639 -->
        <If Condition="HasQuest(38695) || NeedsQuest(38692,38720)">
            <CustomBehavior File="RunCode" Code="PrintStep(639)" />
            <TurnIn Nav="Fly" QuestName="Crackdown" QuestId="38695" TurnInName="Silgryn" TurnInId="114948" X="375.5817" Y="3998.902" Z="3.232193" />
            <PickUp Nav="Fly" QuestName="Answering Aggression" QuestId="38692" GiverName="Silgryn" GiverId="114948" X="375.5817" Y="3998.902" Z="3.232193" />
            <PickUp Nav="Fly" QuestName="No Reason to Stay" QuestId="38720" GiverName="Silgryn" GiverId="114948" X="375.5817" Y="3998.902" Z="3.232193" />
        </If>
        <!-- 640 - 645 -->
        <If Condition="DoQuest(38720)">
            <While Condition="IsObjectiveComplete(1,38720) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(642)" />
                <CustomBehavior File="InteractWith" MobId="116001" InteractByGossipOptions="1" X="340.8402" Y="3931.683" Z="3.234187" />
                <MoveTo X="341.9679" Y="3924.277" Z="3.234401" />
                <!-- up the stairs -->
                <CustomBehavior File="MyCTM" X="338.9492" Y="3919.172" Z="4.377082" />
                <CustomBehavior File="MyCTM" X="327.9108" Y="3925.581" Z="10.94958" />
                <CustomBehavior File="MyCTM" X="330.9513" Y="3931.691" Z="10.94958" />
                <CustomBehavior File="MyCTM" X="341.5406" Y="3925.402" Z="10.94958" />
                <CustomBehavior File="MyCTM" X="342.6498" Y="3927.269" Z="10.94956" />
                <CustomBehavior File="MyCTM" X="343.4247" Y="3930.744" Z="11.51179" />
                <!-- kid 1 -->
                <CustomBehavior File="InteractWith" MobId="115992" InteractByGossipOptions="1" X="343.4543" Y="3929.84" Z="10.94967" WaitTime="5000" />
                <!-- across hall -->
                <CustomBehavior File="MyCTM" X="342.6498" Y="3927.269" Z="10.94956" />
                <CustomBehavior File="MyCTM" X="340.603" Y="3921.406" Z="10.94938" />
                <!-- kid2 -->
                <CustomBehavior File="InteractWith" MobId="115991" InteractByGossipOptions="1" X="341.0261" Y="3921.573" Z="10.94957" WaitTime="5000" />
                <!-- down the stairs -->
                <CustomBehavior File="MyCTM" X="342.6498" Y="3927.269" Z="10.94956" />
                <CustomBehavior File="MyCTM" X="341.5406" Y="3925.402" Z="10.94958" />
                <CustomBehavior File="MyCTM" X="330.9513" Y="3931.691" Z="10.94958" />
                <CustomBehavior File="MyCTM" X="327.9108" Y="3925.581" Z="10.94958" />
                <CustomBehavior File="MyCTM" X="338.9492" Y="3919.172" Z="4.377082" />
                <CustomBehavior File="MyCTM" X="341.9679" Y="3924.277" Z="3.234401" />
                <!-- complete -->
                <CustomBehavior File="InteractWith" MobId="116001" InteractByGossipOptions="1" X="340.8402" Y="3931.683" Z="3.234187" />
            </While>
            <If Condition="IsObjectiveComplete(4,38720) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(643)" />
                <MoveTo X="293.7339" Y="3862.741" Z="7.624475" />
                <CustomBehavior File="InteractWith" MobId="114978" X="293.7339" Y="3862.741" Z="7.624475" />
                <CustomBehavior File="InteractWith" MobId="265520" X="297.8645" Y="3854.651" Z="7.737633" />
            </If>
            <If Condition="IsObjectiveComplete(2,38720) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(644)" />
                <CustomBehavior File="InteractWith" MobId="114983" InteractByGossipOptions="1" X="419.3998" Y="3939.655" Z="3.109889" />
                <CustomBehavior File="KillUntilComplete" MobIds="116013" TerminateWhen="IsObjectiveComplete(2,38720)" X="419.3998" Y="3939.655" Z="3.109889" />
            </If>
            <If Condition="IsObjectiveComplete(3,38720) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(645)" />
                <CustomBehavior File="InteractWith" MobId="114985" InteractByGossipOptions="1" X="473.7697" Y="3995.93" Z="3.233711" />
            </If>
        </If>
        <!-- 646 -->
        <If Condition="DoQuest(38692)">
            <CustomBehavior File="RunCode" Code="PrintStep(646)" />
            <CustomBehavior File="KillUntilComplete" MobIds="114874, 115806, 114876, 114868" TerminateWhen="IsQuestCompleted(38692)">
                <HuntingGrounds>
                    <Hotspot X="458.8527" Y="4002.265" Z="1.388249" />
                    <Hotspot X="344.9833" Y="3952.337" Z="1.388322" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 647 -->
        <If Condition="HasQuest(38692) || HasQuest(38720) || NeedsQuest(38694)">
            <CustomBehavior File="RunCode" Code="PrintStep(647)" />
            <TurnIn Nav="Fly" QuestName="Answering Aggression" QuestId="38692" TurnInName="Silgryn" TurnInId="115018" X="282.6802" Y="3896.759" Z="7.325881" />
            <TurnIn Nav="Fly" QuestName="No Reason to Stay" QuestId="38720" TurnInName="Silgryn" TurnInId="115018" X="282.6802" Y="3896.759" Z="7.325881" />
            <PickUp Nav="Fly" QuestName="Regroup" QuestId="38694" GiverName="Silgryn" GiverId="115018" X="282.6802" Y="3896.759" Z="7.325881" />
            <!-- <TurnIn Nav="Fly" QuestName="Regroup" QuestId="38694" TurnInName="Silgryn" TurnInId="114948" /> -->
        </If>
        <!-- 648 -->
        <If Condition="DoQuest(38694)">
            <If Condition="IsObjectiveComplete(1,38694) == false || IsObjectiveComplete(2,38694) == false">
                <MoveTo X="222.1186" Y="3825.128" Z="1.133825" />
                <CustomBehavior File="ForcedDismount" />
                <CustomBehavior File="InteractWith" MobId="114970" X="222.5806" Y="3826.729" Z="1.615786" WaitTime="60000" />
            </If>
            <If Condition="IsObjectiveComplete(3,38694) == false">
                <MoveTo X="522.5868" Y="3796.102" Z="1.493056" />
                <CustomBehavior File="WaitTimer" WaitTime="3000" />
            </If>
        </If>
        <If Condition="HasQuest(38694)">
            <If Condition="Me.Location.Z &lt; 30">
                <MoveTo X="522.5868" Y="3796.102" Z="1.493056" />
                <CustomBehavior File="WaitTimer" WaitTime="3000" />
            </If>
            <TurnIn Nav="Fly" QuestName="Regroup" QuestId="38694" TurnInName="Silgryn" TurnInId="114948" X="518.32" Y="3774.72" Z="33.02" />
        </If>
        <If Condition="NeedsQuest(42889)">
            <If Condition="Me.Location.Z &lt; 30">
                <MoveTo X="522.5868" Y="3796.102" Z="1.493056" />
                <CustomBehavior File="WaitTimer" WaitTime="3000" />
            </If>
            <PickUp Nav="Fly" QuestName="The Way Back Home" QuestId="42889" GiverName="Telemancy Beacon" GiverId="265532" X="518.32" Y="3774.72" Z="33.02" />
            <!-- <TurnIn Nav="Fly" QuestName="The Way Back Home" QuestId="42889" TurnInName="First Arcanist Thalyssra" TurnInId="115736" /> -->
        </If>
        <If Condition="DoQuest(42889)">
            <If Condition="Me.Location.Z &lt; 30">
                <MoveTo X="522.5868" Y="3796.102" Z="1.493056" />
                <CustomBehavior File="WaitTimer" WaitTime="3000" />
            </If>
            <CustomBehavior File="InteractWith" MobId="265528" X="518.32" Y="3774.72" Z="33.02" WaitTime="3000" />
            <CustomBehavior File="InteractWith" MobId="265529" X="518.32" Y="3774.72" Z="33.02" WaitTime="3000" />
        </If>
        <!-- 655 -->
        <If Condition="HasQuest(42889) || NeedsQuest(44955)">
            <CustomBehavior File="RunCode" Code="PrintStep(655)" />
            <TurnIn Nav="Fly" QuestName="The Way Back Home" QuestId="42889" TurnInName="First Arcanist Thalyssra" TurnInId="115736" X="1719.485" Y="4633.416" Z="124.0064" />
            <PickUp Nav="Fly" QuestName="Visitor in Shal'Aran" QuestId="44955" GiverName="First Arcanist Thalyssra" GiverId="115736" X="1719.485" Y="4633.416" Z="124.0064" />
        </If>
        <!-- 656 - 657 -->
        <If Condition="DoQuest(44955)">
            <If Condition="IsObjectiveComplete(1,44955) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(656)" />
                <CustomBehavior File="InteractWith" MobId="116085" X="1668.512" Y="4738.312" Z="138.5849" WaitTime="35000" />
            </If>
            <If Condition="IsObjectiveComplete(2,44955) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(657)" />
                <CustomBehavior File="InteractWith" MobId="116085" InteractByGossipOptions="1" X="1668.512" Y="4738.312" Z="138.5849" WaitTime="2000" />
                <MoveTo X="1714.339" Y="4635.479" Z="124.0237" />
            </If>
        </If>
        <!-- 659 -->
        <If Condition="HasQuest(44955)">
            <CustomBehavior File="RunCode" Code="PrintStep(659)" />
            <TurnIn Nav="Fly" QuestName="Visitor in Shal'Aran" QuestId="44955" TurnInName="First Arcanist Thalyssra" TurnInId="115736" X="1719.485" Y="4633.416" Z="124.0064" />
        </If>
        <!-- 660 -->
        <If Condition="NeedsQuest(45261)">
            <CustomBehavior File="RunCode" Code="PrintStep(660)" />
            <PickUp Nav="Fly" QuestName="Continuing the Cure" QuestId="45261" GiverName="First Arcanist Thalyssra" GiverId="115736" X="1719.485" Y="4633.416" Z="124.0064" />
        </If>
        <!-- 661 -->
        <If Condition="DoQuest(45261)">
            <CustomBehavior File="RunCode" Code="PrintStep(661)" />
            <MoveTo X="1687.115" Y="4578.417" Z="123.9948" />
            <CustomBehavior File="RunCode" Code="Unit(111902).Target()" />
            <CustomBehavior File="UseItem" ItemId="143597" NumOfTimes="1" />
        </If>
        <!-- 662 -->
        <If Condition="HasQuest(45261) || NeedsQuest(44722)">
            <CustomBehavior File="RunCode" Code="PrintStep(662)" />
            <TurnIn Nav="Fly" QuestName="Continuing the Cure" QuestId="45261" TurnInName="First Arcanist Thalyssra" TurnInId="115736" X="1719.485" Y="4633.416" Z="124.0064" />
            <PickUp Nav="Fly" QuestName="Disillusioned Defector" QuestId="44722" GiverName="First Arcanist Thalyssra" GiverId="115736" X="1719.485" Y="4633.416" Z="124.0064" />
        </If>
        <!-- 663 - 664 -->
        <If Condition="HasQuest(44722) || NeedsQuest(44724,44723)">
            <CustomBehavior File="RunCode" Code="PrintStep(663,664)" />
            <If Condition="Me.SubZoneId != 8487 &amp;&amp; Me.Location.Z &lt; 30">
                <CustomBehavior File="InteractWith" MobId="265956" X="1783.652" Y="4630.499" Z="123.9903" WaitTime="3000" />
            </If>
            <TurnIn Nav="Fly" QuestName="Disillusioned Defector" QuestId="44722" TurnInName="Silgryn" TurnInId="114948" X="519.3181" Y="3766.764" Z="33.01528" />
            <PickUp Nav="Fly" QuestName="Missing Persons" QuestId="44724" GiverName="Silgryn" GiverId="114948" X="519.3181" Y="3766.764" Z="33.01528" />
            <PickUp Nav="Fly" QuestName="More Like Me" QuestId="44723" GiverName="Victoire" GiverId="114956" X="519.3181" Y="3766.764" Z="33.01528" />
        </If>
        <!-- 665 -->
        <If Condition="DoQuest(44724)">
            <CustomBehavior File="RunCode" Code="PrintStep(665)" />
            <If Condition="Me.SubZoneId == 8487 &amp;&amp; Me.Location.Z &gt;= 30">
                <CustomBehavior File="InteractWith" MobId="116317" X="529.6411" Y="3759.976" Z="33.02479" WaitTime="10000" />
            </If>
            <CustomBehavior File="KillUntilComplete" MobIds="114904, 114959" TerminateWhen="IsObjectiveComplete(1,44724)">
                <HuntingGrounds>
                    <Hotspot X="784.6664" Y="3697.919" Z="0.6556427" />
                    <Hotspot X="771.5995" Y="3632.73" Z="8.044536" />
                    <Hotspot X="832.5453" Y="3615.149" Z="6.158259" />
                    <Hotspot X="846.4885" Y="3540.818" Z="2.849932" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 666 -->
        <If Condition="DoQuest(44723)">
            <CustomBehavior File="RunCode" Code="PrintStep(666)" />
            <CustomBehavior File="InteractWith" MobId="114958" NumOfTimes="500" TerminateWhen="IsQuestCompleted(44723)" InteractByUsingItemId="142065">
                <HuntingGrounds>
                    <Hotspot X="784.6664" Y="3697.919" Z="0.6556427" />
                    <Hotspot X="771.5995" Y="3632.73" Z="8.044536" />
                    <Hotspot X="832.5453" Y="3615.149" Z="6.158259" />
                    <Hotspot X="846.4885" Y="3540.818" Z="2.849932" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 667 -->
        <If Condition="HasQuest(44724) || HasQuest(44723)">
            <CustomBehavior File="RunCode" Code="PrintStep(667)" />
            <!-- warp up -->
            <If Condition="Me.SubZoneId != 8487 || Me.Location.Z &lt; 30">
                <MoveTo X="522.5868" Y="3796.102" Z="1.493056" />
                <CustomBehavior File="WaitTimer" WaitTime="3000" />
            </If>
            <TurnIn Nav="Fly" QuestName="Missing Persons" QuestId="44724" TurnInName="Silgryn" TurnInId="114948" X="519.3181" Y="3766.764" Z="33.01528" />
            <TurnIn Nav="Fly" QuestName="More Like Me" QuestId="44723" TurnInName="Victoire" TurnInId="114956" X="519.3181" Y="3766.764" Z="33.01528" />
        </If>
        <!-- 669 -->
        <If Condition="NeedsQuest(44725)">
            <CustomBehavior File="RunCode" Code="PrintStep(669)" />
            <!-- warp up -->
            <If Condition="Me.SubZoneId != 8487 || Me.Location.Z &lt; 30">
                <MoveTo X="522.5868" Y="3796.102" Z="1.493056" />
                <CustomBehavior File="WaitTimer" WaitTime="3000" />
            </If>
            <PickUp Nav="Fly" QuestName="Hostage Situation" QuestId="44725" GiverName="Silgryn" GiverId="114948" X="519.3181" Y="3766.764" Z="33.01528" />
            <!-- <TurnIn Nav="Fly" QuestName="Hostage Situation" QuestId="44725" TurnInName="Silgryn" TurnInId="115067" /> -->
        </If>
        <!-- 670 -->
        <If Condition="DoQuest(44725)">
            <CustomBehavior File="RunCode" Code="PrintStep(670)" />
            <If Condition="Me.SubZoneId == 8487 &amp;&amp; Me.Location.Z &gt;= 30">
                <CustomBehavior File="InteractWith" MobId="116317" X="529.6411" Y="3759.976" Z="33.02479" WaitTime="10000" />
            </If>
            <CustomBehavior File="InteractWith" MobId="115066" X="686.9238" Y="3736.415" Z="2.849463" WaitTime="60000" />
        </If>
        <!-- 672 -->
        <While Condition="HasQuest(44725) || NeedsQuest(44726)">
            <CustomBehavior File="RunCode" Code="PrintStep(672)" />
            <TurnIn Nav="Fly" QuestName="Hostage Situation" QuestId="44725" TurnInName="Silgryn" TurnInId="115067" X="154.64" Y="5276.77" Z="1.2" />
            <PickUp Nav="Fly" QuestName="In the Business of Souls" QuestId="44726" GiverName="Silgryn" GiverId="115067" X="154.64" Y="5276.77" Z="1.2" />
        </While>
        <!-- 673 -->
        <While Condition="NeedsQuest(44727)">
            <CustomBehavior File="RunCode" Code="PrintStep(673)" />
            <PickUp Nav="Fly" QuestName="Smuggled!" QuestId="44727" GiverName="Maribeth" GiverId="115002" X="167.6388" Y="5228.784" Z="8.697306" />
        </While>
        <!-- 674 -->
        <While Condition="DoQuest(44727)">
            <If Condition="IsObjectiveComplete(1,44727) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(674)" />
                <CustomBehavior File="InteractWith" MobIds="266029" X="167.6388" Y="5228.784" Z="8.697306" WaitTime="1500" />
            </If>
            <If Condition="IsObjectiveComplete(2,44727) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(675)" />
                <CustomBehavior File="InteractWith" MobIds="265521" NumOfTimes="500" TerminateWhen="IsObjectiveComplete(2,44727)">
                    <HuntingGrounds>
                        <Hotspot X="212.426" Y="5244.615" Z="4.359321" />
                        <Hotspot X="141.2855" Y="5181.962" Z="35.825" />
                    </HuntingGrounds>
                </CustomBehavior>
            </If>
        </While>
        <!-- 680 -->
        <If Condition="DoQuest(44726)">
            <CustomBehavior File="RunCode" Code="PrintStep(680)" />
            <CustomBehavior File="KillUntilComplete" MobIds="114998" TerminateWhen="IsObjectiveComplete(1,44726)">
                <HuntingGrounds>
                    <Hotspot X="141.2855" Y="5181.962" Z="35.825" />
                </HuntingGrounds>
            </CustomBehavior>
        </If>
        <!-- 681 -->
        <If Condition="HasQuest(44727)">
            <CustomBehavior File="RunCode" Code="PrintStep(681)" />
            <TurnIn Nav="Fly" QuestName="Smuggled!" QuestId="44727" TurnInName="Maribeth" TurnInId="115376" X="154.64" Y="5276.77" Z="1.2" />
        </If>
        <!-- 682 -->
        <If Condition="HasQuest(44726) || NeedsQuest(44814)">
            <CustomBehavior File="RunCode" Code="PrintStep(682)" />
            <TurnIn Nav="Fly" QuestName="In the Business of Souls" QuestId="44726" TurnInName="Silgryn" TurnInId="115067" X="154.64" Y="5276.77" Z="1.2" />
            <PickUp Nav="Fly" QuestName="Waning Refuge" QuestId="44814" GiverName="Silgryn" GiverId="115067" X="154.64" Y="5276.77" Z="1.2" />
        </If>
        <!-- 683 -->
        <If Condition="DoQuest(44814)">
            <CustomBehavior File="RunCode" Code="PrintStep(683)" />
            <CustomBehavior File="InteractWith" MobIds="115080" X="154.64" Y="5276.77" Z="1.2" WaitTime="1500" />
        </If>
        <!-- 684 -->
        <If Condition="HasQuest(44814)">
            <TurnIn Nav="Fly" QuestName="Waning Refuge" QuestId="44814" TurnInName="Silgryn" TurnInId="114948" X="476.29" Y="3745.05" Z="1.23" />
        </If>
        <!-- NOW 2/9 -->
        <!-- 685 -->
        <If Condition="NeedsQuest(45262)">
            <PickUp Nav="Fly" QuestName="A Message From Ly'leth" QuestId="45262" GiverName="First Arcanist Thalyssra" GiverId="115736" X="1716.417" Y="4634.912" Z="124.0077" />
        </If>
        <!-- 686 -->
        <If Condition="DoQuest(45262)">
            <CustomBehavior File="RunCode" Code="PrintStep(686)" />
            <CustomBehavior File="InteractWith" MobIds="111901,111902" NumOfTimes="500" TerminateWhen="IsQuestCompleted(45262)" InteractByUsingItemId="143597" X="1687.115" Y="4578.417" Z="123.9948" />
        </If>
        <!-- 687 -->
        <If Condition="HasQuest(45262) || NeedsQuest(44742)">
            <CustomBehavior File="RunCode" Code="PrintStep(687)" />
            <TurnIn Nav="Fly" QuestName="A Message From Ly'leth" QuestId="45262" TurnInName="First Arcanist Thalyssra" TurnInId="115736" X="1716.417" Y="4634.912" Z="124.0077" />
            <PickUp Nav="Fly" QuestName="Tavernkeeper's Fate" QuestId="44742" GiverName="First Arcanist Thalyssra" GiverId="115736" X="1716.417" Y="4634.912" Z="124.0077" />
        </If>
        <!-- 688 -->
        <If Condition="DoQuest(44742)">
            <CustomBehavior File="RunCode" Code="PrintStep(688)" />
            <If Condition="IsInCity() == false">
                <CustomBehavior File="InteractWith" MobIds="254134" X="1774.218" Y="4647.567" Z="123.9914" WaitTime="1500" />
            </If>
        </If>
        <!-- 690 -->
        <If Condition="HasQuest(44742)">
            <CustomBehavior File="RunCode" Code="PrintStep(690)" />
            <TurnIn Nav="Fly" QuestName="Tavernkeeper's Fate" QuestId="44742" TurnInName="Ly'leth Lunastre" TurnInId="115247" X="517.31" Y="4237.33" Z="134.396" />
        </If>
        <!-- 691 -->
        <If Condition="NeedsQuest(44752)">
            <CustomBehavior File="RunCode" Code="PrintStep(691)" />
            <PickUp Nav="Fly" QuestName="Essence Triangulation" QuestId="44752" GiverName="First Arcanist Thalyssra" GiverId="115248" X="527.4207" Y="4250.756" Z="132.9012" />
        </If>
        <!-- 692 -->
        <While Condition="DoQuest(44752)">
            <If Condition="IsObjectiveComplete(1,44752) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(692)" />
                <CustomBehavior File="InteractWith" MobIds="115258" X="863.5993" Y="4338.11" Z="115.9694" WaitTime="12000" />
            </If>
            <If Condition="IsObjectiveComplete(2,44752) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(694)" />
                <CustomBehavior File="InteractWith" MobIds="115259" X="779.0227" Y="4131.393" Z="1.537641" WaitTime="12000" />
            </If>
            <If Condition="IsObjectiveComplete(3,44752) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(695)" />
                <CustomBehavior File="InteractWith" MobIds="115260" X="517.0723" Y="3835.895" Z="7.482187" WaitTime="12000" />
            </If>
        </While>
        <!-- 696 -->
        <If Condition="HasQuest(44752) || NeedsQuest(44753)">
            <CustomBehavior File="RunCode" Code="PrintStep(696)" />
            <!-- warp up -->
            <If Condition="Me.SubZoneId != 8487 || Me.Location.Z &lt; 30">
                <MoveTo X="522.5868" Y="3796.102" Z="1.493056" />
                <CustomBehavior File="WaitTimer" WaitTime="3000" />
            </If>
            <TurnIn Nav="Fly" QuestName="Essence Triangulation" QuestId="44752" TurnInName="First Arcanist Thalyssra" TurnInId="115248" X="517.8467" Y="3770.155" Z="33.01554" />
            <PickUp Nav="Fly" QuestName="On Public Display" QuestId="44753" GiverName="First Arcanist Thalyssra" GiverId="115248" X="517.8467" Y="3770.155" Z="33.01554" />
        </If>
        <!-- 697 -->
        <If Condition="DoQuest(44753)">
            <!-- warp up -->
            <If Condition="Me.SubZoneId != 8487 || Me.Location.Z &lt; 30">
                <MoveTo X="522.5868" Y="3796.102" Z="1.493056" />
                <CustomBehavior File="WaitTimer" WaitTime="3000" />
            </If>
            <While Condition="IsObjectiveComplete(1,44753) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(697)" />
                <CustomBehavior File="InteractWith" MobIds="115557" X="521.4846" Y="3761.192" Z="33.01525" InteractByGossipOptions="1" WaitTime="10000" />
            </While>
            <While Condition="IsObjectiveComplete(2,44753) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(698)" />
                <CustomBehavior File="InteractWith" MobIds="115581,115569,115584,115570,115687,115590,115571" NumOfTimes="500" X="521.9249" Y="3756.958" Z="33.01565" WaitTime="1000" TerminateWhen="IsObjectiveComplete(2,44753)" />
            </While>
        </If>
        <!-- 699 -->
        <If Condition="HasQuest(44753) || NeedsQuest(44754)">
            <CustomBehavior File="RunCode" Code="PrintStep(699)" />
            <!-- warp up -->
            <If Condition="Me.SubZoneId != 8487 || Me.Location.Z &lt; 30">
                <MoveTo X="522.5868" Y="3796.102" Z="1.493056" />
                <CustomBehavior File="WaitTimer" WaitTime="3000" />
            </If>
            <TurnIn Nav="Fly" QuestName="On Public Display" QuestId="44753" TurnInName="First Arcanist Thalyssra" TurnInId="115557" X="517.8467" Y="3770.155" Z="33.01554" />
            <PickUp Nav="Fly" QuestName="Waxing Crescent" QuestId="44754" GiverName="First Arcanist Thalyssra" GiverId="115557" X="517.8467" Y="3770.155" Z="33.01554" />
        </If>
        <!-- 701 -->
        <If Condition="DoQuest(44754)">
            <!-- warp down -->
            <If Condition="Me.SubZoneId == 8487 &amp;&amp; Me.Location.Z &gt;= 30">
                <MoveTo X="519.1198" Y="3779.8" Z="33.184" />
                <CustomBehavior File="WaitTimer" WaitTime="3000" />
            </If>
            <If Condition="IsObjectiveComplete(1,44754) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(701)" />
                <CustomBehavior File="KillUntilComplete" MobIds="115607" TerminateWhen="IsObjectiveComplete(1,44754)">
                    <HuntingGrounds>
                        <Hotspot X="1009.405" Y="4027.695" Z="16.83652" />
                    </HuntingGrounds>
                </CustomBehavior>
            </If>
            <While Condition="IsObjectiveComplete(2,44754) == false">
                <CustomBehavior File="RunCode" Code="PrintStep(702)" />
                <CustomBehavior File="InteractWith" MobIds="266138" X="964.3206" Y="3951.181" Z="17.36041" WaitTime="10000" />
            </While>
        </If>
        <!-- 703 -->
        <If Condition="HasQuest(44754)">
            <CustomBehavior File="RunCode" Code="PrintStep(703)" />
            <TurnIn Nav="Fly" QuestName="Waxing Crescent" QuestId="44754" TurnInName="Vanthir" TurnInId="115604" X="962.2499" Y="3945.834" Z="18.12475" />
        </If>
        <!-- 704 -->
        <If Condition="NeedsQuest(44756)">
            <PickUp Nav="Fly" QuestName="Sign of the Dusk Lily" QuestId="44756" GiverName="Vanthir" GiverId="115604" X="962.2499" Y="3945.834" Z="18.12475" />
        </If>
        <!-- 705 -->
        <If Condition="DoQuest(44756)">
            <CustomBehavior File="RunCode" Code="PrintStep(705)" />
            <CustomBehavior File="InteractWith" MobIds="115720" X="962.2499" Y="3945.834" Z="18.12475" WaitTime="10000" />
        </If>
        <!-- 706 -->
        <If Condition="HasQuest(44756) || NeedsQuest(45316)">
            <CustomBehavior File="RunCode" Code="PrintStep(706)" />
            <TurnIn Nav="Fly" QuestName="Sign of the Dusk Lily" QuestId="44756" TurnInName="First Arcanist Thalyssra" TurnInId="115736" X="1716.417" Y="4634.912" Z="124.0077" />
            <PickUp Nav="Fly" QuestName="Stabilizing Suramar" QuestId="45316" GiverName="First Arcanist Thalyssra" GiverId="115736" />
            <!-- <TurnIn Nav="Fly" QuestName="Stabilizing Suramar" QuestId="45316" TurnInName="First Arcanist Thalyssra" TurnInId="115736" /> -->
        </If>
        <!-- 3/9 -->
        <!-- 707 -->
        <If Condition="DoQuest(45316)">
            <CustomBehavior File="LoadProfile" ProfileName="reputation/[N] The Nightfallen Rep" RememberProfile="true" />
        </If>
    </QuestOrder>
</HBProfile>
